(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/bargain/buy"],{"3df8":function(t,i,a){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{userid:0,bargain_item_id:"",detail:"",use_money:0,pay_type:"",paymentFlag:!1,payOrderId:"",imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(i){var a=this,e=t.getStorageSync("user_id");void 0!=e&&""!=e&&(a.$data.userid=e),void 0!=i.pid&&""!=i.pid&&t.setStorageSync("pid",i.pid),a.wxb.addPage(this),a.wxb.Init(i,function(t){i.bargain_item_id&&(a.$data.bargain_item_id=i.bargain_item_id,a.checkOrderPayPrice())})},onUnload:function(){this.wxb.removePage()},onShow:function(){setTimeout(function(){var i=this.$data.payOrderId;i&&t.redirectTo({url:"../../mine/order/detail?order_id="+i})},1e3)},methods:{checkOrderPayPrice:function(){var t=this;t.wxb.Post("/shop/api.bargain/getPrice",{bargain_item_id:t.$data.bargain_item_id},function(i){t.$data.detail=i})},showPaymentDialog:function(t){"h5"==this.wxb.device?this.$data.paymentFlag=!0:this.sureBuyListener()},hidePaymentDialog:function(t){this.$data.paymentFlag=!1},paymentListener:function(t){var i=t.currentTarget.dataset.type;void 0!=i&&(this.$data.pay_type=i,this.sureBuyListener()),this.hidePaymentDialog()},onUseMoneyListener:function(){0==this.$data.use_money?this.$data.use_money=1:this.$data.use_money=0},sureBuyListener:function(i){var a=this;a.wxb.Post("/shop/api.bargain/createOrder",{use_money:a.$data.use_money,bargain_item_id:a.$data.bargain_item_id,pay_type:"h5"==a.wxb.device?a.$data.pay_type:""},function(i){if(0==i.is_pay)t.redirectTo();else if("h5"==a.wxb.device)if(a.$data.payOrderId=i.order_id,"weixin"==a.$data.pay_type)console.log("h5端支付跳转超链接"),window.location.href=i.order_info;else{var e=window.document.createElement("div");e.innerHTML=i.order_info,window.document.body.appendChild(e),window.document.forms.alipaysubmit.submit()}else a.wxb.paymentOrder(i,function(a){console.log(i);var e=i.order_id;t.redirectTo({url:"../../mine/order/detail?order_id="+e})})})}}};i.default=a}).call(this,a("5486")["default"])},5380:function(t,i,a){"use strict";var e=a("76f9"),s=a.n(e);s.a},"5bcb":function(t,i,a){"use strict";a.r(i);var e=a("b520"),s=a("96a3");for(var r in s)"default"!==r&&function(t){a.d(i,t,function(){return s[t]})}(r);a("5380");var n=a("2877"),o=Object(n["a"])(s["default"],e["a"],e["b"],!1,null,null,null);i["default"]=o.exports},"76f9":function(t,i,a){},"96a3":function(t,i,a){"use strict";a.r(i);var e=a("3df8"),s=a.n(e);for(var r in e)"default"!==r&&function(t){a.d(i,t,function(){return e[t]})}(r);i["default"]=s.a},b520:function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("view",{staticClass:"buy-box",attrs:{_hid:0}},[t._ri(!!t.detail,1)?a("view",{attrs:{_hid:1}},[a("view",{staticStyle:{position:"absolute",top:"0",bottom:"60px",left:"0",right:"0",overflow:"scroll"},attrs:{_hid:2}},[a("view",{staticClass:"addr-box",attrs:{_hid:3}},[a("view",{staticClass:"show-addr",attrs:{_hid:4}},[a("view",{staticClass:"lt-addr",attrs:{_hid:5}},[a("view",{staticClass:"t-info",attrs:{_hid:6}},[a("text",{attrs:{_hid:7}},[t._v(t._s(t.detail.name),8)]),a("text",{attrs:{_hid:9}},[t._v(t._s(t.detail.mobile),10)])]),a("view",{staticClass:"b-info",attrs:{_hid:11}},[t._v(t._s(t.detail.address),12)])])])]),a("view",{staticClass:"item-goods",staticStyle:{"'margin-top":"12px"},attrs:{_hid:13}},[a("image",{staticClass:"g-img",attrs:{src:t.detail.photo,_hid:14,_batrs:"src"}}),a("view",{staticClass:"g-cont",attrs:{_hid:15}},[a("view",{staticClass:"gc-name ellipsis-1",attrs:{_hid:16}},[t._v(t._s(t.detail.goods_name),17)]),a("view",{staticClass:"gc-sku",attrs:{_hid:18}},[a("view",{staticClass:"sku-cont ellipsis-02",attrs:{_hid:19}},[t._v(t._s(t.detail.key_name),20)]),a("text",{attrs:{_hid:21}},[])]),a("view",{staticClass:"gc-price",attrs:{_hid:23}},[a("text",{staticClass:"g-price",attrs:{_hid:24}},[t._v("¥"+t._s(t.detail.shop_price),25)])])])]),a("view",{staticClass:"order-info",attrs:{_hid:26}},[a("view",{staticClass:"item-order",attrs:{_hid:27}},[a("view",{staticClass:"o-lt",attrs:{_hid:28}},[]),a("view",{staticClass:"o-rt",attrs:{_hid:30}},[t._v(t._s(t.detail.bargain_price),31)])]),a("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:32}},[a("view",{staticClass:"o-lt",attrs:{_hid:33}},[]),a("view",{staticClass:"o-rt",attrs:{_hid:35}},[a("text",{attrs:{_hid:36}},[t._v("¥"+t._s(t.detail.shipping_price),37)])])])]),a("view",{staticClass:"order-info",attrs:{_hid:38}},[a("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:39}},[a("view",{staticClass:"o-lt",attrs:{_hid:40}},[]),a("view",{staticClass:"o-rt",attrs:{_hid:42}},[a("text",{staticClass:"iconfont icon-radio",class:1==t.use_money?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==t.use_money?"#ED3005":"#999999")+";",attrs:{_hid:43},on:{click:t.onUseMoneyListener}})])])])]),a("view",{staticClass:"bottom-box",attrs:{_hid:44}},[a("view",{staticClass:"bb-lt",attrs:{_hid:45}},[a("text",{staticClass:"bb-price",attrs:{_hid:46}},[t._v("¥"+t._s(t.detail.shipping_price+t.detail.bargain_price),47)])]),a("view",{staticClass:"bb-rt",attrs:{_hid:48},on:{click:t.showPaymentDialog}},[])])]):t._e(),a("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:50,_batrs:"img",_cid:0}}),a("ToastView",{attrs:{_hid:1052,_cid:1}}),t._ri(!!t.paymentFlag,2054)?a("view",{staticClass:"mask",attrs:{_hid:2054}},[a("view",{staticClass:"dialog-detailed",attrs:{_hid:2055}},[a("view",{staticClass:"dd-header",attrs:{_hid:2056}},[a("text",{staticClass:"h-tit",attrs:{_hid:2057}},[]),a("text",{staticClass:"h-close iconfont icon-btn_close_black",attrs:{_hid:2059},on:{click:t.hidePaymentDialog}})]),a("view",{staticClass:"dd-payment",attrs:{_hid:2060}},[a("view",{staticClass:"item-payment",attrs:{"data-type":"weixin",_hid:2061},on:{click:t.paymentListener}},[t._m(0),a("text",{staticClass:"p-radio iconfont",class:"weixin"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("weixin"==t.pay_type?"#3A96E6":"#EDEDED"),attrs:{_hid:2066}})]),a("view",{staticClass:"item-payment",attrs:{"data-type":"ali",_hid:2067},on:{click:t.paymentListener}},[t._m(1),a("text",{staticClass:"p-radio iconfont",class:"ali"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("ali"==t.pay_type?"#3A96E6":"#EDEDED"),attrs:{_hid:2072}})])])])]):t._e()],1)},s=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("view",{staticClass:"p-lt",attrs:{_hid:2062}},[a("text",{staticClass:"iconfont icon-icon_pay_wepay",staticStyle:{"font-size":"30px",color:"#41B035"},attrs:{_hid:2063}}),a("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"},attrs:{_hid:2064}},[])])},function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("view",{staticClass:"p-lt",attrs:{_hid:2068}},[a("text",{staticClass:"iconfont icon-icon_pay_alipay",staticStyle:{"font-size":"30px",color:"#00AAEE"},attrs:{_hid:2069}}),a("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"},attrs:{_hid:2070}},[])])}];a.d(i,"a",function(){return e}),a.d(i,"b",function(){return s})},ba8e:function(t,i,a){"use strict";a("2346");var e=r(a("5bcb")),s=r(a("3a53"));function r(t){return t&&t.__esModule?t:{default:t}}e.default.mpType="page";var n=new s.default(e.default);n.$mount()}},[["ba8e","common/runtime","common/vendor"]]]);