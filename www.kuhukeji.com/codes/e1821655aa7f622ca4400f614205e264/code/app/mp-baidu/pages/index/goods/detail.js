(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/goods/detail"],{"2dc2":function(t,i,s){},"3a1f":function(t,i,s){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=o(s("540a")),e=o(s("8972"));function o(t){return t&&t.__esModule?t:{default:t}}var r={data:function(){return{userid:0,index:0,tabBars:[{name:"商品",id:"0"},{name:"评价",id:"1"},{name:"推荐",id:"2"}],tData:{type:1,pbottom:0,ptop:22,mtop:0,data:{icon:"icon_quan",title:"领取优惠券",more:"更多",link:"/pages/index/goods/coupon?goods_id="}},skuFlag:!1,specs:[],comment:[],more:0,page:1,detail:{},goods_id:"",comment_type:1,currIndex:1,likes:[],likePage:1,likeMore:0,buyType:0,imgBaseUrl:"",customerNum:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},components:{goodsDescribe:e.default,skuDialog:a.default},onLoad:function(i){var s=this,a=t.getStorageSync("user_id");void 0!=a&&""!=a&&(s.$data.userid=a),void 0!=i.pid&&""!=i.pid&&t.setStorageSync("pid",i.pid),s.wxb.addPage(this),s.wxb.Init(i,function(t){s.$data.customerNum=t.info.tel,void 0!=i.goods_id&&(s.$data.goods_id=i.goods_id,s.getGoodsDetail())})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:t.$data.detail&&""!=t.$data.detail.goods_name?t.$data.detail.goods_name:"商品详情",path:"/pages/index/goods/detail?goods_id="+t.$data.goods_id+"&pid="+t.$data.userid}},methods:{toCallPhone:function(i){var s=this,a=s.$data.customerNum;""!=a?t.makePhoneCall({phoneNumber:a}):t.showToast({title:"请先配置"})},toHomeListener:function(i){t.reLaunch({url:"/pages/index/index"})},showSkuDialogListener:function(t){this.$data.skuFlag=!0},hideSkuDialogListener:function(t){this.$data.skuFlag=!1},sureAddGoodsListener:function(i){var s=this,a=i.detail;if(0==this.$data.buyType)void 0!=a.goodsNum&&void 0!=a.sku&&s.wxb.Post("/shop/api.Cart/addCart",{goods_id:s.$data.goods_id,num:a.goodsNum,spec_key:a.sku},function(t){s.$showToast({show:!0,content:"添加购物车成功"}),s.hideSkuDialogListener()});else if(1==this.$data.buyType){console.log("goodsNum=>"+a.goodsNum+";skuStr=>"+a.sku),console.log(a.sku_msg);var e=a.sku_msg,o="";for(var r in e)o+=e[r]+(r<e.length-1?"-":"");t.navigateTo({url:"./buy?goods_id="+s.$data.goods_id+"&num="+a.goodsNum+"&spec_key="+a.sku+"&sku_desc="+o}),s.hideSkuDialogListener()}},getLikeGoodsList:function(){var t=this,i=t.$data.likePage,s=t.$data.likes;1==i&&(s=[]),t.$data.detail&&t.wxb.Post("/shop/api.goods/index",{page:t.$data.likePage,p_cat_id:0},function(i){for(var a in i.list)s.push(i.list[a]);t.$data.likes=s,t.$data.likePage+=1,t.$data.likeMore=i.isMore})},buyGoodsListener:function(t){var i=this;i.showSkuDialogListener(),this.$data.buyType=1},addCartListener:function(t){var i=this;i.showSkuDialogListener(),this.$data.buyType=0},bannerChangeListener:function(t){this.$data.currIndex=t.detail.current+1},commentTypeListener:function(t){var i=t.currentTarget.dataset.type;this.$data.comment_type=i,this.$data.page=1,this.getGoodsDetail()},tapTab:function(t){console.log(t),this.$data.index=t,2==t&&(this.$data.likePage=1,this.getLikeGoodsList())},catchTouchMove:function(t){},getGoodsDetail:function(t){var i=this,s=i.$data.comment,a=i.$data.page;1==a&&(s=[]),i.wxb.Post("/shop/api.goods/detail",{goods_id:i.$data.goods_id,comment_type:i.$data.comment_type,page:i.$data.page},function(t){"baidu"==i.wxb.device&&swan.setPageInfo&&swan.setPageInfo({title:t.seo.title?"":t.seo.title,keywords:t.seo.keywords?"":t.seo.keywords,description:t.seo.description?"":t.seo.description,releaseDate:t.seo.releaseDate?"":t.seo.releaseDate,image:t.seo.image?"":t.seo.image,success:function(){console.log("百度SEO信息设置完成")}});var e=i.$data.tData.data.link;for(var o in i.$data.tData.data.link=e+i.$data.goods_id,t.comment.comment)s.push(t.comment.comment[o]);if(1==a){i.$data.detail=t.detail;var r=JSON.parse(JSON.stringify(t.detail)),d=[];if(1==r.sku_type){for(var c in r.spec){var n=[];for(var o in r.spec[c])r.spec[c][o].select="item-spec-nor",n.push(r.spec[c][o]);d.push({name:c,list:n})}i.$data.specs=d,i.wxb.printLog(d)}else 0==t.detail.goods_num?i.$data.btnMsg="库存不足":i.$data.btnMsg="确定"}i.$data.isMore=t.comment.isMore,i.$data.comment=s,i.$data.page+=1})}}};i.default=r}).call(this,s("5486")["default"])},"5c5c":function(t,i,s){"use strict";s.r(i);var a=s("3a1f"),e=s.n(a);for(var o in a)"default"!==o&&function(t){s.d(i,t,function(){return a[t]})}(o);i["default"]=e.a},"6e24":function(t,i,s){"use strict";var a=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("view",{staticClass:"goods-detail-box",attrs:{_hid:0}},[s("tab-view",{attrs:{type:2,tabBars:t.tabBars,_hid:1,_batrs:"type,tabBars",_cid:0},on:{tapTab:t.tapTab}}),t._ri(!(0!=t.index),1003)?s("block",{attrs:{_hid:1003}},[s("view",{staticClass:"goods-video-box",attrs:{_hid:1004}},[t._ri(!1,1005)?s("view",{staticClass:"notice-info",attrs:{_hid:1005}},[s("view",{staticClass:"notice-list",attrs:{_hid:1006}},[s("swiper",{staticStyle:{height:"36px"},attrs:{circular:"true",vertical:"true",interval:"3000",duration:"500",autoplay:"true",_hid:1007}},[s("swiper-item",{attrs:{catchtouchmove:"catchTouchMove",_hid:1008}},[s("view",{staticClass:"item-notice",attrs:{_hid:1009}},[s("image",{staticClass:"icon-notice",attrs:{src:"true",_hid:1010}}),s("text",{attrs:{_hid:1011}},[])])]),s("swiper-item",{attrs:{catchtouchmove:"catchTouchMove",_hid:1013}},[s("view",{staticClass:"item-notice",attrs:{_hid:1014}},[s("image",{staticClass:"icon-notice",attrs:{src:"true",_hid:1015}}),s("text",{attrs:{_hid:1016}},[])])])],1)],1)]):t._e(),s("swiper",{staticStyle:{height:"100%"},attrs:{circular:"true",interval:"3000",duration:"500",autoplay:"true",_hid:1018},on:{change:t.bannerChangeListener}},t._l(t.detail.photos,function(t,i,a){var e=void 0!==a?a:i;return s("swiper-item",{key:i,attrs:{_hid:1019,_fid:e,_fk:"index"}},[s("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t,_hid:1020,_fid:e,_batrs:"src"}})])},1019,t._self)),s("view",{staticClass:"share-box",attrs:{_hid:1021}},[s("button",{staticClass:"btn-share",attrs:{"open-type":"share",_hid:1022}}),s("text",{staticClass:"iconfont icon-btn_share",staticStyle:{color:"#fff"},attrs:{_hid:1023}})],1),t._ri(!!(t.detail&&t.detail.photos&&t.detail.photos.length>0),1024)?s("view",{staticClass:"dot-bg",attrs:{_hid:1024}},[t._v(t._s(t.currIndex)+"/"+t._s(t.detail.photos?t.detail.photos.length:0),1025)]):t._e()],1),s("view",{staticClass:"goods-info",attrs:{_hid:1026}},[s("view",{staticClass:"goods-name",attrs:{_hid:1027}},[t._v(t._s(t.detail.goods_name?t.detail.goods_name:""),1028)]),s("view",{staticClass:"goods-price",attrs:{_hid:1029}},[s("text",{staticStyle:{color:"#ED3005","font-size":"16px"},attrs:{_hid:1030}},[]),s("text",{staticStyle:{color:"#ED3005","font-size":"32px"},attrs:{_hid:1032}},[t._v(t._s(t.detail.shop_price?t.detail.shop_price:"0.00"),1033)]),s("text",{staticStyle:{color:"#999999","font-size":"14px","margin-left":"8px"},attrs:{_hid:1034}},[]),s("text",{staticStyle:{color:"#999999","font-size":"14px","margin-left":"4px","text-decoration":"line-through"},attrs:{_hid:1036}},[t._v("¥"+t._s(t.detail.market_price?t.detail.market_price:"0.00"),1037)])]),s("view",{staticClass:"goods-desc",attrs:{_hid:1038}},[s("view",{staticClass:"item-desc",attrs:{_hid:1039}},[s("text",{staticStyle:{color:"#666666"},attrs:{_hid:1040}},[]),s("text",{attrs:{_hid:1042}},[t._v(t._s(t.detail&&0==t.detail.is_free_shipping?t.detail.shipping_price+"元":"免费"),1043)])]),s("view",{staticClass:"item-desc",attrs:{_hid:1044}},[s("text",{staticStyle:{color:"#666666"},attrs:{_hid:1045}},[]),s("text",{attrs:{_hid:1047}},[t._v(t._s(t.detail.goods_num?t.detail.goods_num:"0"),1048)])]),s("view",{staticClass:"item-desc",attrs:{_hid:1049}},[s("text",{staticStyle:{color:"#666666"},attrs:{_hid:1050}},[]),s("text",{attrs:{_hid:1052}},[t._v(t._s(t.detail.sales_sum?t.detail.sales_sum:"0"),1053)])])])]),t._ri(!(1!=t.detail.prom_type),1054)?s("view",{staticClass:"actity-box",attrs:{_hid:1054}},[s("view",{staticClass:"act-lt",attrs:{_hid:1055}},[s("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png",_hid:1056,_batrs:"src"}}),s("text",{attrs:{_hid:1057}},[])]),s("view",{staticClass:"act-rt",attrs:{_hid:1059},on:{click:function(i){t.$linkListener("../bargain/list")}}},[s("text",{attrs:{_hid:1060}},[])])]):t._e(),t._ri(!(2!=t.detail.prom_type),1062)?s("view",{staticClass:"actity-box",attrs:{_hid:1062}},[s("view",{staticClass:"act-lt",attrs:{_hid:1063}},[s("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png",_hid:1064,_batrs:"src"}}),s("text",{attrs:{_hid:1065}},[])]),s("view",{staticClass:"act-rt",attrs:{_hid:1067},on:{click:function(i){t.$linkListener("../pintuan/list")}}},[s("text",{attrs:{_hid:1068}},[])])]):t._e(),t._ri(!(3!=t.detail.prom_type),1070)?s("view",{staticClass:"actity-box",attrs:{_hid:1070}},[s("view",{staticClass:"act-lt",attrs:{_hid:1071}},[s("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png",_hid:1072,_batrs:"src"}}),s("text",{attrs:{_hid:1073}},[])]),s("view",{staticClass:"act-rt",attrs:{_hid:1075},on:{click:function(i){t.$linkListener("../rush/list")}}},[s("text",{attrs:{_hid:1076}},[])])]):t._e(),t._ri(!(4!=t.detail.prom_type),1078)?s("view",{staticClass:"actity-box",attrs:{_hid:1078}},[s("view",{staticClass:"act-lt",attrs:{_hid:1079}},[s("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png",_hid:1080,_batrs:"src"}}),s("text",{attrs:{_hid:1081}},[])]),s("view",{staticClass:"act-rt",attrs:{_hid:1083},on:{click:function(i){t.$linkListener("../discount/list")}}},[s("text",{attrs:{_hid:1084}},[])])]):t._e(),t._ri(!(5!=t.detail.prom_type),1086)?s("view",{staticClass:"actity-box",attrs:{_hid:1086}},[s("view",{staticClass:"act-lt",attrs:{_hid:1087}},[s("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png",_hid:1088,_batrs:"src"}}),s("text",{attrs:{_hid:1089}},[])]),s("view",{staticClass:"act-rt",attrs:{_hid:1091},on:{click:function(i){t.$linkListener("../manjian/list")}}},[s("text",{attrs:{_hid:1092}},[])])]):t._e(),t._ri(!!(t.detail&&t.detail.coupon&&t.detail.coupon.length>0),1094)?s("titleView",{attrs:{tData:t.tData,_hid:1094,_batrs:"tData",_cid:1}}):t._e(),t._ri(!!(t.detail&&t.detail.coupon&&t.detail.coupon.length>0),2096)?s("coupon-view",{staticStyle:{background:"#fff"},attrs:{iData:t.detail.coupon,type:3,show:1,_hid:2096,_batrs:"iData,type,show",_cid:2}}):t._e(),s("view",{staticClass:"goods-server-info",attrs:{_hid:3098}},[s("view",{staticClass:"item-server",attrs:{_hid:3099}},[s("text",{staticStyle:{width:"50px"},attrs:{_hid:3100}},[]),s("text",{attrs:{_hid:3102}},[t._v("购买最高得"+t._s(t.detail.integral?t.detail.integral:0)+"积分",3103)])]),s("view",{staticClass:"item-server",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:3104}},[s("text",{staticStyle:{width:"50px"},attrs:{_hid:3105}},[]),s("text",{attrs:{_hid:3107}},[])])]),s("goodsDescribe",{attrs:{attr:t.detail.goods_attr,content:t.detail.goods_content,_hid:3109,_batrs:"attr,content",_cid:3}}),s("view",{staticStyle:{width:"100%",height:"60px"},attrs:{_hid:4111}}),s("view",{staticClass:"bottom-info",attrs:{_hid:4112}},[s("view",{staticClass:"item-bottom-menu",attrs:{_hid:4113}},[s("view",{staticClass:"ib-menu",attrs:{_hid:4114},on:{click:t.toHomeListener}},[s("text",{staticClass:"iconfont icon-tabbar",staticStyle:{"font-size":"22px"},attrs:{_hid:4115}}),s("view",{staticStyle:{"font-size":"12px","margin-top":"5px"},attrs:{_hid:4116}},[])]),s("view",{staticClass:"ib-menu",attrs:{_hid:4118},on:{click:t.toCallPhone}},[s("text",{staticClass:"iconfont icon-btn_call",staticStyle:{"font-size":"22px"},attrs:{_hid:4119}}),s("view",{staticStyle:{"font-size":"12px","margin-top":"5px"},attrs:{_hid:4120}},[])])]),s("view",{staticClass:"item-bottom-menu",staticStyle:{color:"#fff","font-size":"18px",background:"#FFAE19"},attrs:{_hid:4122},on:{click:t.addCartListener}},[]),s("view",{staticClass:"item-bottom-menu",staticStyle:{color:"#fff","font-size":"18px",background:"#ED3005"},attrs:{_hid:4124},on:{click:t.buyGoodsListener}},[])])],1):t._e(),t._ri(!(1!=t.index),4126)?s("block",{attrs:{_hid:4126}},[s("view",{staticClass:"common-info",attrs:{_hid:4127}},[t._ri(!1,4128)?s("view",{staticClass:"comm-desc",attrs:{_hid:4128}},[s("view",{staticClass:"lt-comm",attrs:{_hid:4129}},[s("text",{attrs:{_hid:4130}},[]),s("text",{staticStyle:{"margin-left":"8px"},attrs:{_hid:4132}},[])]),s("view",{staticClass:"rt-comm",attrs:{_hid:4134}},[])]):t._e(),s("view",{staticClass:"comm-type",attrs:{_hid:4136}},[s("view",{staticClass:"item-type",class:1==t.comment_type?"active":"",attrs:{"data-type":"1",_hid:4137},on:{click:t.commentTypeListener}},[]),s("view",{staticClass:"item-type",class:2==t.comment_type?"active":"",attrs:{"data-type":"2",_hid:4139},on:{click:t.commentTypeListener}},[]),s("view",{staticClass:"item-type",class:3==t.comment_type?"active":"",attrs:{"data-type":"3",_hid:4141},on:{click:t.commentTypeListener}},[]),s("view",{staticClass:"item-type",class:4==t.comment_type?"active":"",attrs:{"data-type":"4",_hid:4143},on:{click:t.commentTypeListener}},[])])]),t._ri(!!(t.comment.length>0),4145)?s("view",{staticClass:"common-list",attrs:{_hid:4145}},t._l(t.comment,function(i,a,e){var o=void 0!==e?e:a;return s("view",{key:a,staticClass:"item-common",attrs:{_hid:4146,_fid:o,_fk:"index"}},[s("view",{staticClass:"icom-lt",attrs:{_hid:4147,_fid:o}},[s("image",{staticClass:"user-face",attrs:{src:i.face?i.face:t.imgBaseUrl+"/mine/img_my_head@3x.png",_hid:4148,_fid:o,_batrs:"src"}})]),s("view",{staticClass:"icom-rt",attrs:{_hid:4149,_fid:o}},[s("view",{staticClass:"user-info",attrs:{_hid:4150,_fid:o}},[s("view",{staticClass:"uinfo-lt",attrs:{_hid:4151,_fid:o}},[s("view",{staticClass:"u-name",attrs:{_hid:4152,_fid:o}},[t._v(t._s(i.username),4153,o)]),s("view",{staticClass:"u-date",attrs:{_hid:4154,_fid:o}},[t._v(t._s(i.add_time),4155,o)])]),s("view",{staticClass:"uinfo-rt",attrs:{_hid:4156,_fid:o}},[t._l(i.goods_rank,function(t,i,o){var r=(void 0!==e?e:a)+"_"+(void 0!==o?o:i);return s("block",{key:t,attrs:{_hid:4157,_fid:r,_fk:"n"}},[s("text",{staticClass:"iconfont icon-Star_c xingxing",staticStyle:{color:"#FFAE19"},attrs:{_hid:4158,_fid:r}})])},"4157_"+(void 0!==e?e:a),t._self),t._ri(!!(5-i.goods_rank>0),4159,void 0!==e?e:a)?s("block",{attrs:{_hid:4159,_fid:o}},t._l(5-i.goods_rank,function(t,i,o){var r=(void 0!==e?e:a)+"_"+(void 0!==o?o:i);return s("text",{key:t,staticClass:"iconfont icon-Star_c xingxing",staticStyle:{color:"#DFE6EB"},attrs:{_hid:4160,_fid:r,_fk:"m"}})},"4160_"+(void 0!==e?e:a),t._self)):t._e()],1)]),s("view",{staticClass:"common-cont",attrs:{_hid:4161,_fid:o}},[t._v(t._s(i.content),4162,o)]),s("view",{staticClass:"common-img",attrs:{_hid:4163,_fid:o}},t._l(i.img,function(t,i,e){var o=(void 0!==e?e:a)+"_"+(void 0!==e?e:i);return s("image",{key:i,staticClass:"c-img",attrs:{src:t,_hid:4164,_fid:o,_batrs:"src",_fk:"z"}})},"4164_"+(void 0!==e?e:a),t._self))])])},4146,t._self)):t._e(),t._ri(!!t.more,4165)?s("view",{staticClass:"more",attrs:{bindtap:"getGoodsDetail",_hid:4165}},[]):t._e(),t._ri(!t.more,4167)?s("view",{staticClass:"nodata",attrs:{_hid:4167}},[]):t._e()]):t._e(),t._ri(!(2!=t.index),4169)?s("view",{staticClass:"rcm-list",attrs:{_hid:4169}},t._l(t.likes,function(i,a,e){var o=void 0!==e?e:a;return s("navigator",{key:a,attrs:{url:"/pages/index/goods/detail?goods_id="+i.goods_id,"open-type":"redirect",_hid:4170,_fid:o,_batrs:"url",_fk:"i"}},[s("view",{staticClass:"rcm-goods",attrs:{_hid:4171,_fid:o}},[s("image",{staticClass:"g-img",attrs:{src:i.photosales_sum,_hid:4172,_fid:o,_batrs:"src"}}),s("view",{staticClass:"g-info",attrs:{_hid:4173,_fid:o}},[s("view",{staticClass:"ellipsis-02 gname",attrs:{_hid:4174,_fid:o}},[t._v(t._s(i.goods_name),4175,o)]),s("view",{staticClass:"g-desc",attrs:{_hid:4176,_fid:o}},[s("view",{staticClass:"price-num",attrs:{_hid:4177,_fid:o}},[s("text",{attrs:{_hid:4178,_fid:o}},[]),s("text",{staticStyle:{"font-size":"18px"},attrs:{_hid:4180,_fid:o}},[t._v(t._s(i.shop_price),4181,o)])]),s("view",{staticClass:"sell-num",attrs:{_hid:4182,_fid:o}},[s("text",{attrs:{_hid:4183,_fid:o}},[t._v(t._s(i.sales_sum),4184,o)]),s("text",{staticStyle:{color:"#666666"},attrs:{_hid:4185,_fid:o}},[])])])])])])},4170,t._self)):t._e(),t._ri(!(!t.likeMore||2!=t.index),4187)?s("view",{staticClass:"more",attrs:{_hid:4187},on:{click:t.getLikeGoodsList}},[]):t._e(),t._ri(!(t.likeMore||2!=t.index),4189)?s("view",{staticClass:"nodata",attrs:{_hid:4189}},[]):t._e(),t._ri(!!t.skuFlag,4191)?s("skuDialog",{attrs:{specs:t.specs,detail:t.detail,_hid:4191,_batrs:"specs,detail",_cid:4},on:{addEvent:t.sureAddGoodsListener,closeEvent:t.hideSkuDialogListener}}):t._e(),s("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:5193,_batrs:"img",_cid:5}}),s("ToastView",{attrs:{_hid:6195,_cid:6}})],1)},e=[];s.d(i,"a",function(){return a}),s.d(i,"b",function(){return e})},"9f4d":function(t,i,s){"use strict";var a=s("2dc2"),e=s.n(a);e.a},b99f:function(t,i,s){"use strict";s.r(i);var a=s("6e24"),e=s("5c5c");for(var o in e)"default"!==o&&function(t){s.d(i,t,function(){return e[t]})}(o);s("9f4d");var r=s("2877"),d=Object(r["a"])(e["default"],a["a"],a["b"],!1,null,null,null);i["default"]=d.exports},e286:function(t,i,s){"use strict";s("2346");var a=o(s("b99f")),e=o(s("3a53"));function o(t){return t&&t.__esModule?t:{default:t}}a.default.mpType="page";var r=new e.default(a.default);r.$mount()}},[["e286","common/runtime","common/vendor"]]]);