(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/rush/buy"],{"11c3":function(t,s,i){"use strict";i("2346");var e=d(i("bd7c")),a=d(i("3a53"));function d(t){return t&&t.__esModule?t:{default:t}}e.default.mpType="page";var o=new a.default(e.default);o.$mount()},"3df0":function(t,s,i){"use strict";var e=i("91ca"),a=i.n(e);a.a},6730:function(t,s,i){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var e=a(i("0eb2"));function a(t){return t&&t.__esModule?t:{default:t}}var d={data:function(){return{showAddressFlag:!1,model:{},list:[],goods:[],detail:{},detailedFlag:!1,detailedList:[],use_money:0,pay_type:"",paymentFlag:!1,spec_key:"",num:0,goods_id:"",goodsDetail:"",sku_desc:"",photo:"",price:"",payOrderId:"",imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onShow:function(){""!=this.$data.payOrderId&&setTimeout(function(){var s=this.$data.payOrderId;s&&t.redirectTo({url:"../../mine/order/detail?order_id="+s})},1e3)},onLoad:function(t){console.log(t);var s=this;s.wxb.addPage(this),s.wxb.Init(t,function(i){var e=t.goods_id,a=t.goodsNum,d=t.spec_key;s.$data.goods_id=e,s.$data.num=a,s.$data.spec_key=d,s.getDefaultAddress(),s.getAddressList()})},components:{addressView:e.default},onUnload:function(){this.wxb.removePage()},methods:{showPaymentDialog:function(t){"h5"==this.wxb.device?this.$data.paymentFlag=!0:this.sureBuyListener()},hidePaymentDialog:function(t){this.$data.paymentFlag=!1},paymentListener:function(t){var s=t.currentTarget.dataset.type;void 0!=s&&(this.$data.pay_type=s,this.sureBuyListener()),this.hidePaymentDialog()},showDetailedDialog:function(t){this.$data.detailedFlag=!0},hideDetailedDialog:function(t){this.$data.detailedFlag=!1},onUseMoneyListener:function(){0==this.$data.use_money?this.$data.use_money=1:this.$data.use_money=0},sureBuyListener:function(s){var i=this;i.wxb.Post("/shop/api.rushbuy/saveOrder",{rushbuy_goods_id:i.$data.goods_id,num:i.$data.num,spec_key:i.$data.spec_key,address_id:i.$data.model.address_id,use_money:i.$data.use_money,user_note:"",pay_type:"h5"==i.wxb.device?i.$data.pay_type:""},function(s){if(i.$data.pay_type="",0==s.is_pay)t.redirectTo({url:"../../mine/order/detail?order_id="+s.order_id});else if("h5"==i.wxb.device)if(i.$data.payOrderId=s.order_id,"weixin"==i.$data.pay_type)console.log("h5端支付跳转超链接"),window.location.href=s.order_info;else{var e=window.document.createElement("div");e.innerHTML=s.order_info,window.document.body.appendChild(e),window.document.forms.alipaysubmit.submit()}else i.wxb.paymentOrder(s,function(i){var e=s.order_id;t.redirectTo({url:"../../mine/order/detail?order_id="+e})})})},selectAddrListener:function(t){this.$data.list;this.$data.model=JSON.parse(t),console.log(this.$data.model),this.getCheckOrderDetail(),this.hideAddressListListener()},showAddressListListener:function(){this.$data.showAddressFlag=!0},hideAddressListListener:function(){this.$data.showAddressFlag=!1,""==this.$data.model&&this.getDefaultAddress(),this.getAddressList()},deleteCallBack:function(t){this.getAddressList()},getDefaultAddress:function(t){var s=this;s.wxb.Post("/shop/api.address/getDefault",{},function(t){void 0!=t&&(s.$data.model=t),void 0!=s.$data.model.address_id&&s.getCheckOrderDetail()})},getAddressList:function(t){var s=this;s.wxb.Post("/shop/api.address/getIndex",{},function(t){s.$data.list=t.list;var i=s.$data.model;for(var e in t.list)if(t.list[e].address_id==i.address_id)return;s.$data.model="",s.getDefaultAddress()})},getCheckOrderDetail:function(t){var s=this;s.wxb.Post("/shop/api.rushbuy/getPrice",{rushbuy_goods_id:s.$data.goods_id,address_id:s.$data.model.address_id,spec_key:s.$data.spec_key},function(t){s.$data.detail=t,s.$data.goods=[],s.$data.goods.push(t.goods),s.$data.goodsDetail=t.goods})}}};s.default=d}).call(this,i("f266")["default"])},"91ca":function(t,s,i){},aa8e:function(t,s,i){"use strict";i.r(s);var e=i("6730"),a=i.n(e);for(var d in e)"default"!==d&&function(t){i.d(s,t,function(){return e[t]})}(d);s["default"]=a.a},bd7c:function(t,s,i){"use strict";i.r(s);var e=i("dd1b"),a=i("aa8e");for(var d in a)"default"!==d&&function(t){i.d(s,t,function(){return a[t]})}(d);i("3df0");var o=i("2877"),r=Object(o["a"])(a["default"],e["a"],e["b"],!1,null,null,null);s["default"]=r.exports},dd1b:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("view",{staticClass:"buy-box",attrs:{_hid:0}},[i("view",{staticStyle:{position:"absolute",top:"0",bottom:"60px",left:"0",right:"0",overflow:"scroll"},attrs:{_hid:1}},[i("view",{staticClass:"addr-box",attrs:{_hid:2}},[t._ri(!(""!=t.model),3)?i("view",{staticClass:"no-addr",attrs:{_hid:3},on:{click:t.showAddressListListener}},[i("view",{staticClass:"na-lt",attrs:{_hid:4}},[]),i("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:6}})]):t._e(),t._ri(!(""==t.model),7)?i("view",{staticClass:"show-addr",attrs:{_hid:7},on:{click:t.showAddressListListener}},[i("view",{staticClass:"lt-addr",attrs:{_hid:8}},[i("view",{staticClass:"t-info",attrs:{_hid:9}},[i("text",{attrs:{_hid:10}},[t._v(t._s(t.model.name),11)]),i("text",{attrs:{_hid:12}},[t._v(t._s(t.model.mobile),13)])]),i("view",{staticClass:"b-info",attrs:{_hid:14}},[t._v(t._s(t.model.address),15)])]),i("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:16}})]):t._e()]),i("view",{staticClass:"item-goods",staticStyle:{"'margin-top":"12px"},attrs:{_hid:17}},[i("image",{staticClass:"g-img",attrs:{src:t.goodsDetail&&t.goodsDetail.photo?t.goodsDetail.photo:"",_hid:18,_batrs:"src"}}),i("view",{staticClass:"g-cont",attrs:{_hid:19}},[i("view",{staticClass:"gc-name ellipsis-1",attrs:{_hid:20}},[t._v(t._s(t.goodsDetail&&t.goodsDetail.goods_name?t.goodsDetail.goods_name:""),21)]),i("view",{staticClass:"gc-sku",attrs:{_hid:22}},[i("view",{staticClass:"sku-cont ellipsis-02",attrs:{_hid:23}},[t._v(t._s(t.goodsDetail&&t.goodsDetail.spec_key_name?t.goodsDetail.spec_key_name:""),24)]),i("text",{attrs:{_hid:25}},[t._v("x"+t._s(t.num),26)])]),i("view",{staticClass:"gc-price",attrs:{_hid:27}},[i("text",{staticClass:"g-price",attrs:{_hid:28}},[t._v("¥"+t._s(t.goodsDetail&&t.goodsDetail.qg_price?t.goodsDetail.qg_price:"0.00"),29)])])])]),i("view",{staticClass:"order-info",attrs:{_hid:30}},[i("view",{staticClass:"item-order",attrs:{_hid:31}},[i("view",{staticClass:"o-lt",attrs:{_hid:32}},[]),i("view",{staticClass:"o-rt",attrs:{_hid:34}},[t._v(t._s(t.detail.total_price),35)])]),i("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:36}},[i("view",{staticClass:"o-lt",attrs:{_hid:37}},[]),i("view",{staticClass:"o-rt",attrs:{_hid:39}},[i("text",{attrs:{_hid:40}},[t._v("¥"+t._s(t.detail.freight),41)])])])]),i("view",{staticClass:"order-info",attrs:{_hid:42}},[i("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:43}},[i("view",{staticClass:"o-lt",attrs:{_hid:44}},[]),i("view",{staticClass:"o-rt",attrs:{_hid:46}},[i("text",{staticClass:"iconfont icon-radio",class:1==t.use_money?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==t.use_money?"#ED3005":"#999999")+";",attrs:{_hid:47},on:{click:t.onUseMoneyListener}})])])])]),i("view",{staticClass:"bottom-box",attrs:{_hid:48}},[i("view",{staticClass:"bb-lt",attrs:{_hid:49}},[i("text",{staticClass:"bb-price",attrs:{_hid:50}},[t._v("¥"+t._s(t.detail.need_price),51)]),i("view",{staticClass:"bb-detailed",attrs:{_hid:52},on:{click:t.showDetailedDialog}},[i("text",{attrs:{_hid:53}},[]),i("text",{staticClass:"iconfont icon-icon_arrowdown1",attrs:{_hid:55}})])]),i("view",{staticClass:"bb-rt",attrs:{_hid:56},on:{click:t.showPaymentDialog}},[t._v("结算("+t._s(t.num)+")",57)])]),t._ri(!!t.showAddressFlag,58)?i("view",{staticClass:"mask",attrs:{_hid:58}},[i("view",{staticClass:"dialog-address",attrs:{_hid:59}},[i("view",{staticClass:"d-header",attrs:{_hid:60}},[i("text",{staticStyle:{flex:"1"},attrs:{_hid:61}},[]),i("text",{staticClass:"iconfont icon-btn_close_black",staticStyle:{"padding-left":"15px"},attrs:{_hid:63},on:{click:t.hideAddressListListener}})]),i("addressView",{attrs:{list:t.list,_hid:64,_batrs:"list",_cid:0},on:{selectEvent:t.selectAddrListener,deleteEvent:t.deleteCallBack}})],1)]):t._e(),i("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:1066,_batrs:"img",_cid:1}}),i("ToastView",{attrs:{_hid:2068,_cid:2}}),t._ri(!!t.paymentFlag,3070)?i("view",{staticClass:"mask",attrs:{_hid:3070}},[i("view",{staticClass:"dialog-detailed",attrs:{_hid:3071}},[i("view",{staticClass:"dd-header",attrs:{_hid:3072}},[i("text",{staticClass:"h-tit",attrs:{_hid:3073}},[]),i("text",{staticClass:"h-close iconfont icon-btn_close_black",attrs:{_hid:3075},on:{click:t.hidePaymentDialog}})]),i("view",{staticClass:"dd-payment",attrs:{_hid:3076}},[i("view",{staticClass:"item-payment",attrs:{"data-type":"weixin",_hid:3077},on:{click:t.paymentListener}},[t._m(0),i("text",{staticClass:"p-radio iconfont",class:"weixin"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("weixin"==t.pay_type?"#3A96E6":"#EDEDED"),attrs:{_hid:3082}})]),i("view",{staticClass:"item-payment",attrs:{"data-type":"ali",_hid:3083},on:{click:t.paymentListener}},[t._m(1),i("text",{staticClass:"p-radio iconfont",class:"ali"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("ali"==t.pay_type?"#3A96E6":"#EDEDED"),attrs:{_hid:3088}})])])])]):t._e(),t._ri(!!t.detailedFlag,3089)?i("view",{staticClass:"mask",attrs:{_hid:3089}},[i("view",{staticClass:"dialog-detailed",attrs:{_hid:3090}},[i("view",{staticClass:"dd-header",attrs:{_hid:3091}},[i("text",{staticClass:"h-tit",attrs:{_hid:3092}},[]),i("text",{staticClass:"h-close iconfont icon-btn_close_black",attrs:{_hid:3094},on:{click:t.hideDetailedDialog}})]),i("view",{staticClass:"dd-cont",attrs:{_hid:3095}},[t._l(t.detailedList,function(s,e,a){var d=void 0!==a?a:e;return i("view",{key:e,staticClass:"item-dcont",attrs:{_hid:3096,_fid:d,_fk:"i"}},[i("view",{staticClass:"d-name",attrs:{_hid:3097,_fid:d}},[t._v(t._s(s.goods_name),3098,d)]),i("view",{staticClass:"d-detail",attrs:{_hid:3099,_fid:d}},[i("view",{staticClass:"lt",attrs:{_hid:3100,_fid:d}},[i("text",{attrs:{_hid:3101,_fid:d}},[t._v("¥"+t._s(s.shop_price)+" x "+t._s(t.num),3102,d)]),t._ri(!!s.zhe,3103,void 0!==a?a:e)?i("text",{staticClass:"zhe",attrs:{_hid:3103,_fid:d}},[t._v(t._s(s.zhe)+"折",3104,d)]):t._e()]),i("view",{staticClass:"rt",attrs:{_hid:3105,_fid:d}},[t._v("¥"+t._s(s.zhe?s.dPrice/100:s.shop_price*t.num),3106,d)])])])},3096,t._self),i("view",{staticClass:"item-detail",attrs:{_hid:3107}},[i("view",{staticClass:"d-lt",attrs:{_hid:3108}},[]),i("view",{staticClass:"d-rt",attrs:{_hid:3110}},[t._v("¥"+t._s(t.detail.freight),3111)])]),i("view",{staticClass:"item-detail",attrs:{_hid:3112}},[i("view",{staticClass:"d-lt",attrs:{_hid:3113}},[]),i("view",{staticClass:"d-rt",staticStyle:{color:"#ED3005"},attrs:{_hid:3115}},[i("text",{attrs:{_hid:3116}},[]),i("text",{attrs:{_hid:3118}},[t._v(t._s(t.detail.total_price),3119)])])])],1)])]):t._e()],1)},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("view",{staticClass:"p-lt",attrs:{_hid:3078}},[i("text",{staticClass:"iconfont icon-icon_pay_wepay",staticStyle:{"font-size":"30px",color:"#41B035"},attrs:{_hid:3079}}),i("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"},attrs:{_hid:3080}},[])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("view",{staticClass:"p-lt",attrs:{_hid:3084}},[i("text",{staticClass:"iconfont icon-icon_pay_alipay",staticStyle:{"font-size":"30px",color:"#00AAEE"},attrs:{_hid:3085}}),i("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"},attrs:{_hid:3086}},[])])}];i.d(s,"a",function(){return e}),i.d(s,"b",function(){return a})}},[["11c3","common/runtime","common/vendor"]]]);