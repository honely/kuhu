(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/bargain/buy"],{"3df8":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{userid:0,bargain_item_id:"",detail:"",use_money:0,pay_type:"",paymentFlag:!1,payOrderId:"",imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(e){var i=this,a=t.getStorageSync("user_id");void 0!=a&&""!=a&&(i.$data.userid=a),void 0!=e.pid&&""!=e.pid&&t.setStorageSync("pid",e.pid),i.wxb.addPage(this),i.wxb.Init(e,function(t){e.bargain_item_id&&(i.$data.bargain_item_id=e.bargain_item_id,i.checkOrderPayPrice())})},onUnload:function(){this.wxb.removePage()},onShow:function(){setTimeout(function(){var e=this.$data.payOrderId;e&&t.redirectTo({url:"../../mine/order/detail?order_id="+e})},1e3)},methods:{checkOrderPayPrice:function(){var t=this;t.wxb.Post("/shop/api.bargain/getPrice",{bargain_item_id:t.$data.bargain_item_id},function(e){t.$data.detail=e})},showPaymentDialog:function(t){"h5"==this.wxb.device?this.$data.paymentFlag=!0:this.sureBuyListener()},hidePaymentDialog:function(t){this.$data.paymentFlag=!1},paymentListener:function(t){var e=t.currentTarget.dataset.type;void 0!=e&&(this.$data.pay_type=e,this.sureBuyListener()),this.hidePaymentDialog()},onUseMoneyListener:function(){0==this.$data.use_money?this.$data.use_money=1:this.$data.use_money=0},sureBuyListener:function(e){var i=this;i.wxb.Post("/shop/api.bargain/createOrder",{use_money:i.$data.use_money,bargain_item_id:i.$data.bargain_item_id,pay_type:"h5"==i.wxb.device?i.$data.pay_type:""},function(e){if(0==e.is_pay)t.redirectTo();else if("h5"==i.wxb.device)if(i.$data.payOrderId=e.order_id,"weixin"==i.$data.pay_type)console.log("h5端支付跳转超链接"),window.location.href=e.order_info;else{var a=window.document.createElement("div");a.innerHTML=e.order_info,window.document.body.appendChild(a),window.document.forms.alipaysubmit.submit()}else i.wxb.paymentOrder(e,function(i){console.log(e);var a=e.order_id;t.redirectTo({url:"../../mine/order/detail?order_id="+a})})})}}};e.default=i}).call(this,i("543d")["default"])},5380:function(t,e,i){"use strict";var a=i("76f9"),s=i.n(a);s.a},"5bcb":function(t,e,i){"use strict";i.r(e);var a=i("b520"),s=i("96a3");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i("5380");var o=i("2877"),r=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,null,null);e["default"]=r.exports},"76f9":function(t,e,i){},"96a3":function(t,e,i){"use strict";i.r(e);var a=i("3df8"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a},b520:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"buy-box"},[t.detail?i("view",[i("view",{staticStyle:{position:"absolute",top:"0",bottom:"60px",left:"0",right:"0",overflow:"scroll"}},[i("view",{staticClass:"addr-box"},[i("view",{staticClass:"show-addr"},[i("view",{staticClass:"lt-addr"},[i("view",{staticClass:"t-info"},[i("text",[t._v(t._s(t.detail.name))]),i("text",[t._v(t._s(t.detail.mobile))])]),i("view",{staticClass:"b-info"},[t._v(t._s(t.detail.address))])])])]),i("view",{staticClass:"item-goods",staticStyle:{"'margin-top":"12px"}},[i("image",{staticClass:"g-img",attrs:{src:t.detail.photo}}),i("view",{staticClass:"g-cont"},[i("view",{staticClass:"gc-name ellipsis-1"},[t._v(t._s(t.detail.goods_name))]),i("view",{staticClass:"gc-sku"},[i("view",{staticClass:"sku-cont ellipsis-02"},[t._v(t._s(t.detail.key_name))]),i("text",[t._v("x1")])]),i("view",{staticClass:"gc-price"},[i("text",{staticClass:"g-price"},[t._v("¥"+t._s(t.detail.shop_price))])])])]),i("view",{staticClass:"order-info"},[i("view",{staticClass:"item-order"},[i("view",{staticClass:"o-lt"},[t._v("商品总额")]),i("view",{staticClass:"o-rt"},[t._v(t._s(t.detail.bargain_price))])]),i("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"}},[i("view",{staticClass:"o-lt"},[t._v("运费")]),i("view",{staticClass:"o-rt"},[i("text",[t._v("¥"+t._s(t.detail.shipping_price))])])])]),i("view",{staticClass:"order-info"},[i("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"}},[i("view",{staticClass:"o-lt"},[t._v("是否使用余额支付")]),i("view",{staticClass:"o-rt"},[i("text",{staticClass:"iconfont icon-radio",class:1==t.use_money?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==t.use_money?"#ED3005":"#999999")+";",attrs:{eventid:"6b4fe4e8-0"},on:{click:t.onUseMoneyListener}})])])])]),i("view",{staticClass:"bottom-box"},[i("view",{staticClass:"bb-lt"},[i("text",{staticClass:"bb-price"},[t._v("¥"+t._s(t.detail.shipping_price+t.detail.bargain_price))])]),i("view",{staticClass:"bb-rt",attrs:{eventid:"6b4fe4e8-1"},on:{click:t.showPaymentDialog}},[t._v("结算(1)")])])]):t._e(),i("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",mpcomid:"6b4fe4e8-0"}}),i("ToastView",{attrs:{mpcomid:"6b4fe4e8-1"}}),t.paymentFlag?i("view",{staticClass:"mask"},[i("view",{staticClass:"dialog-detailed"},[i("view",{staticClass:"dd-header"},[i("text",{staticClass:"h-tit"},[t._v("选择支付方式")]),i("text",{staticClass:"h-close iconfont icon-btn_close_black",attrs:{eventid:"6b4fe4e8-2"},on:{click:t.hidePaymentDialog}})]),i("view",{staticClass:"dd-payment"},[i("view",{staticClass:"item-payment",attrs:{"data-type":"weixin",eventid:"6b4fe4e8-3"},on:{click:t.paymentListener}},[t._m(0),i("text",{staticClass:"p-radio iconfont",class:"weixin"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("weixin"==t.pay_type?"#3A96E6":"#EDEDED")})]),i("view",{staticClass:"item-payment",attrs:{"data-type":"ali",eventid:"6b4fe4e8-4"},on:{click:t.paymentListener}},[t._m(1),i("text",{staticClass:"p-radio iconfont",class:"ali"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("ali"==t.pay_type?"#3A96E6":"#EDEDED")})])])])]):t._e()],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"p-lt"},[i("text",{staticClass:"iconfont icon-icon_pay_wepay",staticStyle:{"font-size":"30px",color:"#41B035"}}),i("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"}},[t._v("微信支付")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"p-lt"},[i("text",{staticClass:"iconfont icon-icon_pay_alipay",staticStyle:{"font-size":"30px",color:"#00AAEE"}}),i("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"}},[t._v("支付宝支付")])])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},ba8e:function(t,e,i){"use strict";i("2346");var a=n(i("b0ce")),s=n(i("5bcb"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))}},[["ba8e","common/runtime","common/vendor"]]]);