(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cef35"],{6247:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("TopNav",{attrs:{title:"编辑折扣"}}),o("div",{staticClass:"wyu-main"},[o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wyu-block"},[t._m(0),o("el-form",{ref:"goodsInfo",attrs:{model:t.goodsDetail,size:"mini","label-width":"100px"}},[o("div",{staticClass:"wyu-title"},[o("h2",[t._v("选择产品")])]),o("el-form-item",{attrs:{label:"选择产品"}},[o("product-select",{attrs:{prom_type:0},on:{selGoods:t.getGoods}})],1),o("el-table",{staticStyle:{width:"60%"},attrs:{size:"mini",data:t.selGoods,"row-key":"key",height:"250",border:""}},[o("el-table-column",{attrs:{label:"商品ID",prop:"goods_id"}}),o("el-table-column",{attrs:{label:"商品名称",prop:"goods_name"}}),o("el-table-column",{attrs:{label:"价格",prop:"shop_price",width:"100"}}),o("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{attrs:{href:"javascript:void(0);"},on:{click:function(o){return t.remove(e)}}},[t._v("移除")])]}}])})],1),o("div",{staticClass:"wyu-title"},[o("h2",[t._v("基本信息")])]),o("el-form-item",{attrs:{label:"折扣活动名称"}},[o("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.name,callback:function(e){t.$set(t.goodsDetail,"name",e)},expression:"goodsDetail.name"}})],1),o("el-form-item",{attrs:{label:"活动封面图片"}},[o("wyu-upload",{attrs:{img:t.goodsDetail.prom_img},model:{value:t.goodsDetail.prom_img,callback:function(e){t.$set(t.goodsDetail,"prom_img",e)},expression:"goodsDetail.prom_img"}}),o("p",{staticClass:"tit"},[t._v(" 建议尺寸750px*396px或等比缩放")])],1),o("el-form-item",{attrs:{label:"折扣"}},[o("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.discount,callback:function(e){t.$set(t.goodsDetail,"discount",e)},expression:"goodsDetail.discount"}})],1),o("el-form-item",{attrs:{label:"PLUS会员折扣"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.goodsDetail.is_vip,callback:function(e){t.$set(t.goodsDetail,"is_vip",e)},expression:"goodsDetail.is_vip"}})],1),o("el-form-item",{attrs:{label:"PLUS会员折扣"}},[o("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.vip_discount,callback:function(e){t.$set(t.goodsDetail,"vip_discount",e)},expression:"goodsDetail.vip_discount"}})],1),o("el-form-item",{attrs:{label:"折扣开始时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",align:"right"},model:{value:t.goodsDetail.start_time,callback:function(e){t.$set(t.goodsDetail,"start_time",e)},expression:"goodsDetail.start_time"}})],1),o("el-form-item",{attrs:{label:"折扣结束时间"}},[o("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",align:"right"},model:{value:t.goodsDetail.end_time,callback:function(e){t.$set(t.goodsDetail,"end_time",e)},expression:"goodsDetail.end_time"}})],1),o("el-form-item",{attrs:{label:"排序"}},[o("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.orderby,callback:function(e){t.$set(t.goodsDetail,"orderby",e)},expression:"goodsDetail.orderby"}})],1),o("el-form-item",{attrs:{label:"是否开启"}},[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.goodsDetail.is_online,callback:function(e){t.$set(t.goodsDetail,"is_online",e)},expression:"goodsDetail.is_online"}})],1),o("div",{staticClass:"wyu-title"},[o("h2",[t._v("SEO设置")])]),o("el-form-item",{attrs:{label:"百度SEO标题","label-width":"120px"}},[o("el-input",{staticStyle:{width:"500px"},attrs:{autocomplete:"off"},model:{value:t.goodsDetail.seo.title,callback:function(e){t.$set(t.goodsDetail.seo,"title",e)},expression:"goodsDetail.seo.title"}})],1),o("el-form-item",{attrs:{label:"百度SEO描述","label-width":"120px"}},[o("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},autocomplete:"off",placeholder:"请输入内容"},model:{value:t.goodsDetail.seo.keywords,callback:function(e){t.$set(t.goodsDetail.seo,"keywords",e)},expression:"goodsDetail.seo.keywords"}})],1),o("el-form-item",{attrs:{label:"百度SEO关键词","label-width":"120px"}},[o("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},autocomplete:"off",placeholder:"请输入内容"},model:{value:t.goodsDetail.seo.description,callback:function(e){t.$set(t.goodsDetail.seo,"description",e)},expression:"goodsDetail.seo.description"}})],1),o("el-form-item",{attrs:{label:"百度SEO原始发布时间","label-width":"120px"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.goodsDetail.seo.releaseDate,callback:function(e){t.$set(t.goodsDetail.seo,"releaseDate",e)},expression:"goodsDetail.seo.releaseDate"}})],1),o("el-form-item",{attrs:{label:"百度封面图片","label-width":"120px"}},[o("img-uploads",{attrs:{multi:!0,img:t.goodsDetail.seo.image},model:{value:t.goodsDetail.seo.image,callback:function(e){t.$set(t.goodsDetail.seo,"image",e)},expression:"goodsDetail.seo.image"}}),o("p",{staticClass:"tit"},[t._v(" 用于信息流投放后的封面显示，最多3张，单图片最大2M；封面图建议尺寸：高>=210px 宽>=375px;最小尺寸: 高>=146px 宽>=218px")])],1)],1)],1)]),o("div",{staticClass:"wyu-btn-div"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.editGoods()}}},[t._v("保存折扣")]),o("router-link",{staticStyle:{"margin-left":"10px"},attrs:{to:"/marketing/discount/index"}},[o("el-button",{attrs:{size:"small"}},[t._v("取消")])],1)],1)],1)},s=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wyu-tips wyu-tips-info",staticStyle:{"margin-bottom":"10px"}},[o("p",{staticClass:"tit"},[t._v("1)折扣产品包邮以 关联产品为准")])])}],a=(o("7f7f"),o("f499")),l=o.n(a),d=(o("ac6a"),o("5200")),n=o("d722"),r=o("ec72"),c=o("5fed"),u=o("9f3a"),p={name:"discountCreate",components:{ImgUploads:u["a"],ProductSelect:r["a"],TopNav:d["a"],WyuUpload:c["a"]},data:function(){return{selGoods:[],loading:!1,typeId:0,data:{},goodsIds:[],goodsGoods:{},selGoodsIds:[],goodsDetail:{discount_id:0,num:0,discount:0,is_vip:1,vip_discount:0,start_time:"",end_time:"",is_online:1,orderby:0,seo:{title:"",keywords:"",description:"",releaseDate:"",image:[]}}}},created:function(){this.getDetail()},methods:{getGoods:function(t){var e=this;t.forEach(function(t){e.selGoods.unshift(t)});var o=[];this.selGoods=this.selGoods.reduce(function(t,e){return!o[e.goods_id]&&(o[e.goods_id]=t.push(e)),t},[])},getSelectIds:function(){var t=[];return this.selGoods.forEach(function(e){t.push(e.goods_id)}),t},remove:function(t){this.selGoods.splice(t.$index,1)},getDetail:function(){var t=this;this.loading=!0,n["a"]("/shop/admin.marketing.discount/detail",{appToken:this.$store.getters.appToken,discount_id:this.$route.params.id}).then(function(e){t.loading=!1,t.goodsDetail=e.detail,t.selGoods=e.goods}).catch(function(e){t.loading=!1})},editGoods:function(){var t=this;this.loading=!0,console.log(),n["a"]("/shop/admin.marketing.discount/edit",{appToken:this.$store.getters.appToken,discount_id:this.$route.params.id,goods_ids:l()(this.getSelectIds()),name:this.goodsDetail.name,prom_img:this.goodsDetail.prom_img,discount:this.goodsDetail.discount,vip_discount:this.goodsDetail.vip_discount,start_time:this.goodsDetail.start_time,end_time:this.goodsDetail.end_time,is_online:this.goodsDetail.is_online,orderby:this.goodsDetail.orderby,is_vip:this.goodsDetail.is_vip,seo:l()(this.goodsDetail.seo)}).then(function(e){t.loading=!1,t.$message({message:"提交成功",type:"success"}),setTimeout(function(){t.$router.push("/marketing/discount/index")},1e3)}).catch(function(e){t.loading=!1})}}},m=p,g=o("2877"),f=Object(g["a"])(m,i,s,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0cef35.0da6aa30.js.map