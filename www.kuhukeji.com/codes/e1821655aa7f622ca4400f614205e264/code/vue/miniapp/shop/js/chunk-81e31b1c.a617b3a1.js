(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81e31b1c"],{"11e9":function(t,e,i){var s=i("52a7"),o=i("4630"),a=i("6821"),l=i("6a99"),n=i("69a8"),r=i("c69a"),c=Object.getOwnPropertyDescriptor;e.f=i("9e1e")?c:function(t,e){if(t=a(t),e=l(e,!0),r)try{return c(t,e)}catch(i){}if(n(t,e))return o(!s.f.call(t,e),t[e])}},"1b85":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-date-picker",{attrs:{type:"daterange","picker-options":t.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},on:{change:t.selectDate},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},o=[],a={name:"DateBetween",props:["date"],data:function(){return{pickerOptions2:{shortcuts:[{text:"最近七天",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近半个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-1296e6),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}}]},value:""}},methods:{selectDate:function(t){var e=0,i=0;t&&(e=t[0].getFullYear()+"-"+(t[0].getMonth()+1)+"-"+t[0].getDate(),i=t[1].getFullYear()+"-"+(t[1].getMonth()+1)+"-"+t[1].getDate()),this.$emit("input",[e,i])}}},l=a,n=i("2877"),r=Object(n["a"])(l,s,o,!1,null,"082e0500",null);e["a"]=r.exports},"2a33":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("TopNav",{attrs:{title:"编辑砍价"}}),i("div",{staticClass:"wyu-main"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wyu-block"},[t._m(0),i("el-form",{ref:"goodsInfo",attrs:{model:t.goodsDetail,size:"mini","label-width":"100px"}},[i("div",{staticClass:"wyu-title"},[i("h2",[t._v("选择产品")])]),i("el-form-item",{attrs:{label:"选择产品"}},[i("product-select-spec",{attrs:{prom_type:0,is_edit:0,goods_id:t.goods.goods_id},on:{selGoods:t.getGoods}})],1),t.goods?i("el-form-item",{attrs:{label:"产品名称 "}},[t._v("\n                    "+t._s(t.goods.goods_name)+"\n                ")]):t._e(),t.goods?i("el-form-item",{attrs:{label:"产品图片"}},[i("img",{attrs:{src:t.goods.photo,width:"100"}})]):t._e(),t.goods?i("el-form-item",{attrs:{label:"选择规格"}},[0==t.goods.sku_type?i("div",[t._v("\n                        价格："+t._s(t.goods.shop_price)+"\n                    ")]):t._e(),1==t.goods.sku_type?i("div",[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"mini",data:t.getGoodsData(),"row-key":"spec_key",height:"250",border:""},on:{"selection-change":t.seleSpec}},[i("el-table-column",{attrs:{"reserve-selection":!0,prop:"spec_key",type:"selection",width:"55"}}),i("el-table-column",{attrs:{prop:"key_name",label:"规格项"}}),i("el-table-column",{attrs:{prop:"shop_price",label:"价格"}}),i("el-table-column",{attrs:{prop:"goods_num",label:"库存"}})],1)],1):t._e()]):t._e(),i("div",{staticClass:"wyu-title"},[i("h2",[t._v("基本信息")])]),i("el-form-item",{attrs:{label:"初始价格"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.init_price,callback:function(e){t.$set(t.goodsDetail,"init_price",e)},expression:"goodsDetail.init_price"}}),i("p",{staticClass:"wyu-form-tips"},[t._v("砍价初始的价格")])],1),i("el-form-item",{attrs:{label:"砍价底价"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.bargain_price,callback:function(e){t.$set(t.goodsDetail,"bargain_price",e)},expression:"goodsDetail.bargain_price"}}),i("p",{staticClass:"wyu-form-tips"},[t._v("需要砍到多少才可以购买")])],1),i("el-form-item",{attrs:{label:"需要人数"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.need_num,callback:function(e){t.$set(t.goodsDetail,"need_num",e)},expression:"goodsDetail.need_num"}}),i("p",{staticClass:"wyu-form-tips"},[t._v("指定多少人数才能砍完 请合理设置 最大数（初始化价格 * 100/2） 即上下浮动 0.01 元 默认 50-100 人")])],1),i("el-form-item",{attrs:{label:"砍价有效期"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.end_time,callback:function(e){t.$set(t.goodsDetail,"end_time",e)},expression:"goodsDetail.end_time"}}),i("p",{staticClass:"wyu-form-tips"},[t._v("参与砍价后 多少小时后未砍到底价 即为砍价失败 单位（小时）")])],1),i("el-form-item",{attrs:{label:"排序"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.orderby,callback:function(e){t.$set(t.goodsDetail,"orderby",e)},expression:"goodsDetail.orderby"}}),i("p",{staticClass:"wyu-form-tips"},[t._v("砍价售出数量限制 不得大于原始库存 如原始 库存为 0 则此处 也为零")])],1),i("el-form-item",{attrs:{label:"已成功砍价人数"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.success_num,callback:function(e){t.$set(t.goodsDetail,"success_num",e)},expression:"goodsDetail.success_num"}}),i("p",{staticClass:"wyu-form-tips"},[t._v("已成功砍价人数")])],1),i("el-form-item",{attrs:{label:"是否开启"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.goodsDetail.is_online,callback:function(e){t.$set(t.goodsDetail,"is_online",e)},expression:"goodsDetail.is_online"}})],1),i("el-form-item",{attrs:{label:"VIP专属"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.goodsDetail.is_vip_more_bargain,callback:function(e){t.$set(t.goodsDetail,"is_vip_more_bargain",e)},expression:"goodsDetail.is_vip_more_bargain"}}),i("p",{staticClass:"wyu-form-tips"},[t._v("plus 会员可以多砍一刀 并且 帮砍用户 也是VIP 也同理 多砍一刀")])],1),i("div",{staticClass:"wyu-title"},[i("h2",[t._v("SEO设置")])]),i("el-form-item",{attrs:{label:"百度SEO标题","label-width":"120px"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{autocomplete:"off"},model:{value:t.goodsDetail.seo.title,callback:function(e){t.$set(t.goodsDetail.seo,"title",e)},expression:"goodsDetail.seo.title"}})],1),i("el-form-item",{attrs:{label:"百度SEO描述","label-width":"120px"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},autocomplete:"off",placeholder:"请输入内容"},model:{value:t.goodsDetail.seo.keywords,callback:function(e){t.$set(t.goodsDetail.seo,"keywords",e)},expression:"goodsDetail.seo.keywords"}})],1),i("el-form-item",{attrs:{label:"百度SEO关键词","label-width":"120px"}},[i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},autocomplete:"off",placeholder:"请输入内容"},model:{value:t.goodsDetail.seo.description,callback:function(e){t.$set(t.goodsDetail.seo,"description",e)},expression:"goodsDetail.seo.description"}})],1),i("el-form-item",{attrs:{label:"百度SEO原始发布时间","label-width":"120px"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.goodsDetail.seo.releaseDate,callback:function(e){t.$set(t.goodsDetail.seo,"releaseDate",e)},expression:"goodsDetail.seo.releaseDate"}})],1),i("el-form-item",{attrs:{label:"百度封面图片","label-width":"120px"}},[i("img-uploads",{attrs:{multi:!0,img:t.goodsDetail.seo.image},model:{value:t.goodsDetail.seo.image,callback:function(e){t.$set(t.goodsDetail.seo,"image",e)},expression:"goodsDetail.seo.image"}}),i("p",{staticClass:"tit"},[t._v(" 用于信息流投放后的封面显示，最多3张，单图片最大2M；封面图建议尺寸：高>=210px 宽>=375px;最小尺寸: 高>=146px 宽>=218px")])],1)],1)],1)]),i("div",{staticClass:"wyu-btn-div"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.editGoods()}}},[t._v("创建砍价")]),i("router-link",{staticStyle:{"margin-left":"10px"},attrs:{to:"/product/product/index"}},[i("el-button",{attrs:{size:"small"}},[t._v("取消")])],1)],1)],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wyu-tips wyu-tips-info",staticStyle:{"margin-bottom":"10px"}},[i("p",{staticClass:"tit"},[t._v("1)砍价产品包邮以 关联产品为准")]),i("p",{staticClass:"tit"},[t._v("2)砍价活动 一旦有人开启 则不可以关闭 与 修改 请仔细填写 停掉所有砍价后才可以 删除关闭修改 等操作")]),i("p",{staticClass:"tit"},[t._v("3)如果商品多个规格 在砍价时 统一为 初始价 ")])])}],a=i("f499"),l=i.n(a),n=(i("ac6a"),i("5200")),r=i("d722"),c=i("830c"),d=i("9f3a"),p={name:"BargainEdit",components:{ImgUploads:d["a"],ProductSelectSpec:c["a"],TopNav:n["a"]},data:function(){return{loading:!1,active:1,typeId:0,goods:{sku_type:0},goodsDetail:{goods_id:0,spec:[],num:0,bargain_price:0,init_price:0,is_online:1,end_time:0,orderby:0,is_vip_more_bargain:1,success_num:0,need_num:0,seo:{title:"",keywords:"",description:"",releaseDate:"",image:[]}},data:[]}},created:function(){this.getDetail(),this.$nextTick(function(){})},updated:function(){this.$refs.multipleTable&&this.setSpecCheck()},methods:{setSpecCheck:function(){var t=this,e=this.goodsDetail.spec;this.goods.goods_spec.forEach(function(i){i.goods_num>0&&e.indexOf(i.spec_key)>-1&&t.$refs.multipleTable.toggleRowSelection(i)})},getGoodsData:function(){var t=[];return this.goods.goods_spec.forEach(function(e){e.goods_num>0&&t.push(e)}),t},getDetail:function(){var t=this;this.loading=!0,r["a"]("/shop/admin.marketing.bargain/detail",{appToken:this.$store.getters.appToken,bargain_id:this.$route.params.id}).then(function(e){t.loading=!1,t.goodsDetail=e.detail,t.goods=e.goods}).catch(function(e){t.loading=!1})},getGoods:function(t){this.goods=t,void 0!=this.$refs.multipleTable&&(console.log(this.$refs.multipleTable),this.$refs.multipleTable.clearSelection()),this.goodsDetail.spec=t.goods_spec},seleSpec:function(t){var e=[];t.forEach(function(t){e.push(t.spec_key)}),this.goodsDetail.spec=e},editGoods:function(){var t=this;this.loading=!0,r["a"]("/shop/admin.marketing.bargain/edit",{appToken:this.$store.getters.appToken,bargain_id:this.$route.params.id,goods_id:this.goods.goods_id,spec:l()(this.goodsDetail.spec),num:this.goodsDetail.num,bargain_price:this.goodsDetail.bargain_price,init_price:this.goodsDetail.init_price,is_online:this.goodsDetail.is_online,end_time:this.goodsDetail.end_time,orderby:this.goodsDetail.orderby,is_vip_more_bargain:this.goodsDetail.is_vip_more_bargain,success_num:this.goodsDetail.success_num,need_num:this.goodsDetail.need_num,seo:l()(this.goodsDetail.seo)}).then(function(e){t.loading=!1,t.$message({message:"提交成功",type:"success"}),setTimeout(function(){t.$router.push("/marketing/bargain/index")},1e3)}).catch(function(e){t.loading=!1})}}},u=p,m=i("2877"),g=Object(m["a"])(u,s,o,!1,null,null,null);e["default"]=g.exports},"51e6":function(t,e,i){"use strict";var s=i("85d8"),o=i.n(s);o.a},"5dbc":function(t,e,i){var s=i("d3f4"),o=i("8b97").set;t.exports=function(t,e,i){var a,l=e.constructor;return l!==i&&"function"==typeof l&&(a=l.prototype)!==i.prototype&&s(a)&&o&&o(t,a),t}},"830c":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("选择商品")]),i("el-dialog",{attrs:{top:"10px",visible:t.dialogVisible,width:"1500px",title:"选择商品","modal-append-to-body":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wyu-block"},[i("div",{staticClass:"wyu-tips wyu-tips-info",staticStyle:{"margin-bottom":"10px"}},[i("p",{staticClass:"tit"},[t._v("注意：这里只展示未关联其他营销活动的产品")])]),i("el-form",{staticClass:"search-form",attrs:{size:"mini",inline:!0},model:{value:t.searchForm,callback:function(e){t.searchForm=e},expression:"searchForm"}},[i("el-form-item",{attrs:{label:"商品名称","label-width":"100"}},[i("el-input",{model:{value:t.searchForm.goods_name,callback:function(e){t.$set(t.searchForm,"goods_name",e)},expression:"searchForm.goods_name"}})],1),i("el-form-item",{attrs:{label:"商品编号","label-width":"100"},model:{value:t.searchForm.goods_sn,callback:function(e){t.$set(t.searchForm,"goods_sn",e)},expression:"searchForm.goods_sn"}},[i("el-input")],1),i("el-form-item",{attrs:{label:"商品分类","label-width":"100"}},[i("product-category",{attrs:{"no-add":!0,"p-cat-id":t.searchForm.p_cat_id,"cat-id":t.searchForm.cat_id},on:{selCat:t.selCat}})],1),i("el-form-item",{attrs:{label:"商品模型","label-width":"100"}},[i("select-type",{attrs:{"type-id":t.searchForm.type_id},model:{value:t.searchForm.type_id,callback:function(e){t.$set(t.searchForm,"type_id",e)},expression:"searchForm.type_id"}})],1),i("el-form-item",{attrs:{label:"扩展参数"}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm.is_free_shipping,callback:function(e){t.$set(t.searchForm,"is_free_shipping",e)},expression:"searchForm.is_free_shipping"}},[t._v("包邮")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm.is_plus_vip,callback:function(e){t.$set(t.searchForm,"is_plus_vip",e)},expression:"searchForm.is_plus_vip"}},[t._v("会员")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm.is_commission,callback:function(e){t.$set(t.searchForm,"is_commission",e)},expression:"searchForm.is_commission"}},[t._v("分佣")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm.is_hot,callback:function(e){t.$set(t.searchForm,"is_hot",e)},expression:"searchForm.is_hot"}},[t._v("热销")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm.is_new,callback:function(e){t.$set(t.searchForm,"is_new",e)},expression:"searchForm.is_new"}},[t._v("新品")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm.is_recommend,callback:function(e){t.$set(t.searchForm,"is_recommend",e)},expression:"searchForm.is_recommend"}},[t._v("推荐 | ")])],1),i("el-form-item",{attrs:{label:"添加日期"}},[i("date-between",{model:{value:t.searchForm.date,callback:function(e){t.$set(t.searchForm,"date",e)},expression:"searchForm.date"}})],1),i("el-form-item",[i("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:function(e){return t.getList(1)}}},[t._v("搜索")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.datas.list,size:"small"},on:{"selection-change":t.selectIds}},[1==t.multiple?i("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),i("el-table-column",{attrs:{width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.SelectGoods(e.row)}}},[t._v("选择")])]}}])}),i("el-table-column",{attrs:{prop:"goods_id",label:"编码/ID",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v("系统ID："),i("span",[t._v(t._s(e.row.goods_id))])]),i("p",[t._v("商品编码："),i("span",[t._v(t._s(e.row.goods_sn))])])]}}])}),i("el-table-column",{attrs:{label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"ellipsis-02"},[t._v("\n                                "+t._s(e.row.goods_name)+"\n                            ")])]}}])}),i("el-table-column",{attrs:{label:"缩略图",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{attrs:{width:"60",src:t.row.photo}})]}}])}),i("el-table-column",{attrs:{label:"商品价格",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v("市场价："),i("span",{staticStyle:{color:"red"}},[t._v("￥"+t._s(e.row.market_price))])]),i("p",[t._v("本店价："),i("span",{staticStyle:{color:"red"}},[t._v("￥"+t._s(e.row.shop_price))])])]}}])}),i("el-table-column",{attrs:{prop:"goods_sn",label:"模型/分类",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v("商品模型："),i("span",[t._v(t._s(e.row.type_id))])]),i("p",[t._v("商品分类："),i("span",{staticClass:"ellipsis-01"},[t._v(t._s(e.row.p_cat_id)+"--\x3e"+t._s(e.row.cat_id))])])]}}])}),i("el-table-column",{attrs:{prop:"goods_sn",label:"扩展信息",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-row",[i("el-col",{attrs:{span:8}},[1==e.row.is_free_shipping?i("el-tag",{attrs:{size:"mini"}},[t._v("包邮")]):t._e(),0==e.row.is_free_shipping?i("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("包邮")]):t._e()],1),i("el-col",{attrs:{span:8}},[1==e.row.is_plus_vip?i("el-tag",{attrs:{size:"mini"}},[t._v("会员")]):t._e(),0==e.row.is_plus_vip?i("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("会员")]):t._e()],1),i("el-col",{attrs:{span:8}},[1==e.row.is_commission?i("el-tag",{attrs:{size:"mini"}},[t._v("分佣")]):t._e(),0==e.row.is_commission?i("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("分佣")]):t._e()],1)],1),i("el-row",[i("el-col",{attrs:{span:8}},[1==e.row.is_hot?i("el-tag",{attrs:{size:"mini"}},[t._v("热销")]):t._e(),0==e.row.is_hot?i("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("热销")]):t._e()],1),i("el-col",{attrs:{span:8}},[1==e.row.is_new?i("el-tag",{attrs:{size:"mini"}},[t._v("新品")]):t._e(),0==e.row.is_new?i("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("新品")]):t._e()],1),i("el-col",{attrs:{span:8}},[1==e.row.is_recommend?i("el-tag",{attrs:{size:"mini"}},[t._v("推荐")]):t._e(),0==e.row.is_recommend?i("el-tag",{attrs:{type:"info",size:"mini"}},[t._v("推荐")]):t._e()],1)],1)]}}])}),i("el-table-column",{attrs:{prop:"goods_sn",label:"上/下架",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{value:e.row.is_online,"inactive-value":0,"active-value":1},on:{change:function(i){return t.setOnline(e.row)}}})]}}])})],1),i("div",{staticClass:"page"},[i("div",{staticClass:"page-tool"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.onlines(1)}}},[t._v("确认选择")])],1),i("div",{staticClass:"page-mian"},[i("el-pagination",{attrs:{"page-size":t.datas.limit,layout:"total, prev, pager, next",total:t.datas.count},on:{"current-change":t.getList}})],1)])],1)])],1)},o=[],a=(i("ac6a"),i("c5f6"),i("d722")),l=i("1b85"),n=i("0c7a"),r=i("981d"),c={name:"ProductSelectSpec",components:{SelectType:r["a"],ProductCategory:n["a"],DateBetween:l["a"]},props:{multiple:{type:Boolean,default:!1},prom_id:{type:Number,default:0},prom_type:{type:Number,default:0},goods_id:{type:Number,default:0},is_edit:{type:Number,default:0}},data:function(){return{dialogVisible:!1,loading:!1,datas:[],searchForm:this.initSearch(),goods_ids:[]}},created:function(){this.getList()},methods:{initSearch:function(){return{date:[],is_plus_vip:0,is_commission:0,is_free_shipping:0,is_recommend:0,is_new:0,is_hot:0,cat_id:0,p_cat_id:0,type_id:0,is_online:0,goods_name:"",goods_sn:"",prom_type:this.prom_type,goods_id:this.goods_id,is_edit:this.is_edit}},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0,a["a"]("/shop/admin.goods.goods/specIndex",{appToken:this.$store.getters.appToken,page:e,prom_type:this.prom_type,goods_id:this.goods_id,is_edit:this.is_edit,is_plus_vip:this.searchForm.is_plus_vip,is_commission:this.searchForm.is_commission,is_free_shipping:this.searchForm.is_free_shipping,is_recommend:this.searchForm.is_recommend,is_new:this.searchForm.is_new,is_hot:this.searchForm.is_hot,cat_id:this.searchForm.cat_id,p_cat_id:this.searchForm.p_cat_id,type_id:this.searchForm.type_id,is_online:2,end_add_time:this.searchForm.date[1]?this.searchForm.date[1]:0,bg_add_time:this.searchForm.date[0]?this.searchForm.date[0]:0,goods_name:"",goods_sn:""}).then(function(e){t.datas=e,t.loading=!1}).catch(function(e){t.loading=!1})},selCat:function(t){this.searchForm.cat_id=t.cat_id,this.searchForm.p_cat_id=t.p_cat_id},setOnline:function(t){var e=this;this.loading=!0,a["a"]("/shop/admin.goods.goods/online",{appToken:this.$store.getters.appToken,goods_id:t.goods_id}).then(function(t){e.loading=!1,e.getList()}).catch(function(t){e.loading=!1})},selectIds:function(t){var e=[];t.forEach(function(t){e.push(t.goods_id)}),this.goods_ids=e},SelectGoods:function(t){this.dialogVisible=!1,this.$emit("selGoods",t)},onlines:function(t){}}},d=c,p=i("2877"),u=Object(p["a"])(d,s,o,!1,null,null,null);e["a"]=u.exports},"85d8":function(t,e,i){},"8b97":function(t,e,i){var s=i("d3f4"),o=i("cb7c"),a=function(t,e){if(o(t),!s(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,s){try{s=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),s(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,i){return a(t,i),e?t.__proto__=i:s(t,i),t}}({},!1):void 0),check:a}},9093:function(t,e,i){var s=i("ce10"),o=i("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,o)}},"981d":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.typeLoading,expression:"typeLoading"}],staticStyle:{width:"100%"},attrs:{disabled:!0===t.disabled,size:t.size,value:t.typeId,placeholder:"请选择"},on:{input:t.setTypeId}},t._l(t.types,function(t){return i("el-option",{key:t.type_id,attrs:{label:t.name,value:t.type_id}})}),1)],1)},o=[],a=i("d722"),l={name:"SelectType",props:["size","typeId","disabled"],data:function(){return{typeLoading:!0,types:[]}},created:function(){this.getTypeList()},methods:{setTypeId:function(t){this.$emit("input",t)},getTypeList:function(){var t=this;this.typeLoading=!0,a["a"]("/shop/admin.goodstype/index",{appToken:this.$store.getters.appToken}).then(function(e){t.typeLoading=!1,t.types=e.list,t.types.unshift({type_id:0,name:"全部模型"})}).catch(function(e){t.typeLoading=!1})}}},n=l,r=i("2877"),c=Object(r["a"])(n,s,o,!1,null,"bfc729f4",null);e["a"]=c.exports},"9f3a":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wyu-img-uploads"},[t.multi?t._e():i("div",{staticClass:"wyu-img-one"},[i("div",{staticClass:"wyu-upload-div",style:"width:"+t.myW+"px;line-height:"+t.myL+"px; height:"+t.myH+"px;"},[""==t.showImg?i("div",{staticClass:"image-box",on:{click:t.uploadFile}},[i("i",{staticClass:"el-icon-plus"})]):t._e(),""!=t.showImg?i("div",{staticClass:"image-box",style:"background-image: url("+t.showImg+");",on:{click:t.uploadFile}}):t._e(),""!=t.showImg?i("i",{staticClass:"el-icon-error",on:{click:t.deleteImg}}):t._e()])]),t.multi?i("div",{staticClass:"wyu-img-list"},[t._l(t.showImgs,function(e,s){return i("div",{key:s,staticClass:"wyu-upload-div",style:"width:"+t.myW+"px;line-height:"+t.myL+"px; height:"+t.myH+"px;"},[i("div",{staticClass:"image-box",style:"background-image: url("+e+");"}),i("i",{staticClass:"el-icon-error",on:{click:function(e){return t.deleteImg(s)}}})])}),i("div",{staticClass:"wyu-upload-div",style:"width:"+t.myW+"px;line-height:"+t.myL+"px; height:"+t.myH+"px;",on:{click:t.uploadFile}},[i("i",{staticClass:"el-icon-plus"})])],2):t._e(),i("el-dialog",{attrs:{title:"图片相册",visible:t.dialogVisible,"modal-append-to-body":!1,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[0==t.showTab?i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"photo-upload-tab"},[i("div",{staticClass:"photo-upload-btn"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.showTab=1}}},[t._v("上传图片")])],1),i("div",{staticClass:"photo-main"},[i("div",{staticClass:"photo-group"},[i("ul",t._l(t.groups,function(e,s){return i("li",{key:s,class:e.id==t.cid?"on":"",on:{click:function(i){return t.clickCategory(e.id)}}},[t._v(t._s(e.name))])}),0)]),t.multi?i("div",{staticClass:"photo-list"},t._l(t.photos,function(e,s){return i("div",{key:s,class:!1!==t.isInArray(e.photo)?"item on":"item",on:{click:function(i){return t.setSelectImgs(e.photo)}}},[i("div",{staticClass:"image-box",style:"background-image: url("+e.photo+");"}),i("label",[i("i",{staticClass:"el-icon-upload-success el-icon-check"})])])}),0):t._e(),t.multi?t._e():i("div",{staticClass:"photo-list"},t._l(t.photos,function(e,s){return i("div",{key:s,class:t.selectImg==e.photo?"item on":"item",on:{click:function(i){t.selectImg=e.photo}}},[i("div",{staticClass:"image-box",style:"background-image: url("+e.photo+");"}),t.selectImg==e.photo?i("label",[i("i",{staticClass:"el-icon-upload-success el-icon-check"})]):t._e()])}),0)]),i("div",{staticStyle:{height:"40px"}},[i("div",{staticClass:"pagegroup"},[i("el-pagination",{attrs:{"page-size":t.limit,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)]),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.selectPhoto()}}},[t._v("确定选取")]),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.clearSelect()}}},[t._v("取消选择")])],1)]):t._e(),1==t.showTab?i("div",{staticClass:"photo-upload-tab"},[i("el-form",{ref:"form",attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"选择分组"}},[i("el-select",{staticStyle:{float:"left"},attrs:{size:"small",placeholder:"请选择分组"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groups,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t.groups.length<16?i("create-resource-category",{on:{addYes:t.getCategoryByAdd}}):t._e()],1),i("el-form-item",{attrs:{label:"上传图片"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadImgUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),i("p",[t._v("只能上传JPG或者PNG的图片")])],1)],1),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",disabled:!t.imageUrl},on:{click:function(e){return t.selectPhotoByAdd()}}},[t._v("确定选取")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.showTab=0}}},[t._v("返回列表")])],1)],1):t._e()])],1)},o=[],a=i("f499"),l=i.n(a),n=i("e338"),r=i("d722"),c={name:"imgUploads",props:["multi","img","w","h"],components:{createResourceCategory:n["a"]},data:function(){return{myW:this.w?this.w:120,myH:this.h?this.h:120,myL:this.h?this.h-4:116,uploadImgUrl:"",showImg:"",showImgs:[],imageUrl:"",dialogVisible:!1,selectImg:"",selectImgs:[],showTab:0,groupId:0,cid:0,groups:[],page:1,loading:!1,total:0,limit:12,photos:[]}},watch:{img:function(t){1==this.multi?""!=this.img&&this.img!=this.showImgs&&(this.showImgs=this.img):this.showImg=this.img},showImg:function(t){t!=this.img&&this.$emit("input",t)},showImgs:function(t){t!=this.img&&this.$emit("input",t)},groupId:function(t){var e="";e="/",this.uploadImgUrl=e+"shop/admin.upload/imageUpload?appToken="+encodeURIComponent(this.$store.getters.appToken)+"&groupId="+t}},created:function(){1==this.multi?""!=this.img&&this.img!=this.showImgs&&(this.showImgs=this.img):this.showImg=this.img;var t="";t="/",this.uploadImgUrl=t+"shop/admin.upload/imageUpload?appToken="+encodeURIComponent(this.$store.getters.appToken)},methods:{setSelectImgs:function(t){var e=this.isInArray(t);!1!==e?this.selectImgs.splice(e,1):this.selectImgs.push(t)},isInArray:function(t){for(var e=0;e<this.selectImgs.length;e++)if(t==this.selectImgs[e])return e;return!1},selectPhotoByAdd:function(){1==this.multi?this.showImgs.push(this.imageUrl):this.showImg=this.imageUrl,this.imageUrl="",this.dialogVisible=!1},selectPhoto:function(){if(1==this.multi){var t=JSON.parse(l()(this.showImgs));for(var e in this.selectImgs)t.push(this.selectImgs[e]);this.showImgs=t,this.selectImgs=[]}else this.showImg=this.selectImg,this.selectImg="";this.dialogVisible=!1},clearSelect:function(){this.selectImg="",this.selectImgs=[]},clickCategory:function(t){this.cid=t,this.page=1,this.count=0,this.getPhotos()},handleCurrentChange:function(t){this.page=t,this.getPhotos()},getPhotos:function(){var t=this;this.loading=!0,r["a"]("shop/admin.resource.resource/index",{appToken:this.$store.getters.appToken,category_id:this.cid,limit:this.limit,page:this.page}).then(function(e){t.photos=e.list,t.total=e.count,t.loading=!1}).catch(function(e){t.loading=!1})},getCategoryByAdd:function(t){this.apiGetCategory(t)},getCategory:function(){this.apiGetCategory()},apiGetCategory:function(t){var e=this,i=[{name:"全部图片",id:0}];r["a"]("shop/admin.resource.category/index",{appToken:this.$store.getters.appToken}).then(function(s){for(var o in s.list)i.push({name:s.list[o].title,id:s.list[o].category_id});e.groups=i,t&&(e.groupId=t)}).catch(function(t){})},uploadFile:function(){this.getCategory(),this.getPhotos(),this.dialogVisible=!0},deleteImg:function(t){1==this.multi?this.showImgs.splice(t,1):this.showImg=""},handleAvatarSuccess:function(t,e){this.imageUrl=t.data.img_url,this.page=1,this.cid=0,this.getPhotos()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e}}},d=c,p=(i("51e6"),i("2877")),u=Object(p["a"])(d,s,o,!1,null,null,null);e["a"]=u.exports},aa77:function(t,e,i){var s=i("5ca1"),o=i("be13"),a=i("79e5"),l=i("fdef"),n="["+l+"]",r="​",c=RegExp("^"+n+n+"*"),d=RegExp(n+n+"*$"),p=function(t,e,i){var o={},n=a(function(){return!!l[t]()||r[t]()!=r}),c=o[t]=n?e(u):l[t];i&&(o[i]=c),s(s.P+s.F*n,"String",o)},u=p.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=p},ac6a:function(t,e,i){for(var s=i("cadf"),o=i("0d58"),a=i("2aba"),l=i("7726"),n=i("32e9"),r=i("84f2"),c=i("2b4c"),d=c("iterator"),p=c("toStringTag"),u=r.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=o(m),h=0;h<g.length;h++){var _,f=g[h],v=m[f],b=l[f],y=b&&b.prototype;if(y&&(y[d]||n(y,d,u),y[p]||n(y,p,f),r[f]=u,v))for(_ in s)y[_]||a(y,_,s[_],!0)}},c5f6:function(t,e,i){"use strict";var s=i("7726"),o=i("69a8"),a=i("2d95"),l=i("5dbc"),n=i("6a99"),r=i("79e5"),c=i("9093").f,d=i("11e9").f,p=i("86cc").f,u=i("aa77").trim,m="Number",g=s[m],h=g,_=g.prototype,f=a(i("2aeb")(_))==m,v="trim"in String.prototype,b=function(t){var e=n(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():u(e,3);var i,s,o,a=e.charCodeAt(0);if(43===a||45===a){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:s=2,o=49;break;case 79:case 111:s=8,o=55;break;default:return+e}for(var l,r=e.slice(2),c=0,d=r.length;c<d;c++)if(l=r.charCodeAt(c),l<48||l>o)return NaN;return parseInt(r,s)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof g&&(f?r(function(){_.valueOf.call(i)}):a(i)!=m)?l(new h(b(e)),i,g):b(e)};for(var y,w=i("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)o(h,y=w[k])&&!o(g,y)&&p(g,y,d(h,y));g.prototype=_,_.constructor=g,i("2aba")(s,m,g)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-81e31b1c.a617b3a1.js.map