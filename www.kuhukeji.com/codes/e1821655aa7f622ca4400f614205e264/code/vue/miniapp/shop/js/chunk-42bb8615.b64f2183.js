(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42bb8615"],{"2a69":function(t,e,i){},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"3e5b":function(t,e,i){"use strict";var s=i("2a69"),a=i.n(s);a.a},"42e1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("TopNav",{attrs:{title:"库存价格"}}),i("div",{staticClass:"wyu-main"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wyu-block"},[i("el-form",{ref:"goodsprice",attrs:{rules:t.rules,model:t.goodsDetail,size:"mini","label-width":"100px"}},[i("div",{staticClass:"wyu-tips wyu-tips-warning"},[i("p",[t._v(" 1、 开启会员优惠 则必须填写会员优惠价格，则表示没有会员优惠")]),i("p",[t._v(" 2、 商品属性 填写则展示 不填写则不展示 ，商品模型 与 是否有规格 不可修改 请认证填写信息")]),i("p",[t._v(" 3、 开启分佣 则必须填写 分佣价格，关闭分佣 则视为 不参与分佣商品")]),i("p",[t._v(" 4、 规格与商品模型 不可修改")])]),i("div",{staticClass:"wyu-title"},[i("h2",[t._v("价格&属性")])]),i("el-form-item",{attrs:{label:"商品模型"}},[i("select-type",{staticStyle:{width:"300px"},attrs:{disabled:!0,"type-id":t.goodsDetail.type_id,size:"mini"},model:{value:t.goodsDetail.type_id,callback:function(e){t.$set(t.goodsDetail,"type_id",e)},expression:"goodsDetail.type_id"}})],1),i("el-form-item",{attrs:{label:"会员专享"}},[i("el-radio-group",{attrs:{size:"mini"},model:{value:t.goodsDetail.is_plus_vip,callback:function(e){t.$set(t.goodsDetail,"is_plus_vip",e)},expression:"goodsDetail.is_plus_vip"}},[i("el-radio",{attrs:{label:0}},[t._v("会员无专享")]),i("el-radio",{attrs:{label:1}},[t._v("会员有专享")])],1)],1),i("el-form-item",{attrs:{label:"规格"}},[i("el-radio-group",{attrs:{disabled:!0,size:"mini"},model:{value:t.goodsDetail.sku_type,callback:function(e){t.$set(t.goodsDetail,"sku_type",e)},expression:"goodsDetail.sku_type"}},[i("el-radio",{attrs:{label:0}},[t._v("无规格")]),i("el-radio",{attrs:{label:1}},[t._v("多规格")])],1)],1),i("el-form-item",{attrs:{label:"参与分佣"}},[i("el-radio-group",{attrs:{size:"mini"},model:{value:t.goodsDetail.is_commission,callback:function(e){t.$set(t.goodsDetail,"is_commission",e)},expression:"goodsDetail.is_commission"}},[i("el-radio",{attrs:{label:0}},[t._v("关闭分佣")]),i("el-radio",{attrs:{label:1}},[t._v("开启分佣")])],1)],1),i("el-form-item",{attrs:{label:"是否可用优惠券"}},[i("el-radio-group",{attrs:{size:"mini"},model:{value:t.goodsDetail.is_coupon,callback:function(e){t.$set(t.goodsDetail,"is_coupon",e)},expression:"goodsDetail.is_coupon"}},[i("el-radio",{attrs:{label:0}},[t._v("不可使用")]),i("el-radio",{attrs:{label:1}},[t._v("可以使用")])],1)],1),i("div",{staticClass:"wyu-title"},[i("h2",[t._v("商品属性")])]),i("el-form-item",{attrs:{"label-width":"10px"}},[i("goods-attr",{attrs:{"attr-data":t.goodsDetail.goods_attr,"type-id":t.goodsDetail.type_id},model:{value:t.goodsDetail.goods_attr,callback:function(e){t.$set(t.goodsDetail,"goods_attr",e)},expression:"goodsDetail.goods_attr"}})],1),i("div",{staticClass:"wyu-title"},[i("h2",[t._v("商品价格 "),i("span",{staticStyle:{"font-size":"10px"}},[t._v("（会员价格设置0员则表示没有会员优惠）")])])]),1==t.goodsDetail.sku_type?i("el-form-item",{attrs:{"label-width":"10px",prop:"checkGoodsPrice"}},[i("goods-spec",{attrs:{"spec-data":t.goodsDetail.goods_spec,"is-plus-vip":t.goodsDetail.is_plus_vip,"is-commission":t.goodsDetail.is_commission,"type-id":t.goodsDetail.type_id},model:{value:t.goodsDetail.goods_spec,callback:function(e){t.$set(t.goodsDetail,"goods_spec",e)},expression:"goodsDetail.goods_spec"}})],1):t._e(),0==t.goodsDetail.sku_type?i("div",[i("el-form-item",{attrs:{label:"市场价"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.market_price,callback:function(e){t.$set(t.goodsDetail,"market_price",e)},expression:"goodsDetail.market_price"}})],1),i("el-form-item",{attrs:{label:"本店价"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.shop_price,callback:function(e){t.$set(t.goodsDetail,"shop_price",e)},expression:"goodsDetail.shop_price"}})],1),1==t.goodsDetail.is_plus_vip?i("el-form-item",{attrs:{label:"会员价"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.plus_vip_price,callback:function(e){t.$set(t.goodsDetail,"plus_vip_price",e)},expression:"goodsDetail.plus_vip_price"}})],1):t._e(),i("el-form-item",{attrs:{label:"库存"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.goods_num,callback:function(e){t.$set(t.goodsDetail,"goods_num",e)},expression:"goodsDetail.goods_num"}})],1),1==t.goodsDetail.is_commission?i("el-form-item",{attrs:{label:"佣金"}},[i("el-input",{staticStyle:{width:"500px"},model:{value:t.goodsDetail.commission,callback:function(e){t.$set(t.goodsDetail,"commission",e)},expression:"goodsDetail.commission"}})],1):t._e()],1):t._e()],1)],1)]),i("div",{staticClass:"wyu-btn-div"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.createGoods()}}},[t._v("提交修改")]),i("router-link",{staticStyle:{"margin-left":"10px"},attrs:{to:"/product/product/index"}},[i("el-button",{attrs:{size:"small"}},[t._v("取消")])],1)],1)],1)},a=[],o=i("f499"),l=i.n(o),n=i("5200"),r=i("d722"),c=i("981d"),u=i("77be"),p=i("894d"),d={name:"GoodsCreate",components:{GoodsAttr:p["a"],GoodsSpec:u["a"],SelectType:c["a"],TopNav:n["a"]},data:function(){return{loading:!1,active:1,typeId:0,formNameKey:["goodsInfo","goodsprice","goodsArea"],goodsDetail:{cat_id:0,p_cat_id:0,goods_sn:"",goods_name:"",brand_id:0,store_count:0,comment_count:0,weight:0,market_price:0,shop_price:0,keywords:"",goods_content:[],photo:"",photos:[],is_online:1,is_free_shipping:1,sort:0,is_recommend:0,is_new:0,is_hot:0,give_integral:0,sales_sum:0,commission:0,shipping_area_ids:[],plus_vip_price:0,goods_attr:[],goods_spec:{},sku_type:1,type_id:0,is_plus_vip:0,is_commission:0,is_coupon:0},rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"}],goods_sn:[{required:!0,message:"请输入商品编号",trigger:"blur"},{min:1,max:64,message:"长度在 1 到 64 个字符",trigger:"blur"}],photo:[{required:!0,message:"请上传缩略图",trigger:"blur"}],photos:[{type:"array",required:!0,message:"至少上传一张相册",trigger:"blur"}],goods_content:[{type:"array",required:!0,message:"请编辑详情",trigger:"blur"}]}}},created:function(){this.getSpecPrice()},methods:{getSpecPrice:function(){var t=this;this.loading=!0,r["a"]("/shop/admin.goods.goods/getSpecDetail",{appToken:this.$store.getters.appToken,goods_id:this.$route.params.id}).then(function(e){t.goodsDetail=e.detail,t.loading=!1}).catch(function(){t.loading=!1})},checkGoodsType:function(){return this.goodsDetail.type_id>0},checkGoodsPrice:function(){var t=this;if(1==this.goodsDetail.sku_type){var e=!0;return this.goodsDetail.goods_spec.itemPrice.some(function(i){if(0==i.invalid){if(i.market_price<=0||i.store_count<=0||i.weight<=0)return e=!1,!1;if(1==t.goodsDetail.is_plus_vip&&i.plus_vip_price<=0)return e=!1,!1;if(1==t.goodsDetail.is_commission&&i.commission<=0)return e=!1,!1}}),e}return!(this.goodsDetail.market_price<=0||this.goodsDetail.store_count<=0||this.goodsDetail.weight<=0)&&(!(1==this.goodsDetail.is_plus_vip&&this.goodsDetail.plus_vip_price<=0)&&!(1==this.goodsDetail.is_commission&&this.goodsDetail.commission<=0))},createGoods:function(){var t=this;this.loading=!0,r["a"]("/shop/admin.goods.goods/setSpecDetail",{appToken:this.$store.getters.appToken,goods_id:this.$route.params.id,store_count:this.goodsDetail.store_count,weight:this.goodsDetail.weight,market_price:this.goodsDetail.market_price,shop_price:this.goodsDetail.shop_price,commission:this.goodsDetail.commission,plus_vip_price:this.goodsDetail.plus_vip_price,goods_attr:l()(this.goodsDetail.goods_attr),goods_spec:l()(this.goodsDetail.goods_spec),is_plus_vip:this.goodsDetail.is_plus_vip,is_commission:this.goodsDetail.is_commission,is_coupon:this.goodsDetail.is_coupon,goods_num:this.goodsDetail.goods_num}).then(function(e){t.loading=!1,t.$message({message:"提交成功",type:"success"})}).catch(function(e){t.loading=!1})}}},m=d,g=i("2877"),h=Object(g["a"])(m,s,a,!1,null,null,null);e["default"]=h.exports},5200:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wyu-top"},[s("div",{staticClass:"wyu-header"},[t.title?t._e():s("div",{staticClass:"wyu-tab"},[s("ul",t._l(t.showMenu,function(e,i){return s("li",{key:i,class:i==t.select?"on":""},[s("router-link",{attrs:{to:e.link}},[t._v(t._s(e.title))])],1)}),0)]),t.title?s("div",{staticClass:"wyu-tab"},[s("ul",[s("li",[t._v(t._s(t.title))])])]):t._e(),s("div",{staticClass:"wyu-header-status"},[s("div",{staticClass:"login-info"},[s("img",{attrs:{src:i("741c")}}),s("el-dropdown",{staticStyle:{cursor:"pointer"}},[s("span",{staticClass:"el-dropdown-link"},[t._v("\n                          "+t._s(t.$store.getters.appInfo.app_name)+"  "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("span",{on:{click:t.LogOut}},[t._v("退出登录")])])],1)],1)],1)])])])},a=[],o=(i("a481"),{props:["mdl","select","title"],name:"TopNav",data:function(){return{showMenu:[],menu:{sms:[{title:"发送短信",link:"/marketing/sms/send"},{title:"短信记录",link:"/marketing/sms/census"}],paymentSetting:[{title:"微信小程序支付设置",link:"/setting/payment/weixin"},{title:"支付宝小程序支付设置",link:"/setting/payment/ali"},{title:"百度小程序支付设置",link:"/setting/payment/baidu"}],employ:[{title:"员工管理",link:"/setting/employ"},{title:"角色管理",link:"/setting/employ/role"}],agent:[{title:"分销代理设置",link:"/agent/setting/index"},{title:"顾问申请设置",link:"/agent/setting/apply"}],coupon:[{title:"优惠券管理",link:"/marketing/coupon/index"},{title:"优惠券设置",link:"/marketing/coupon/setting"},{title:"赠送优惠券",link:"/marketing/coupon/send"}],sucai:[{title:"素材管理",link:"/resource/index"},{title:"素材分类 ",link:"/resource/category"}],wuliu:[{title:"运费模板",link:"/shipping/area/index/"},{title:"快递公司 ",link:"/shipping/index"}]}}},created:function(){this.menu[this.mdl]?this.showMenu=this.menu[this.mdl]:this.showMenu=[]},methods:{LogOut:function(){var t=this;this.$store.dispatch("LogOut").then(function(){t.$router.replace("/")})}}}),l=o,n=i("2877"),r=Object(n["a"])(l,s,a,!1,null,"5665e029",null);e["a"]=r.exports},"5d6b":function(t,e,i){var s=i("e53d").parseInt,a=i("a1ce").trim,o=i("e692"),l=/^[-+]?0[xX]/;t.exports=8!==s(o+"08")||22!==s(o+"0x16")?function(t,e){var i=a(String(t),3);return s(i,e>>>0||(l.test(i)?16:10))}:s},"5fed":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wyu-img-uploads"},[t.multi?t._e():i("div",{staticClass:"wyu-img-one"},[i("div",{staticClass:"wyu-upload-div",style:"width:"+t.myW+"px;line-height:"+t.myL+"px; height:"+t.myH+"px;"},[""==t.showImg?i("div",{staticClass:"image-box",on:{click:t.uploadFile}},[i("i",{staticClass:"el-icon-plus"})]):t._e(),""!=t.showImg?i("div",{staticClass:"image-box",style:"background-image: url("+t.showImg+");",on:{click:t.uploadFile}}):t._e(),""!=t.showImg?i("i",{staticClass:"el-icon-error",on:{click:t.deleteImg}}):t._e()])]),t.multi?i("div",{staticClass:"wyu-img-list"},[t._l(t.showImgs,function(e,s){return i("div",{key:s,staticClass:"wyu-upload-div",style:"width:"+t.myW+"px;line-height:"+t.myL+"px; height:"+t.myH+"px;"},[i("div",{staticClass:"image-box",style:"background-image: url("+e+");"}),i("i",{staticClass:"el-icon-error",on:{click:function(e){return t.deleteImg(s)}}})])}),i("div",{staticClass:"wyu-upload-div",style:"width:"+t.myW+"px;line-height:"+t.myL+"px; height:"+t.myH+"px;",on:{click:t.uploadFile}},[i("i",{staticClass:"el-icon-plus"})])],2):t._e(),i("el-dialog",{attrs:{title:"图片相册",visible:t.dialogVisible,"modal-append-to-body":!1,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[0==t.showTab?i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"photo-upload-tab"},[i("div",{staticClass:"photo-upload-btn"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.showTab=1}}},[t._v("上传图片")])],1),i("div",{staticClass:"photo-main"},[i("div",{staticClass:"photo-group"},[i("ul",t._l(t.groups,function(e,s){return i("li",{key:s,class:e.id==t.cid?"on":"",on:{click:function(i){return t.clickCategory(e.id)}}},[t._v(t._s(e.name))])}),0)]),t.multi?i("div",{staticClass:"photo-list"},t._l(t.photos,function(e,s){return i("div",{key:s,class:!1!==t.isInArray(e.photo)?"item on":"item",on:{click:function(i){return t.setSelectImgs(e.photo)}}},[i("div",{staticClass:"image-box",style:"background-image: url("+e.photo+");"}),i("label",[i("i",{staticClass:"el-icon-upload-success el-icon-check"})])])}),0):t._e(),t.multi?t._e():i("div",{staticClass:"photo-list"},t._l(t.photos,function(e,s){return i("div",{key:s,class:t.selectImg==e.photo?"item on":"item",on:{click:function(i){t.selectImg=e.photo}}},[i("div",{staticClass:"image-box",style:"background-image: url("+e.photo+");"}),t.selectImg==e.photo?i("label",[i("i",{staticClass:"el-icon-upload-success el-icon-check"})]):t._e()])}),0)]),i("div",{staticStyle:{height:"40px"}},[i("div",{staticClass:"pagegroup"},[i("el-pagination",{attrs:{"page-size":t.limit,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)]),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.selectPhoto()}}},[t._v("确定选取")]),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.clearSelect()}}},[t._v("取消选择")])],1)]):t._e(),1==t.showTab?i("div",{staticClass:"photo-upload-tab"},[i("el-form",{ref:"form",attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"选择分组"}},[i("el-select",{staticStyle:{float:"left"},attrs:{size:"small",placeholder:"请选择分组"},model:{value:t.groupId,callback:function(e){t.groupId=e},expression:"groupId"}},t._l(t.groups,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t.groups.length<16?i("create-resource-category",{on:{addYes:t.getCategoryByAdd}}):t._e()],1),i("el-form-item",{attrs:{label:"上传图片"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadImgUrl,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),i("p",[t._v("只能上传JPG或者PNG的图片")])],1)],1),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("el-button",{attrs:{size:"small",disabled:!t.imageUrl},on:{click:function(e){return t.selectPhotoByAdd()}}},[t._v("确定选取")]),i("el-button",{attrs:{size:"small"},on:{click:function(e){t.showTab=0}}},[t._v("返回列表")])],1)],1):t._e()])],1)},a=[],o=i("f499"),l=i.n(o),n=(i("863e"),i("e338")),r=i("d722"),c={name:"imgUploads",props:["multi","img","w","h"],components:{createResourceCategory:n["a"]},data:function(){return{myW:this.w?this.w:120,myH:this.h?this.h:120,myL:this.h?this.h-4:116,uploadImgUrl:"",showImg:"",showImgs:[],imageUrl:"",dialogVisible:!1,selectImg:"",selectImgs:[],showTab:0,groupId:0,cid:0,groups:[],page:1,loading:!1,total:0,limit:12,photos:[]}},watch:{img:function(t){1==this.multi?""!=this.img&&this.img!=this.showImgs&&(this.showImgs=this.img):this.showImg=this.img},showImg:function(t){t!=this.img&&this.$emit("input",t)},showImgs:function(t){t!=this.img&&this.$emit("input",t)},groupId:function(t){var e="";e="/",this.uploadImgUrl=e+"shop/admin.upload/imageUpload?appToken="+encodeURIComponent(this.$store.getters.appToken)+"&groupId="+t}},created:function(){1==this.multi?""!=this.img&&this.img!=this.showImgs&&(this.showImgs=this.img):this.showImg=this.img;var t="";t="/",this.uploadImgUrl=t+"shop/admin.upload/imageUpload?appToken="+encodeURIComponent(this.$store.getters.appToken)},methods:{setSelectImgs:function(t){var e=this.isInArray(t);!1!==e?this.selectImgs.splice(e,1):this.selectImgs.push(t)},isInArray:function(t){for(var e=0;e<this.selectImgs.length;e++)if(t==this.selectImgs[e])return e;return!1},selectPhotoByAdd:function(){1==this.multi?this.showImgs.push(this.imageUrl):this.showImg=this.imageUrl,this.imageUrl="",this.dialogVisible=!1},selectPhoto:function(){if(1==this.multi){var t=JSON.parse(l()(this.showImgs));for(var e in this.selectImgs)t.push(this.selectImgs[e]);this.showImgs=t,this.selectImgs=[]}else this.showImg=this.selectImg,this.selectImg="";this.dialogVisible=!1},clearSelect:function(){this.selectImg="",this.selectImgs=[]},clickCategory:function(t){this.cid=t,this.page=1,this.count=0,this.getPhotos()},handleCurrentChange:function(t){this.page=t,this.getPhotos()},getPhotos:function(){var t=this;this.loading=!0,r["a"]("shop/admin.resource.resource/index",{appToken:this.$store.getters.appToken,category_id:this.cid,limit:this.limit,page:this.page}).then(function(e){t.photos=e.list,t.total=e.count,t.loading=!1}).catch(function(e){t.loading=!1})},getCategoryByAdd:function(t){this.apiGetCategory(t)},getCategory:function(){this.apiGetCategory()},apiGetCategory:function(t){var e=this,i=[{name:"全部图片",id:0}];r["a"]("shop/admin.resource.category/index",{appToken:this.$store.getters.appToken}).then(function(s){for(var a in s.list)i.push({name:s.list[a].title,id:s.list[a].category_id});e.groups=i,t&&(e.groupId=t)}).catch(function(t){})},uploadFile:function(){this.getCategory(),this.getPhotos(),this.dialogVisible=!0},deleteImg:function(t){1==this.multi?this.showImgs.splice(t,1):this.showImg=""},handleAvatarSuccess:function(t,e){this.imageUrl=t.data.img_url,this.page=1,this.cid=0,this.getPhotos()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e}}},u=c,p=(i("3e5b"),i("2877")),d=Object(p["a"])(u,s,a,!1,null,null,null);e["a"]=d.exports},"665b":function(t,e,i){"use strict";var s=i("da53"),a=i.n(s);a.a},"670d":function(t,e,i){},"6b54":function(t,e,i){"use strict";i("3846");var s=i("cb7c"),a=i("0bfb"),o=i("9e1e"),l="toString",n=/./[l],r=function(t){i("2aba")(RegExp.prototype,l,t,!0)};i("79e5")(function(){return"/a/b"!=n.call({source:"a",flags:"b"})})?r(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?a.call(t):void 0)}):n.name!=l&&r(function(){return n.call(this)})},"741c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA9VJREFUWAnNmctKJDEUQFNt2T5oH/gAH+BOFy3MR8xC8D9mM5tZzIfMTtz4H4ILP2LABnUn+ABBFBvftnNPpm9NOlaqOo12z4WQVHJv7umbR6XSifHk+Ph4/e3t7ZukDUkr0lzzVD76sZkkyYmkPUk7q6urB66DRB8Epnp0dPRLnr9LuaL1/cwFsCX+ttfW1n5K+QnfFrANtyv5134ChXwJ3L5AbgJpI0Xk/hc4oGFpj6ZJmHOtVuu3VA5kWAui2KpUKl9SAWNB9AxXrVbN1NSUGR8fN8PDw9bf8/Ozubu7Mzc3N+bpyU6lEEewHibYksPDwwMp1IOaBQ3z8/MWrkDFQl5eXhapBNtkDjaIIFtJtCwtLZmxsTHmS6Ht5OSkjezZ2VmhXl4jbAxt9D43OztrRkZGjMzdrhK62PQgtei5xzybmJiwkSN63SZsdI7GgEYD1mo1C0X0FE7Lbq7RRUfrsY2VNNZAhxY7nKtoWfO8emxjJRpQ9iYbEdeRrLYOWP8ZXeqwjZVoQD9COPTr/GfVyasvA44GZBPuZbIDgm2sRAM+Pj6aoaGhWD9WH9tYiQbkFcYG3YtgGyvRgK+vr/Y9Ozo6GuXr4eHBYBsr0YA4aDabdkV2OxeZe9j0IqWAoZXHSYUTTFkkiVzR0LL9FEkuYAjK7wjHALABE03d53hzEDUWBeUicX3lwXYAuspFnbptANzf39vk1vdSVv8uaAaojWUdd6sX6sd1HtLBh+pZwDKnofZQve9YnVHv2rj1vg16tHNg9duyZ7+t7DkzLCkomPanz74Z7dkQ5zVqnXbEmY7ERp2mabYoVC+UM09fXl7sPL29vTUkRMHoX8t+H7mACqQ528nCwsK7d3DZCnWd8YP0B7LCLy4usu0HuBDkO0CF0nx6etrwcYTEALlwfpl3+fLysuFj6vr6OoPLg+wAVChyEr+Yb4mPAvNB6Zuhd4fch8wAXTg6Yp7Nzc19GpzC4gNINnyF0xydDFANyFGYmZmxuYK77R9dxtfp6WnuQrGACkFO4tXFPPmsofV/IL7wqedFd9EAyDGjppAYs2r7BYc/BJ8KCEt722myUZ9Iu736oIHEfQt5P8X1qXsibKmcQPYkWtndDCcSUr8jqH7dwMCWyvjvCMwPaeA2yZ7v+g2nI8U85GSESBRbsFXad8LbqsSOD+AgEr4d2YYtuwJuNBq7AvWVJU+4ByEE5erqCv/79Xr93xWwhJNbxk0J6RahHUT08Nke1i1Y2kx/L9HdaJ2fn6/L1xe3rhuitCJ5/I2P22FJWXw0xYf9G4I5t7i42PE3xB9oWTpXj6b+tQAAAABJRU5ErkJggg=="},7445:function(t,e,i){var s=i("63b6"),a=i("5d6b");s(s.G+s.F*(parseInt!=a),{parseInt:a})},"77be":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"min-width":"950px"}},[t.spec.length>0?i("el-form",{staticStyle:{margin:"0",padding:"0"},attrs:{size:"mini","label-width":"80px"}},[i("el-form-item",{attrs:{label:"规格项"}},t._l(t.spec,function(e,s){return i("el-form-item",{key:s,attrs:{label:e.name+"：","label-width":"100px"}},[i("el-checkbox-group",{on:{change:t.setCheckSpec},model:{value:t.checkSpec,callback:function(e){t.checkSpec=e},expression:"checkSpec"}},t._l(e.item,function(e,s){return i("el-checkbox",{key:s,attrs:{label:e.item_id}},[t._v(t._s(e.item))])}),1)],1)}),1),i("el-form-item",{attrs:{label:"快捷操作"}},[i("el-form",{staticStyle:{margin:"0",padding:"0"},attrs:{"label-position":"top",size:"mini"}},[i("el-col",{attrs:{span:3}},[i("el-form-item",{attrs:{label:"门市价"}},[i("el-input",{model:{value:t.setAllValue.market_price,callback:function(e){t.$set(t.setAllValue,"market_price",e)},expression:"setAllValue.market_price"}})],1)],1),i("el-col",{attrs:{span:3}},[i("el-form-item",{attrs:{label:"本店价"}},[i("el-input",{model:{value:t.setAllValue.shop_price,callback:function(e){t.$set(t.setAllValue,"shop_price",e)},expression:"setAllValue.shop_price"}})],1)],1),i("el-col",{attrs:{span:3}},[i("el-form-item",{attrs:{label:"库存"}},[i("el-input",{model:{value:t.setAllValue.goods_num,callback:function(e){t.$set(t.setAllValue,"goods_num",e)},expression:"setAllValue.goods_num"}})],1)],1),1==t.isPlusVip?i("el-col",{attrs:{span:3}},[i("el-form-item",{attrs:{label:"会员价"}},[i("el-input",{model:{value:t.setAllValue.plus_vip_price,callback:function(e){t.$set(t.setAllValue,"plus_vip_price",e)},expression:"setAllValue.plus_vip_price"}})],1)],1):t._e(),1==t.isCommission?i("el-col",{attrs:{span:3}},[i("el-form-item",{attrs:{label:"推广佣金"}},[i("el-input",{model:{value:t.setAllValue.commission,callback:function(e){t.$set(t.setAllValue,"commission",e)},expression:"setAllValue.commission"}})],1)],1):t._e(),i("el-col",{attrs:{span:3}},[i("el-form-item",{attrs:{label:"操作"}},[i("el-button",{on:{click:t.setAll}},[t._v("全部设置")])],1)],1)],1)],1),i("el-form-item",{attrs:{label:"规格设置"}},[i("table",{staticClass:"stock-table"},[i("thead",[i("tr",[t._l(t.specification,function(e){return i("th",[t._v(t._s(e.name))])}),i("th",[i("b",{staticStyle:{color:"red"}},[t._v("*")]),t._v("门市价")]),i("th",[i("b",{staticStyle:{color:"red"}},[t._v("*")]),t._v("本店价")]),i("th",[i("b",{staticStyle:{color:"red"}},[t._v("*")]),t._v("库存")]),1==t.isPlusVip?i("th",[i("b",{staticStyle:{color:"red"}}),t._v("会员价")]):t._e(),t.isCommission?i("th",[i("b",{staticStyle:{color:"red"}}),t._v("推广佣金")]):t._e(),i("th",[t._v("规格编号")]),i("th",[t._v("缩略图")]),i("th",[t._v("操作")])],2)]),i("tbody",{staticStyle:{"max-height":"10px"}},t._l(t.countSum(0),function(e,s){return i("tr",{key:s},[t._l(t.specification.length,function(e,a){return t.showTd(a,s)?i("td",{staticStyle:{"text-align":"center"},attrs:{rowspan:t.countSum(e)}},[t._v("\n                        "+t._s(t.getSpecAttr(a,s))+"\n                    ")]):t._e()}),i("td",[i("el-input",{attrs:{disabled:1==t.values[s].invalid,type:"number",size:"mini"},on:{input:t.setSpecPrice},model:{value:t.values[s].market_price,callback:function(e){t.$set(t.values[s],"market_price",e)},expression:"values[index].market_price"}})],1),i("td",[i("el-input",{attrs:{disabled:1==t.values[s].invalid,type:"number",size:"mini"},on:{input:t.setSpecPrice},model:{value:t.values[s].shop_price,callback:function(e){t.$set(t.values[s],"shop_price",e)},expression:"values[index].shop_price"}})],1),i("td",[i("el-input",{attrs:{disabled:1==t.values[s].invalid,type:"number",size:"mini"},on:{input:t.setSpecPrice},model:{value:t.values[s].goods_num,callback:function(e){t.$set(t.values[s],"goods_num",e)},expression:"values[index].goods_num"}})],1),1==t.isPlusVip?i("td",[i("el-input",{attrs:{disabled:1==t.values[s].invalid,type:"number",size:"mini"},on:{input:t.setSpecPrice},model:{value:t.values[s].plus_vip_price,callback:function(e){t.$set(t.values[s],"plus_vip_price",e)},expression:"values[index].plus_vip_price"}})],1):t._e(),1==t.isCommission?i("td",[i("el-input",{attrs:{disabled:1==t.values[s].invalid,type:"number",size:"mini"},on:{input:t.setSpecPrice},model:{value:t.values[s].commission,callback:function(e){t.$set(t.values[s],"commission",e)},expression:"values[index].commission"}})],1):t._e(),i("td",[i("el-input",{attrs:{disabled:1==t.values[s].invalid,size:"mini"},on:{input:t.setSpecPrice},model:{value:t.values[s].bar_code,callback:function(e){t.$set(t.values[s],"bar_code",e)},expression:"values[index].bar_code"}})],1),i("td",{staticStyle:{width:"70px"}},[i("div",{staticStyle:{display:"inline-flex","justify-content":"center",width:"100%","margin-top":"10px"}},[i("img-uploads",{attrs:{img:t.values[s].photo,w:50,h:50},model:{value:t.values[s].photo,callback:function(e){t.$set(t.values[s],"photo",e)},expression:"values[index].photo"}})],1)]),i("td",[i("div",{staticStyle:{display:"inline-flex","justify-content":"center",width:"100%"}},[i("el-button",{attrs:{type:t.values[s].invalid?"info":"",size:"mini"},on:{click:function(e){return t.setInvalid(s)}}},[t._v(" "+t._s(t.values[s].invalid?"有效":"无效")+"\n                            ")])],1)])],2)}),0)])])],1):t._e(),t.spec.length<=0?i("p",{staticClass:"wyu-form-tips"},[t._v("当前模板没有规格项")]):t._e()],1)},a=[],o=(i("6b54"),i("e814")),l=i.n(o),n=(i("7f7f"),i("ac6a"),i("d722")),r=i("5fed"),c={name:"GoodsSpec",components:{ImgUploads:r["a"]},props:["specData","typeId","isPlusVip","isCommission"],data:function(){return{loading:!1,spec:[],img:"",datas:[],checkSpec:[],specification:[],values:[],setAllValue:{market_price:0,shop_price:0,plus_vip_price:0,goods_num:0,commission:0}}},watch:{typeId:function(){this.specification=[],this.checkSpec=[],this.values=[],this.spec=[],this.getSpec(),this.checkSpec=this.specData.spec?this.specData.spec:[]}},created:function(){this.checkSpec=this.specData.spec?this.specData.spec:[],this.getSpec()},methods:{setInvalid:function(t){this.values[t].invalid=1==this.values[t].invalid?0:1,this.setSpecPrice()},setAll:function(){var t=this;this.values.forEach(function(e){t.setAllValue.shop_price>0&&(e.shop_price=t.setAllValue.shop_price),t.setAllValue.goods_num>0&&(e.goods_num=t.setAllValue.goods_num),t.setAllValue.commission>0&&(e.commission=t.setAllValue.commission),t.setAllValue.plus_vip_price>0&&(e.plus_vip_price=t.setAllValue.plus_vip_price),t.setAllValue.market_price>0&&(e.market_price=t.setAllValue.market_price)}),this.setAllValue={market_price:0,shop_price:0,plus_vip_price:0,goods_num:0,commission:0},this.setSpecPrice()},getSpec:function(){var t=this;this.typeId&&(this.loading=!0,n["a"]("/shop/admin.spec/getSpecDetail",{appToken:this.$store.getters.appToken,type_id:this.typeId}).then(function(e){t.spec=e.detail,t.loading=!1,t.setCheckSpec(t.checkSpec),t.values=t.specData.itemPrice?t.specData.itemPrice:[]}).catch(function(){t.loading=!1}))},setSpecPrice:function(){this.$emit("input",{type_id:this.typeId,spec:this.checkSpec,itemPrice:this.values})},makeValues:function(){for(var t=this.countSum(0),e=[],i=0;i<t;i++)e.push(this.getSpecKey(i));this.values=e},setCheckSpec:function(t){var e=[];if(this.spec.forEach(function(i){var s=!1,a=[];i.item.forEach(function(e){-1!=t.indexOf(e.item_id)&&(a.push(e),s=!0)}),s&&e.push({name:i.name,value:a})}),e.length>3)return this.$message("您最多添加个三规格大类"),!1;this.specification=e,this.makeValues()},getSpecKey:function(t){for(var e=this.specification.length,i="",s="",a=0;a<e;a++){var o=this.countSum(a),n=l()(t%o/(o/this.specification[a].value.length)),r=this.specification[a].name;i+=this.specification[a].value[n].item_id+"_",s+=r+":"+this.specification[a].value[n].item+","}return{spec_key:i.slice(0,-1),key_name:s.slice(0,-1),market_price:0,shop_price:0,plus_vip_price:0,goods_num:0,commission:0,bar_code:"",invalid:0,photo:""}},getSpecAttr:function(t,e){var i,s=this.specification[t].value;i=this.specification[t+1]&&this.specification[t+1].value.length?e/this.countSum(t+1):e;var a=i%s.length;return"NaN"!==a.toString()&&a%1===0?s[a].item:""},countSum:function(t){if(this.specification.length<=0)return 0;var e=1;return this.specification.forEach(function(i,s){s>=t&&i.value.length&&(e*=i.value.length)}),e},showTd:function(t,e){return!!this.specification[t]&&e%this.countSum(t+1)===0}}},u=c,p=(i("b22d"),i("2877")),d=Object(p["a"])(u,s,a,!1,null,"57fa52bd",null);e["a"]=d.exports},"894d":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.attr.length>0?i("p",{staticClass:"wyu-form-tips"},[t._v("所有商品属性 都非必填项")]):t._e(),t.attr.length<=0?i("p",{staticClass:"wyu-form-tips"},[t._v("当前模型没有属性")]):t._e(),i("el-form",{staticStyle:{margin:"0",padding:"0"},attrs:{size:"mini","label-width":"80px"}},t._l(t.attr,function(e,s){return i("el-form-item",{attrs:{label:e.attr_name}},[0==e.attr_input_type?i("el-input",{staticStyle:{width:"500px"},on:{input:t.setAttr},model:{value:t.attrValue.attr[s].value,callback:function(e){t.$set(t.attrValue.attr[s],"value",e)},expression:"attrValue.attr[key].value"}}):t._e(),1==e.attr_input_type?i("el-select",{attrs:{placeholder:"请选择"},on:{input:t.setAttr},model:{value:t.attrValue.attr[s].value,callback:function(e){t.$set(t.attrValue.attr[s],"value",e)},expression:"attrValue.attr[key].value"}},t._l(e.attr_values,function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1):t._e(),2==e.attr_input_type?i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea"},on:{input:t.setAttr},model:{value:t.attrValue.attr[s].value,callback:function(e){t.$set(t.attrValue.attr[s],"value",e)},expression:"attrValue.attr[key].value"}}):t._e(),i("p",{staticClass:"wyu-form-tips"},[t._v("此项选填")])],1)}),1)],1)},a=[],o=(i("ac6a"),i("d722")),l={name:"GoodsAttr",props:["attrData","typeId"],data:function(){return{loading:!1,attr:[],attrValue:{type_id:0,attr:[]}}},watch:{typeId:function(){this.attr=[],this.getAttr()}},created:function(){this.getAttr()},methods:{setAttr:function(){this.$emit("input",this.attrValue)},getAttr:function(){var t=this;this.typeId&&(this.loading=!0,o["a"]("/shop/admin.attribute/getTypeAttr",{appToken:this.$store.getters.appToken,type_id:this.typeId}).then(function(e){t.loading=!1,t.attrValue.attr=[],t.attrData.type_id==t.typeId&&t.attrData.attr.length>0?t.attrValue=t.attrData:e.list.forEach(function(e){t.attrValue.attr.push({name:e.attr_name,value:""})}),t.attrValue.type_id=t.typeId,t.attr=e.list}).catch(function(){t.loading=!1}))}}},n=l,r=i("2877"),c=Object(r["a"])(n,s,a,!1,null,"049a3564",null);e["a"]=c.exports},"981d":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.typeLoading,expression:"typeLoading"}],staticStyle:{width:"100%"},attrs:{disabled:!0===t.disabled,size:t.size,value:t.typeId,placeholder:"请选择"},on:{input:t.setTypeId}},t._l(t.types,function(t){return i("el-option",{key:t.type_id,attrs:{label:t.name,value:t.type_id}})}),1)],1)},a=[],o=i("d722"),l={name:"SelectType",props:["size","typeId","disabled"],data:function(){return{typeLoading:!0,types:[]}},created:function(){this.getTypeList()},methods:{setTypeId:function(t){this.$emit("input",t)},getTypeList:function(){var t=this;this.typeLoading=!0,o["a"]("/shop/admin.goodstype/index",{appToken:this.$store.getters.appToken}).then(function(e){t.typeLoading=!1,t.types=e.list,t.types.unshift({type_id:0,name:"全部模型"})}).catch(function(e){t.typeLoading=!1})}}},n=l,r=i("2877"),c=Object(r["a"])(n,s,a,!1,null,"bfc729f4",null);e["a"]=c.exports},a1ce:function(t,e,i){var s=i("63b6"),a=i("25eb"),o=i("294c"),l=i("e692"),n="["+l+"]",r="​",c=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),p=function(t,e,i){var a={},n=o(function(){return!!l[t]()||r[t]()!=r}),c=a[t]=n?e(d):l[t];i&&(a[i]=c),s(s.P+s.F*n,"String",a)},d=p.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},ac6a:function(t,e,i){for(var s=i("cadf"),a=i("0d58"),o=i("2aba"),l=i("7726"),n=i("32e9"),r=i("84f2"),c=i("2b4c"),u=c("iterator"),p=c("toStringTag"),d=r.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=a(m),h=0;h<g.length;h++){var v,_=g[h],f=m[_],y=l[_],b=y&&y.prototype;if(b&&(b[u]||n(b,u,d),b[p]||n(b,p,_),r[_]=d,f))for(v in s)b[v]||o(b,v,s[v],!0)}},b22d:function(t,e,i){"use strict";var s=i("670d"),a=i.n(s);a.a},b9e9:function(t,e,i){i("7445"),t.exports=i("584a").parseInt},da53:function(t,e,i){},e338:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"addCategory",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.2)"}},[0==t.status?i("el-button",{attrs:{type:"text"},on:{click:function(e){t.status=1}}},[t._v("添加分组")]):t._e(),1==t.status?i("el-input",{staticStyle:{float:"left",width:"100px"},attrs:{size:"small",placeholder:"输入分组名称"},model:{value:t.groupname,callback:function(e){t.groupname=e},expression:"groupname"}}):t._e(),1==t.status?i("a",{staticStyle:{float:"left","margin-left":"10px"},attrs:{href:"javascript:void(0);"},on:{click:t.saveCategory}},[t._v("确定")]):t._e(),1==t.status?i("a",{staticStyle:{float:"left","margin-left":"10px"},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.status=0}}},[t._v("取消")]):t._e()],1)},a=[],o=i("d722"),l={name:"createResourceCategory",data:function(){return{status:0,groupname:"",loading:!1}},methods:{saveCategory:function(){var t=this;""!=this.groupname&&0==this.loading&&(this.loading=!0,o["a"]("shop/admin.resource.category/create",{appToken:this.$store.getters.appToken,title:this.groupname}).then(function(e){t.$emit("addYes",e.id),t.loading=!1,t.status=0}).catch(function(e){t.loading=flase}))}}},n=l,r=(i("665b"),i("2877")),c=Object(r["a"])(n,s,a,!1,null,"ae09ffe4",null);e["a"]=c.exports},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(t,e,i){t.exports=i("b9e9")}}]);
//# sourceMappingURL=chunk-42bb8615.b64f2183.js.map