(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b078027"],{"1b85":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},on:{change:e.selectDate},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},o=[],s={name:"DateBetween",props:["date"],data:function(){return{pickerOptions2:{shortcuts:[{text:"最近七天",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近半个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-1296e6),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}}]},value:""}},methods:{selectDate:function(e){var t=0,n=0;e&&(t=e[0].getFullYear()+"-"+(e[0].getMonth()+1)+"-"+e[0].getDate(),n=e[1].getFullYear()+"-"+(e[1].getMonth()+1)+"-"+e[1].getDate()),this.$emit("input",[t,n])}}},i=s,r=n("2877"),l=Object(r["a"])(i,a,o,!1,null,"082e0500",null);t["a"]=l.exports},ac6a:function(e,t,n){for(var a=n("cadf"),o=n("0d58"),s=n("2aba"),i=n("7726"),r=n("32e9"),l=n("84f2"),c=n("2b4c"),u=c("iterator"),p=c("toStringTag"),d=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},_=o(m),h=0;h<_.length;h++){var f,g=_[h],v=m[g],b=i[g],y=b&&b.prototype;if(y&&(y[u]||r(y,u,d),y[p]||r(y,p,g),l[g]=d,v))for(f in a)y[f]||s(y,f,a[f],!0)}},baf1:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TopNav",{attrs:{mdl:"coupon",select:"0"}}),e._m(0),n("div",{staticClass:"wyu-main"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"wyu-block"},[n("el-form",{staticClass:"search-form",attrs:{size:"mini",inline:!0},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[n("el-form-item",{attrs:{label:"优惠券名称"}},[n("el-input",{attrs:{placeholder:"输入关键字"},model:{value:e.searchForm.keyword,callback:function(t){e.$set(e.searchForm,"keyword",t)},expression:"searchForm.keyword"}})],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.receivetype,callback:function(t){e.$set(e.searchForm,"receivetype",t)},expression:"searchForm.receivetype"}},[n("el-option",{attrs:{label:"请选择",value:-999}}),e._l(e.datas.couponUseType,function(e){return n("el-option",{attrs:{label:e.value,value:e.key}})})],2)],1),n("el-form-item",{attrs:{label:"使用范围"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.usearea,callback:function(t){e.$set(e.searchForm,"usearea",t)},expression:"searchForm.usearea"}},[n("el-option",{attrs:{label:"请选择",value:-999}}),e._l(e.datas.useArea,function(e){return n("el-option",{attrs:{label:e.value,value:e.key}})})],2)],1),n("el-form-item",{attrs:{label:"发放类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},[n("el-option",{attrs:{label:"请选择",value:-999}}),e._l(e.datas.couponType,function(e){return n("el-option",{attrs:{label:e.value,value:e.key}})})],2)],1),n("el-form-item",{attrs:{label:"是否上架"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.is_online,callback:function(t){e.$set(e.searchForm,"is_online",t)},expression:"searchForm.is_online"}},[n("el-option",{attrs:{label:"请选择",value:-999}}),n("el-option",{attrs:{label:"已下架",value:0}}),n("el-option",{attrs:{label:"上架中",value:1}})],1)],1),n("el-form-item",{attrs:{label:"领取时间"}},[n("date-between",{model:{value:e.searchForm.send_date,callback:function(t){e.$set(e.searchForm,"send_date",t)},expression:"searchForm.send_date"}})],1),n("el-form-item",{attrs:{label:"有效时间"}},[n("date-between",{model:{value:e.searchForm.expire_date,callback:function(t){e.$set(e.searchForm,"expire_date",t)},expression:"searchForm.expire_date"}})],1),n("div",{staticStyle:{"padding-left":"80px"}},[n("el-button",{attrs:{icon:"el-icon-search",size:"mini",type:"primary"},on:{click:function(t){return e.getLists(1)}}},[e._v("搜索")]),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.searchForm.keyword="",e.searchForm.usearea=-999,e.searchForm.type=-999,e.searchForm.is_online=-999,e.searchForm.send_date="",e.searchForm.expire_date="",e.getLists(1)}}},[e._v("取消搜索")]),n("router-link",{attrs:{to:"/marketing/coupon/create"}},[n("el-button",{attrs:{size:"mini",type:"danger"}},[e._v("新增优惠券")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.datas.list},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:"ID",prop:"coupon_id",width:"80"}}),n("el-table-column",{attrs:{label:"优惠券"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"ellipsis-02"},[e._v(e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{label:"抵用金额",prop:"money"}}),n("el-table-column",{attrs:{label:"消费需满足",prop:"condition"}}),e._v("\n+\n                    "),n("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.type_mean)+"\n                        ")]}}])}),n("el-table-column",{attrs:{label:"获取类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            "+e._s(t.row.get_type_mean)+"\n                        ")]}}])}),n("el-table-column",{attrs:{label:"使用范围"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.userarea_mean))]),t.row.userarea>0?n("p",[e._v(e._s(t.row.cat_name))]):e._e()]}}])}),n("el-table-column",{attrs:{label:"总数/领取/使用"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                            总数："+e._s(t.row.create_num)+"\n                            领取："+e._s(t.row.send_num)+"\n                            使用："+e._s(t.row.use_num)+"\n                        ")]}}])}),n("el-table-column",{attrs:{label:"是否上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:t.row.is_online,"inactive-value":0,"active-value":1},on:{change:function(n){return e.setOnline(t,t.row.is_online)}}}),e._v("\n                             \n                        ")]}}])}),n("el-table-column",{attrs:{label:"领取时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v("从："+e._s(t.row.send_start_time))]),n("p",[e._v("至："+e._s(t.row.send_end_time))])]}}])}),n("el-table-column",{attrs:{label:"有效期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v("从："+e._s(t.row.expire_start_time))]),n("p",[e._v("至："+e._s(t.row.expire_end_time))])]}}])}),n("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{attrs:{to:"/marketing/coupon/edit/"+t.row.coupon_id}},[n("el-button",{attrs:{size:"mini",type:"text"}},[e._v("编辑")])],1),n("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.row.isDel,callback:function(n){e.$set(t.row,"isDel",n)},expression:"scope.row.isDel"}},[n("p",[e._v("您确定要删除么")]),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{type:"text"},on:{click:function(e){t.row.isDel=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.delAct(t.row.couponId)}}},[e._v("确定")])],1),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-tool"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.setOnline("",1)}}},[e._v("批量上架 ")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.setOnline("",0)}}},[e._v("批量下架 ")])],1),n("div",{staticClass:"page-mian"},[n("el-pagination",{attrs:{"page-size":e.datas.limit,layout:"total, prev, pager, next",total:e.datas.count},on:{"current-change":e.getLists}})],1)])],1)])],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wyu-tips wyu-tips-warning"},[n("p",[e._v(" 1） 这是管理优惠券管理 ")])])}],s=(n("ac6a"),n("5200")),i=n("d722"),r=n("1b85"),l=n("0c7a"),c={name:"couponIndex",components:{ProductCategory:l["a"],TopNav:s["a"],DateBetween:r["a"]},data:function(){return{subLoading:!1,dialog:!1,keyword:"",loading:!1,datas:[],searchForm:{keyword:"",type:-999,usearea:-999,is_online:-999,send_date:"",expire_date:""},form:{},couponIds:[],coupon_id:0}},created:function(){this.getLists()},methods:{handleSelectionChange:function(){var e=[];val.forEach(function(t){e.push(t.coupon_id)}),this.couponIds=e,console.log(this.couponIds)},setVip:function(e){var t=this;this.loading=!0;var n=0;0==e.row.is_vip&&(n=1),e.row.is_vip=n,i["a"]("shop/admin.marketing.coupon/setVip",{appToken:this.$store.getters.appToken,coupon_id:e.row.coupon_id,is_vip:n}).then(function(){t.$message({message:"操作成功",type:"success"}),t.loading=!1}).catch(function(){t.loading=!1})},setCurrency:function(e){var t=this;this.loading=!0;var n=0;0==e.row.is_currency&&(n=1),e.row.is_currency=n,i["a"]("shop/admin.marketing.coupon/setCurrency",{appToken:this.$store.getters.appToken,coupon_id:e.row.coupon_id,is_currency:n}).then(function(){t.$message({message:"操作成功",type:"success"}),t.getLists(),t.loading=!1}).catch(function(){t.loading=!1})},setOnline:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.loading=!0,""!=t&&(n=0==t.row.is_online?1:0,t.row.is_online=n),i["a"]("shop/admin.marketing.coupon/setOnline",{appToken:this.$store.getters.appToken,coupon_id:t.row.coupon_id,coupon_Ids:this.coupon_Ids,is_online:n}).then(function(){e.$message({message:"操作成功",type:"success"}),e.getLists(),e.loading=!1}).catch(function(){e.loading=!1})},getCoupon:function(e){this.form=e.row},editCoupon:function(e){var t=this;this.loading=!0;var n=0;0==e.row.is_online&&(n=1),e.row.is_online=n,i["a"]("shop/admin.marketing.coupon/setOnline",{appToken:this.$store.getters.appToken,coupon_id:e.row.coupon_id,is_online:n}).then(function(e){t.$message({message:"操作成功",type:"success"}),t.loading=!1}).catch(function(){t.loading=!1})},delAct:function(e){this.loading=!0;var t=this;i["a"]("app/coupon.coupon/del",{appToken:t.$store.getters.appToken,couponId:e}).then(function(e){t.loading=!1,t.$message({message:"删除成功",type:"success"}),t.getLists()}).catch(function(){t.loading=!1})},setPage:function(e){this.page=e,this.getLists()},getLists:function(){this.loading=!0;var e=this;i["a"]("shop/admin.marketing.coupon/index",{appToken:e.$store.getters.appToken,keyword:e.searchForm.keyword,is_currency:e.searchForm.is_currency,is_vip:e.searchForm.is_vip,send_start_time:e.searchForm.send_date[0],send_end_time:e.searchForm.send_date[1],expire_start_time:e.searchForm.expire_date[0],expire_end_time:e.searchForm.expire_date[1],page:e.page,limit:e.limit}).then(function(t){e.loading=!1,e.datas=t}).catch(function(){e.loading=!1})},onSearch:function(){this.page=1,this.getLists()}}},u=c,p=n("2877"),d=Object(p["a"])(u,a,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-1b078027.93e45f42.js.map