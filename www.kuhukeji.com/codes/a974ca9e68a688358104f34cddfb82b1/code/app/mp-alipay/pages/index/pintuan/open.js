(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/index/pintuan/open"],{5648:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",{staticClass:"open-main",attrs:{_hid:0}},[t._ri(!!t.detail,1)?e("view",{attrs:{_hid:1}},[e("view",{staticClass:"address-info",attrs:{_hid:2}},[t._ri(!(""!=t.model),3)?e("view",{staticClass:"no-addr",attrs:{_hid:3},on:{click:t.showAddressListListener}},[e("view",{staticClass:"na-lt",attrs:{_hid:4}},[]),e("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:6}})]):t._e(),t._ri(!(""==t.model),7)?e("view",{staticClass:"show-addr",attrs:{_hid:7},on:{click:t.showAddressListListener}},[e("view",{staticClass:"addr-lt",attrs:{_hid:8}},[e("view",{staticClass:"name",attrs:{_hid:9}},[e("text",{attrs:{_hid:10}},[t._v(t._s(t.model.name),11)]),e("text",{attrs:{_hid:12}},[t._v(t._s(t.model.mobile),13)])]),e("view",{staticClass:"desc ellipsis-01",attrs:{_hid:14}},[t._v(t._s(t.model.address),15)])]),e("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:16}})]):t._e()]),e("view",{staticClass:"member-info",attrs:{_hid:17}},[t._m(0),e("view",{staticClass:"m-cont",attrs:{_hid:24}},[e("view",{staticClass:"item-member",attrs:{_hid:25}},[e("image",{attrs:{src:t.detail.this_user_face,_hid:26,_batrs:"src"}}),e("view",{staticClass:"m-state",attrs:{_hid:27}},[])]),t._m(1)])]),e("view",{staticClass:"goods-info",attrs:{_hid:31}},[e("view",{staticClass:"g-lt",attrs:{_hid:32}},[e("view",{staticClass:"group-num",attrs:{_hid:33}},[]),e("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.detail.goods_info.goods_photo,_hid:35,_batrs:"src"}})]),e("view",{staticClass:"g-rt",attrs:{_hid:36}},[e("view",{staticClass:"gname ellipsis-01",attrs:{_hid:37}},[t._v(t._s(t.detail.goods_info.goods_name),38)]),e("view",{staticClass:"gsku",attrs:{_hid:39}},[t._v(t._s(t.detail.goods_info.key_name),40)]),e("view",{staticClass:"gdesc",attrs:{_hid:41}},[e("view",{staticClass:"price",attrs:{_hid:42}},[e("text",{attrs:{_hid:43}},[]),e("text",{staticStyle:{"margin-left":"4px","font-size":"20px"},attrs:{_hid:45}},[t._v(t._s(t.detail.goods_info.groupbuy_price),46)])]),t._m(2)])])]),e("view",{staticClass:"order-info",attrs:{_hid:50}},[e("view",{staticClass:"item-order",attrs:{_hid:51}},[e("view",{staticClass:"o-lt",attrs:{_hid:52}},[]),e("view",{staticClass:"o-rt",attrs:{_hid:54}},[t._v("¥"+t._s(t.detail._tital_price),55)])]),e("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:56}},[e("view",{staticClass:"o-lt",attrs:{_hid:57}},[]),e("view",{staticClass:"o-rt",attrs:{_hid:59}},[e("text",{attrs:{_hid:60}},[t._v("¥"+t._s(t.detail._shipping_price),61)])])])]),e("view",{staticClass:"order-info",attrs:{_hid:62}},[e("view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:63}},[e("view",{staticClass:"o-lt",attrs:{_hid:64}},[]),e("view",{staticClass:"o-rt",attrs:{_hid:66}},[e("text",{staticClass:"iconfont icon-radio",class:1==t.use_money?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==t.use_money?"#ED3005":"#999999")+";",attrs:{_hid:67},on:{click:t.onUseMoneyListener}})])])]),e("view",{staticStyle:{width:"100%",height:"78px"},attrs:{_hid:68}}),e("view",{staticClass:"bottom-info",attrs:{_hid:69}},[e("view",{staticClass:"b-price",attrs:{_hid:70}},[e("text",{attrs:{_hid:71}},[]),e("text",{staticStyle:{"font-size":"24px","margin-left":"4px"},attrs:{_hid:73}},[t._v(t._s(t.detail._tital_price),74)])]),e("view",{staticClass:"b-num",attrs:{_hid:75},on:{click:t.showPaymentDialog}},[])])]):t._e(),t._ri(!!t.showAddressFlag,77)?e("view",{staticClass:"mask",attrs:{_hid:77}},[e("view",{staticClass:"dialog-address",attrs:{_hid:78}},[e("view",{staticClass:"d-header",attrs:{_hid:79}},[e("text",{staticStyle:{flex:"1"},attrs:{_hid:80}},[]),e("text",{staticClass:"iconfont icon-btn_close_black",staticStyle:{"padding-left":"15px"},attrs:{_hid:82},on:{click:t.hideAddressListListener}})]),e("addressView",{attrs:{list:t.list,_hid:83,_batrs:"list",_cid:0},on:{selectEvent:t.selectAddrListener,deleteEvent:t.deleteCallBack}})],1)]):t._e(),t._ri(!!t.paymentFlag,1085)?e("view",{staticClass:"mask",attrs:{_hid:1085}},[e("view",{staticClass:"dialog-detailed",attrs:{_hid:1086}},[e("view",{staticClass:"dd-header",attrs:{_hid:1087}},[e("text",{staticClass:"h-tit",attrs:{_hid:1088}},[]),e("text",{staticClass:"h-close iconfont icon-btn_close_black",attrs:{_hid:1090},on:{click:t.hidePaymentDialog}})]),e("view",{staticClass:"dd-payment",attrs:{_hid:1091}},[e("view",{staticClass:"item-payment",attrs:{"data-type":"weixin",_hid:1092},on:{click:t.paymentListener}},[t._m(3),e("text",{staticClass:"p-radio iconfont",class:"weixin"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("weixin"==t.pay_type?"#3A96E6":"#EDEDED"),attrs:{_hid:1097}})]),e("view",{staticClass:"item-payment",attrs:{"data-type":"ali",_hid:1098},on:{click:t.paymentListener}},[t._m(4),e("text",{staticClass:"p-radio iconfont",class:"ali"==t.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("ali"==t.pay_type?"#3A96E6":"#EDEDED"),attrs:{_hid:1103}})])])])]):t._e()])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",{staticClass:"m-header",attrs:{_hid:18}},[e("text",{staticClass:"iconfont icon-icon_pintuan",staticStyle:{color:"#ED3005","font-size":"20px"},attrs:{_hid:19}}),e("text",{staticStyle:{color:"#ED3005","margin-left":"8px"},attrs:{_hid:20}},[]),e("text",{staticStyle:{"margin-left":"8px"},attrs:{_hid:22}},[])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",{staticClass:"item-member",attrs:{_hid:29}},[e("image",{attrs:{_hid:30}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",{staticClass:"number",attrs:{_hid:47}},[e("text",{attrs:{_hid:48}},[])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",{staticClass:"p-lt",attrs:{_hid:1093}},[e("text",{staticClass:"iconfont icon-icon_pay_wepay",staticStyle:{"font-size":"30px",color:"#41B035"},attrs:{_hid:1094}}),e("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"},attrs:{_hid:1095}},[])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",{staticClass:"p-lt",attrs:{_hid:1099}},[e("text",{staticClass:"iconfont icon-icon_pay_alipay",staticStyle:{"font-size":"30px",color:"#00AAEE"},attrs:{_hid:1100}}),e("text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"},attrs:{_hid:1101}},[])])}];e.d(s,"a",function(){return i}),e.d(s,"b",function(){return a})},"59c3":function(t,s,e){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=a(e("0eb2"));function a(t){return t&&t.__esModule?t:{default:t}}var d={components:{addressView:i.default},data:function(){return{userid:0,model:"",showAddressFlag:!1,groupbuy_id:"",spec_key:"",address_id:"",item_id:"",skuMsg:"",use_money:0,detail:"",paymentFlag:!1,pay_type:"",list:[]}},onLoad:function(s){var e=this,i=t.getStorageSync("user_id");void 0!=i&&""!=i&&(e.$data.userid=i),void 0!=s.pid&&""!=s.pid&&t.setStorageSync("pid",s.pid),e.wxb.printLog("=============onLoad================"),e.wxb.addPage(this),e.wxb.Init(s,function(t){console.log(s);var i=s.groupbuy_id,a=s.goodsNum,d=s.spec_key;e.$data.groupbuy_id=i,e.$data.goodsNum=a,e.$data.spec_key=d,e.getDefaultAddress(),e.getAddressList()})},onUnload:function(){this.wxb.printLog("=============onUnload================"),this.wxb.removePage()},methods:{deleteCallBack:function(t){this.getAddressList()},getAddressList:function(t){var s=this;s.wxb.Post("/shop/api.address/getIndex",{},function(t){s.$data.list=t.list;var e=s.$data.model;for(var i in t.list)if(t.list[i].address_id==e.address_id)return;s.$data.model="",s.getDefaultAddress()})},onUseMoneyListener:function(){0==this.$data.use_money?this.$data.use_money=1:this.$data.use_money=0},paymentListener:function(t){var s=t.currentTarget.dataset.type;void 0!=s&&(this.$data.pay_type=s,this.settlementListener()),this.hidePaymentDialog()},showPaymentDialog:function(t){"h5"==this.wxb.device?this.$data.paymentFlag=!0:this.settlementListener()},hidePaymentDialog:function(t){this.$data.paymentFlag=!1},settlementListener:function(s){var e=this;e.wxb.Post("/shop/api.groupbuy/GroupBuyOrder",{groupbuy_id:e.$data.groupbuy_id,spec_key:e.$data.spec_key,address_id:e.$data.address_id,item_id:e.$data.item_id,use_money:e.$data.use_money,pay_type:"h5"==e.wxb.device?e.$data.pay_type:""},function(s){if(0==s.is_pay)t.redirectTo({url:"assemble?item_id="+s.item_id});else if("h5"==e.wxb.device)if(console.log("h5端支付跳转超链接"),"weixin"==e.$data.pay_type)console.log("h5端支付跳转超链接"),window.location.href=s.order_info;else{var i=window.document.createElement("div");i.innerHTML=s.order_info,window.document.body.appendChild(i),window.document.forms.alipaysubmit.submit()}else e.wxb.paymentOrder(s,function(e){var i=s.order_id;t.redirectTo({url:"../../mine/order/detail?order_id="+i})})})},selectAddrListener:function(t){this.$data.list;this.$data.model=JSON.parse(t),console.log(this.$data.model),this.getCheckGroupBuyPrice(),this.hideAddressListListener()},showAddressListListener:function(){this.$data.showAddressFlag=!0},hideAddressListListener:function(){this.$data.showAddressFlag=!1,""!=this.$data.model&&this.getDefaultAddress(),this.getAddressList()},getDefaultAddress:function(){var t=this;t.wxb.Post("/shop/api.address/getDefault",{},function(s){void 0!=s&&(t.$data.model=s,t.$data.address_id=s.address_id),t.getCheckGroupBuyPrice()})},getCheckGroupBuyPrice:function(){var t=this;t.wxb.Post("/shop/api.groupbuy/getGroupBuyPrice",{groupbuy_id:t.$data.groupbuy_id,spec_key:t.$data.spec_key,address_id:t.$data.address_id,item_id:""},function(s){t.$data.detail=s})}}};s.default=d}).call(this,e("c11b")["default"])},a496:function(t,s,e){},aabc:function(t,s,e){"use strict";var i=e("a496"),a=e.n(i);a.a},bdf5:function(t,s,e){"use strict";e("2346");var i=d(e("e491")),a=d(e("3a53"));function d(t){return t&&t.__esModule?t:{default:t}}i.default.mpType="page";var r=new a.default(i.default);r.$mount()},e382:function(t,s,e){"use strict";e.r(s);var i=e("59c3"),a=e.n(i);for(var d in i)"default"!==d&&function(t){e.d(s,t,function(){return i[t]})}(d);s["default"]=a.a},e491:function(t,s,e){"use strict";e.r(s);var i=e("5648"),a=e("e382");for(var d in a)"default"!==d&&function(t){e.d(s,t,function(){return a[t]})}(d);e("aabc");var r=e("2877"),o=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);s["default"]=o.exports}},[["bdf5","common/runtime","common/vendor"]]]);