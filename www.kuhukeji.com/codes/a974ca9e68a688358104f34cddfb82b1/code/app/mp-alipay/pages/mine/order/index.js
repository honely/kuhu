(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/mine/order/index"],{"117b":function(t,i,e){"use strict";var a=e("fa5f"),s=e.n(a);s.a},6144:function(t,i,e){"use strict";e("2346");var a=r(e("e610")),s=r(e("3a53"));function r(t){return t&&t.__esModule?t:{default:t}}a.default.mpType="page";var d=new s.default(a.default);d.$mount()},"79e5":function(t,i,e){"use strict";e.r(i);var a=e("cee5"),s=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(i,t,function(){return a[t]})}(r);i["default"]=s.a},a246:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"order-box",attrs:{_hid:0}},[e("view",{style:"top:"+t.topHeight+"px;width: 100%;background: #fff!important; display: inline-flex; position: fixed; z-index: 999;",attrs:{_hid:1}},[e("tab-view",{attrs:{type:1,tabBars:t.tabBars,color:"#ED3005;",tabIndex:t.tindex,_hid:2,_batrs:"type,tabBars,tabIndex",_cid:0},on:{tapTab:t.tapTabListener}})],1),e("view",{staticClass:"order-list",attrs:{_hid:1004}},[t._l(t.list,function(i,a,s){var r=void 0!==s?s:a;return t._ri(!(4!=t.type),1005,void 0!==s?s:a)?e("view",{key:a,staticClass:"item-order",staticStyle:{background:"#fff"},attrs:{_hid:1005,_fid:r,_fk:"i"}},[e("view",{staticClass:"goods-info",staticStyle:{background:"rgba(0,0,0,0)"},attrs:{_hid:1006,_fid:r}},[e("image",{staticClass:"g-img",attrs:{src:i.photo,_hid:1007,_fid:r,_batrs:"src"}}),e("view",{staticClass:"g-cont",attrs:{_hid:1008,_fid:r}},[e("view",{staticClass:"name ellipsis-02",attrs:{_hid:1009,_fid:r}},[t._v(t._s(i.title),1010,r)]),e("view",{staticClass:"comment-box",attrs:{_hid:1011,_fid:r}},[e("text",{staticClass:"btn-comment",attrs:{_hid:1012,_fid:r},on:{click:function(e){t.toComment(i)}}},[])])])])]):t._e()},1005,t._self),t._l(t.list,function(i,a,s){var r=void 0!==s?s:a;return t._ri(!(4==t.type),1014,void 0!==s?s:a)?e("view",{key:a,staticClass:"item-order",attrs:{_hid:1014,_fid:r,_fk:"index"}},[e("navigator",{attrs:{url:"detail?order_id="+i.order_id,_hid:1015,_fid:r,_batrs:"url"}},[e("view",{staticClass:"order-top",attrs:{_hid:1016,_fid:r}},[e("text",{attrs:{_hid:1017,_fid:r}}),e("text",{staticStyle:{flex:"1"},attrs:{_hid:1018,_fid:r}},[t._v("订单号："+t._s(i.order_sn?i.order_sn:i.order_id),1019,r)]),e("text",{attrs:{_hid:1020,_fid:r}},[t._v(t._s(i.order_status_mean),1021,r)])]),t._l(i.order_goods,function(i,r,d){var o=(void 0!==s?s:a)+"-"+(void 0!==d?d:r);return e("view",{key:r,staticClass:"goods-info",attrs:{_hid:1022,_fid:o,_fk:"i"}},[e("image",{staticClass:"g-img",attrs:{src:i.goods_photo,_hid:1023,_fid:o,_batrs:"src"}}),e("view",{staticClass:"g-cont",attrs:{_hid:1024,_fid:o}},[e("view",{staticClass:"name ellipsis-02",attrs:{_hid:1025,_fid:o}},[t._v(t._s(i.goods_name),1026,o)]),e("view",{staticClass:"sku",attrs:{_hid:1027,_fid:o}},[e("text",{staticStyle:{flex:"1"},attrs:{_hid:1028,_fid:o}},[t._v(t._s(i.spec_key_name),1029,o)]),e("text",{attrs:{_hid:1030,_fid:o}},[t._v("x"+t._s(i.goods_num),1031,o)])])])])},"1022-"+(void 0!==s?s:a),t._self),e("view",{staticClass:"g-desc",attrs:{_hid:1032,_fid:r}},[e("text",{attrs:{_hid:1033,_fid:r}},[t._v("共"+t._s(i.goods_num)+"件商品",1034,r)]),e("text",{staticStyle:{"margin-left":"10px"},attrs:{_hid:1035,_fid:r}},[]),e("text",{staticStyle:{color:"#000000","font-size":"20px"},attrs:{_hid:1037,_fid:r}},[t._v("¥"+t._s(i.all_price),1038,r)]),e("text",{staticStyle:{"margin-left":"4px"},attrs:{_hid:1039,_fid:r}},[t._v("(含运费 ¥"+t._s(i.shipping_price)+")",1040,r)])])],1),e("view",{staticClass:"bottom-info",attrs:{_hid:1041,_fid:r}},[t._ri(!(0!=i.order_status),1042,void 0!==s?s:a)?e("block",{attrs:{_hid:1042,_fid:r}},[e("view",{staticStyle:{flex:"1",display:"flex","align-items":"center"},attrs:{_hid:1043,_fid:r}},[e("uni-countdown",{attrs:{color:"#ffffff",splitorColor:"#ffffff","background-color":"#ED3005","border-color":"rgba(0,0,0,0)",second:i.expire_time,"show-day":!1,styleNum:2,_hid:1044,_fid:r,_batrs:"second,show-day,styleNum",_cid:1}})],1),e("text",{staticClass:"btn-03",attrs:{_hid:2046,_fid:r},on:{click:function(e){t.toOrderDetail(i.order_id)}}},[])]):t._e(),t._ri(!(1!=i.order_status),2048,void 0!==s?s:a)?e("block",{attrs:{_hid:2048,_fid:r}},[e("text",{staticClass:"btn-01",attrs:{_hid:2049,_fid:r},on:{click:function(e){t.toOrderDetail(i.order_id)}}},[])]):t._e(),t._ri(!(2!=i.order_status),2051,void 0!==s?s:a)?e("block",{attrs:{_hid:2051,_fid:r}},[e("text",{staticClass:"btn-02",attrs:{_hid:2052,_fid:r},on:{click:function(e){t.toRefund(i.order_id)}}},[]),e("text",{staticClass:"btn-01",attrs:{_hid:2054,_fid:r},on:{click:function(e){t.toLogistics(i.order_id)}}},[]),e("text",{staticClass:"btn-01",attrs:{_hid:2056,_fid:r},on:{click:function(e){t.toConfirmOrder(i.order_id)}}},[])]):t._e(),t._ri(!(9!=i.order_status),2058,void 0!==s?s:a)?e("block",{attrs:{_hid:2058,_fid:r}},[e("view",{staticClass:"btn-delete",attrs:{_hid:2059,_fid:r},on:{click:function(e){t.deleteOrder(i.order_id)}}},[e("text",{staticClass:"iconfont icon-btn_delete",attrs:{_hid:2060,_fid:r}})]),e("text",{staticClass:"btn-01",attrs:{_hid:2061,_fid:r},on:{click:function(e){t.toLogistics(i.order_id)}}},[]),e("text",{staticClass:"btn-02",attrs:{_hid:2063,_fid:r},on:{click:t.toHome}},[])]):t._e(),t._ri(!(4!=i.order_status),2065,void 0!==s?s:a)?e("block",{attrs:{_hid:2065,_fid:r}},[e("view",{staticClass:"btn-delete",attrs:{_hid:2066,_fid:r},on:{click:function(e){t.deleteOrder(i.order_id)}}},[e("text",{staticClass:"iconfont icon-btn_delete",attrs:{_hid:2067,_fid:r}})]),e("text",{staticClass:"btn-01",attrs:{_hid:2068,_fid:r},on:{click:function(e){t.toLogistics(i.order_id)}}},[]),e("text",{staticClass:"btn-02",attrs:{_hid:2070,_fid:r},on:{click:t.toHome}},[])]):t._e(),t._ri(!(5!=i.order_status),2072,void 0!==s?s:a)?e("block",{attrs:{_hid:2072,_fid:r}},[e("view",{staticClass:"btn-delete",attrs:{_hid:2073,_fid:r},on:{click:function(e){t.deleteOrder(i.order_id)}}},[e("text",{staticClass:"iconfont icon-btn_delete",attrs:{_hid:2074,_fid:r}})]),e("text",{staticClass:"btn-02",attrs:{_hid:2075,_fid:r},on:{click:t.toHome}},[])]):t._e(),t._ri(!(6!=i.order_status&&7!=i.order_status&&8!=i.order_status),2077,void 0!==s?s:a)?e("view",{staticClass:"btn-delete",attrs:{_hid:2077,_fid:r},on:{click:function(e){t.deleteOrder(i.order_id)}}},[e("text",{staticClass:"iconfont icon-btn_delete",attrs:{_hid:2078,_fid:r}})]):t._e()],1)],1):t._e()},1014,t._self),t._ri(!!t.more,2079)?e("view",{staticClass:"more",attrs:{_hid:2079},on:{click:t.getUserOrderList}},[]):t._e(),t._ri(!t.more,2081)?e("view",{staticClass:"nodata",attrs:{_hid:2081}},[]):t._e()],1),e("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:2083,_batrs:"img",_cid:2}}),e("ToastView",{attrs:{_hid:3085,_cid:3}})],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},cee5:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=s(e("9219"));function s(t){return t&&t.__esModule?t:{default:t}}var r={data:function(){return{userid:0,tindex:0,tabBars:[{name:"全部",id:"0"},{name:"待付款",id:"1"},{name:"待发货",id:"2"},{name:"待收货",id:"3"},{name:"待评价",id:"4"},{name:"退款售后",id:"5"}],type:"",page:1,more:0,list:[],topHeight:0,imgBaseUrl:""}},components:{uniCountdown:a.default},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl,"h5"==this.wxb.device&&(this.$data.topHeight=44)},onLoad:function(i){var e=this,a=t.getStorageSync("user_id");void 0!=a&&""!=a&&(e.$data.userid=a),void 0!=i.pid&&""!=i.pid&&t.setStorageSync("pid",i.pid),e.wxb.printLog(i),i.tabIndex&&(e.$data.tindex=i.tabIndex-0,e.$data.type=i.tabIndex-0),e.wxb.addPage(this),e.wxb.Init(i,function(t){4==e.$data.type?e.getCommentOrderList():e.getUserOrderList()})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:""==t.$data.companyName?"订单中心":t.$data.companyName,path:"/pages/mine/order/index?pid="+t.$data.userid}},methods:{cancelApply:function(t){var i=this;i.wxb.Post("/shop/api.order/cancelOrder",{order_id:t},function(t){i.$data.page=1,i.getUserOrderList()})},toOrderDetail:function(i){t.navigateTo({url:"./detail?order_id="+i})},toComment:function(i){t.navigateTo({url:"./comment?model="+JSON.stringify(i)})},toLogistics:function(i){console.log("order_id=>"+i),t.navigateTo({url:"./logistics?order_id="+i})},toHome:function(){t.reLaunch({url:"/pages/index/index"})},toRefund:function(i){t.navigateTo({url:"./refund/index?order_id="+i})},toCancel:function(t){var i=this;i.wxb.Post("/shop/api.order/cancelOrder",{order_id:t},function(t){i.$data.page=1,i.getUserOrderList()})},toConfirmOrder:function(t){var i=this;i.wxb.Post("/shop/api.order/confirmOrder",{order_id:t},function(t){i.$data.page=1,i.getUserOrderList()})},deleteOrder:function(t){var i=this;i.wxb.Post("/shop/api.order/delOrder",{order_id:t},function(t){i.$data.page=1,i.getUserOrderList()})},getUserOrderList:function(t){var i=this,e=i.$data.page,a=i.$data.list;1==e&&(a=[]),i.wxb.Post("/shop/api.order/index",{type:i.$data.type,page:i.$data.page},function(t){for(var e in t.list)a.push(t.list[e]);i.$data.list=a,i.$data.more=t.isMore,i.$data.page+=1,console.log(a)})},tapTabListener:function(t){this.$data.type=t,this.$data.page=1,4==t?this.getCommentOrderList():this.getUserOrderList()},getCommentOrderList:function(t){var i=this,e=i.$data.page,a=i.$data.list;1==e&&(a=[]),i.wxb.Post("/shop/api.order/getCommnet",{page:i.$data.page},function(t){for(var e in t.list)a.push(t.list[e]);i.$data.list=a,i.$data.more=t.isMore,i.$data.page+=1,console.log(a)})}}};i.default=r}).call(this,e("c11b")["default"])},e610:function(t,i,e){"use strict";e.r(i);var a=e("a246"),s=e("79e5");for(var r in s)"default"!==r&&function(t){e.d(i,t,function(){return s[t]})}(r);e("117b");var d=e("2877"),o=Object(d["a"])(s["default"],a["a"],a["b"],!1,null,null,null);i["default"]=o.exports},fa5f:function(t,i,e){}},[["6144","common/runtime","common/vendor"]]]);