(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/userInfo"],{"0193":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){var t=this.getDate({format:!0});return{userInfo:{birthday:"2008-08-08"},face:"",nickname:"",birthday:"",sex:0,sexArray:["保密","男","女"],end_date:t}},onLoad:function(t){console.log(this.$data.end_date);var a=this;a.wxb.addPage(this),a.wxb.Init(t,function(t){a.getUserInfo()})},onUnload:function(){this.wxb.removePage()},methods:{getUserInfo:function(t){var a=this;a.wxb.Post("/shop/api.user/info",{},function(t){a.$data.userInfo=t,a.$data.face=t.face,a.$data.nickname=t.nickname})},chooseImageListener:function(){var a=this;t.chooseImage({count:1,sizeType:["compressed"],success:function(e){t.uploadFile({url:a.wxb.shopUrl+"/shop/api.upload/imageUpload",fileType:"image",filePath:e.tempFilePaths[0],name:"file",success:function(e){var s=JSON.parse(e.data);console.log(s),200==e.statusCode&&200==s.code?(a.$data.face=s.data.img_url,console.log(a.$data.face)):t.showModal({title:"提示",content:"上传失败",showCancel:!1})},fail:function(a){t.showModal({title:"提示",content:"上传失败",showCancel:!1})},complete:function(){t.hideToast()}})}})},getDate:function(t){var a=new Date,e=a.getFullYear(),s=a.getMonth()+1,n=a.getDate();return s=s>9?s:"0"+s,n=n>9?n:"0"+n,"".concat(e,"-").concat(s,"-").concat(n)},dateChangeListener:function(t){var a=this.$data.userInfo,e=t.detail.value;a.birthday=e,this.$data.userInfo=a,this.$data.birthday=e},sexChangeListener:function(t){console.log(t);var a=this.$data.userInfo,e=t.detail.value;a.sex=e+"",this.$data.userInfo=a,this.$data.sex=e},submitUserInfo:function(a){var e=this;e.wxb.Post("/shop/api.user/syncUserInfo",{nickname:e.$data.nickname,face:e.$data.face,sex:e.$data.sex,birthday:e.$data.birthday},function(a){e.$showToast({show:!0,content:"修改信息成功"}),t.navigateBack({})})}}};a.default=e}).call(this,e("5486")["default"])},1917:function(t,a,e){"use strict";var s=e("6738"),n=e.n(s);n.a},2727:function(t,a,e){"use strict";e("2346");var s=i(e("5a2c")),n=i(e("3a53"));function i(t){return t&&t.__esModule?t:{default:t}}s.default.mpType="page";var r=new n.default(s.default);r.$mount()},"3ee5":function(t,a,e){"use strict";e.r(a);var s=e("0193"),n=e.n(s);for(var i in s)"default"!==i&&function(t){e.d(a,t,function(){return s[t]})}(i);a["default"]=n.a},"5a2c":function(t,a,e){"use strict";e.r(a);var s=e("e085"),n=e("3ee5");for(var i in n)"default"!==i&&function(t){e.d(a,t,function(){return n[t]})}(i);e("1917");var r=e("2877"),o=Object(r["a"])(n["default"],s["a"],s["b"],!1,null,null,null);a["default"]=o.exports},6738:function(t,a,e){},e085:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("view",{staticClass:"userInfo-box",attrs:{_hid:0}},[e("form",{attrs:{_hid:1},on:{submit:t.submitUserInfo}},[e("view",{staticClass:"user-menu-item",staticStyle:{height:"90px"},attrs:{_hid:2},on:{click:t.chooseImageListener}},[e("view",{staticClass:"lt",attrs:{_hid:3}},[]),e("view",{staticClass:"rt",attrs:{_hid:5}},[e("image",{staticClass:"face",attrs:{src:t.face,_hid:6,_batrs:"src"}}),e("text",{staticClass:"arrow iconfont icon-btn_arrowr",attrs:{_hid:7}})])]),e("view",{staticClass:"user-menu-item",attrs:{_hid:8}},[e("view",{staticClass:"lt",staticStyle:{flex:"none"},attrs:{_hid:9}},[]),e("view",{staticClass:"rt",staticStyle:{flex:"1",display:"flex"},attrs:{_hid:11}},[e("input",{staticClass:"input",attrs:{bindinput:"nameChangeListener",name:"name",value:t.nickname,maxlength:"7",_hid:12,_batrs:"value"}}),e("text",{staticClass:"arrow iconfont icon-btn_arrowr",attrs:{_hid:13}})])]),e("view",{staticClass:"user-menu-item",attrs:{_hid:14}},[e("view",{staticClass:"lt",attrs:{_hid:15}},[]),e("view",{staticClass:"rt",attrs:{_hid:17}},[e("picker",{staticStyle:{width:"150px","text-align":"right"},attrs:{mode:"date",end:t.end_date,value:t.userInfo.birthday,_hid:18,_batrs:"end,value"},on:{change:t.dateChangeListener}},[e("text",{attrs:{_hid:19}},[t._v(t._s(t.userInfo.birthday),20)])]),e("text",{staticClass:"arrow iconfont icon-btn_arrowr",attrs:{_hid:21}})],1)]),e("view",{staticClass:"user-menu-item",attrs:{_hid:22}},[e("view",{staticClass:"lt",attrs:{_hid:23}},[]),e("view",{staticClass:"rt",attrs:{_hid:25}},[e("picker",{staticStyle:{width:"150px","text-align":"right"},attrs:{value:t.sex,range:t.sexArray,_hid:26,_batrs:"value,range"},on:{change:t.sexChangeListener}},[e("text",{attrs:{_hid:27}},[t._v(t._s(0==t.userInfo.sex?"保密":1==t.userInfo.sex?"男":"女"),28)])]),e("text",{staticClass:"arrow iconfont icon-btn_arrowr",attrs:{_hid:29}})],1)]),e("button",{staticClass:"btn-save",staticStyle:{background:"#00b5de"},attrs:{"form-type":"submit",_hid:30}},[])],1)],1)},n=[];e.d(a,"a",function(){return s}),e.d(a,"b",function(){return n})}},[["2727","common/runtime","common/vendor"]]]);