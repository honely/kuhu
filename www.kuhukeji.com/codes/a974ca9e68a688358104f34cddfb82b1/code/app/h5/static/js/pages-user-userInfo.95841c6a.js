(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-userInfo"],{"32cc":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){var t=this.getDate({format:!0});return{userInfo:{birthday:"2008-08-08"},face:"",nickname:"",birthday:"",sex:0,sexArray:["保密","男","女"],end_date:t}},onLoad:function(t){console.log(this.$data.end_date);var e=this;e.wxb.addPage(this),e.wxb.Init(t,function(t){e.getUserInfo()})},onUnload:function(){this.wxb.removePage()},methods:{getUserInfo:function(t){var e=this;e.wxb.Post("/shop/api.user/info",{},function(t){e.$data.userInfo=t,e.$data.face=t.face,e.$data.nickname=t.nickname})},chooseImageListener:function(){var t=this;uni.chooseImage({count:1,sizeType:["compressed"],success:function(e){uni.uploadFile({url:t.wxb.shopUrl+"/shop/api.upload/imageUpload",fileType:"image",filePath:e.tempFilePaths[0],name:"file",success:function(e){var a=JSON.parse(e.data);console.log(a),200==e.statusCode&&200==a.code?(t.$data.face=a.data.img_url,console.log(t.$data.face)):uni.showModal({title:"提示",content:"上传失败",showCancel:!1})},fail:function(t){uni.showModal({title:"提示",content:"上传失败",showCancel:!1})},complete:function(){uni.hideToast()}})}})},getDate:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(a,"-").concat(n,"-").concat(i)},dateChangeListener:function(t){var e=this.$data.userInfo,a=t.detail.value;e.birthday=a,this.$data.userInfo=e,this.$data.birthday=a},sexChangeListener:function(t){console.log(t);var e=this.$data.userInfo,a=t.detail.value;e.sex=a+"",this.$data.userInfo=e,this.$data.sex=a},submitUserInfo:function(t){var e=this;e.wxb.Post("/shop/api.user/syncUserInfo",{nickname:e.$data.nickname,face:e.$data.face,sex:e.$data.sex,birthday:e.$data.birthday},function(t){e.$showToast({show:!0,content:"修改信息成功"}),uni.navigateBack({})})}}};e.default=n},"3ee5":function(t,e,a){"use strict";a.r(e);var n=a("32cc"),i=a.n(n);for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);e["default"]=i.a},4041:function(t,e,a){"use strict";var n=a("dff6"),i=a.n(n);i.a},"5a2c":function(t,e,a){"use strict";a.r(e);var n=a("ad7a"),i=a("3ee5");for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);a("4041");var o=a("2877"),c=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,"3acd3c42",null);e["default"]=c.exports},ad7a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"userInfo-box"},[a("v-uni-form",{on:{submit:function(e){e=t.$handleEvent(e),t.submitUserInfo(e)}}},[a("v-uni-view",{staticClass:"user-menu-item",staticStyle:{height:"90px"},on:{click:function(e){e=t.$handleEvent(e),t.chooseImageListener(e)}}},[a("v-uni-view",{staticClass:"lt"},[t._v("头像")]),a("v-uni-view",{staticClass:"rt"},[a("v-uni-image",{staticClass:"face",attrs:{src:t.face}}),a("v-uni-text",{staticClass:"arrow iconfont icon-btn_arrowr"})],1)],1),a("v-uni-view",{staticClass:"user-menu-item"},[a("v-uni-view",{staticClass:"lt",staticStyle:{flex:"none"}},[t._v("昵称")]),a("v-uni-view",{staticClass:"rt",staticStyle:{flex:"1",display:"flex"}},[a("v-uni-input",{staticClass:"input",attrs:{bindinput:"nameChangeListener",name:"name",value:t.nickname,maxlength:"7"}}),a("v-uni-text",{staticClass:"arrow iconfont icon-btn_arrowr"})],1)],1),a("v-uni-view",{staticClass:"user-menu-item"},[a("v-uni-view",{staticClass:"lt"},[t._v("生日")]),a("v-uni-view",{staticClass:"rt"},[a("v-uni-picker",{staticStyle:{width:"150px","text-align":"right"},attrs:{mode:"date",end:t.end_date,value:t.userInfo.birthday},on:{change:function(e){e=t.$handleEvent(e),t.dateChangeListener(e)}}},[a("v-uni-text",{},[t._v(t._s(t.userInfo.birthday))])],1),a("v-uni-text",{staticClass:"arrow iconfont icon-btn_arrowr"})],1)],1),a("v-uni-view",{staticClass:"user-menu-item"},[a("v-uni-view",{staticClass:"lt"},[t._v("性别")]),a("v-uni-view",{staticClass:"rt"},[a("v-uni-picker",{staticStyle:{width:"150px","text-align":"right"},attrs:{value:t.sex,range:t.sexArray},on:{change:function(e){e=t.$handleEvent(e),t.sexChangeListener(e)}}},[a("v-uni-text",[t._v(t._s(0==t.userInfo.sex?"保密":1==t.userInfo.sex?"男":"女"))])],1),a("v-uni-text",{staticClass:"arrow iconfont icon-btn_arrowr"})],1)],1),a("v-uni-button",{staticClass:"btn-save",staticStyle:{background:"#00b5de"},attrs:{"form-type":"submit"}},[t._v("保存")])],1)],1)},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},d33d:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".user-menu-item[data-v-3acd3c42]{width:100%;height:50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:#fff;border-bottom:1px solid #f2f4f5;padding:0 15px;position:relative}.user-menu-item .btn-sync[data-v-3acd3c42]{position:absolute;top:0;left:0;right:0;bottom:0;background:hsla(0,0%,100%,0)}.user-menu-item .btn-sync[data-v-3acd3c42]:after{border:none}.user-menu-item .lt[data-v-3acd3c42]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;color:#2d3133;font-size:14px}.user-menu-item .rt[data-v-3acd3c42]{height:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:14px;color:#c2c8cc;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.user-menu-item .rt .input[data-v-3acd3c42]{height:30px;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:right;margin-left:10px}.user-menu-item .rt .face[data-v-3acd3c42]{width:60px;height:60px;border-radius:8px}.user-menu-item .rt .arrow[data-v-3acd3c42]{color:#c2c8cc;margin-left:10px}.btn-save[data-v-3acd3c42]{width:92%;height:45px;line-height:45px;margin:50px 4% 15px 4%;background:#fff;color:#fff;font-size:16px}",""])},dff6:function(t,e,a){var n=a("d33d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("31573fc8",n,!0,{sourceMap:!1,shadowMode:!1})}}]);