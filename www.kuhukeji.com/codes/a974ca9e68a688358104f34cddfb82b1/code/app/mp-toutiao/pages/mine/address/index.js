(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/address/index"],{"13ed":function(t,i,a){"use strict";a("2346");var e=d(a("d848")),s=d(a("3a53"));function d(t){return t&&t.__esModule?t:{default:t}}e.default.mpType="page";var n=new s.default(e.default);n.$mount()},"3a59":function(t,i,a){"use strict";var e=a("a9fc"),s=a.n(e);s.a},"42ae":function(t,i,a){"use strict";a.r(i);var e=a("ad01"),s=a.n(e);for(var d in e)"default"!==d&&function(t){a.d(i,t,function(){return e[t]})}(d);i["default"]=s.a},"9bea":function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("scroll-view",{staticStyle:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0"},attrs:{"scroll-y":"true",_hid:0}},[a("view",{staticClass:"btn-add-address",attrs:{"data-type":"0",_hid:1},on:{click:t.editAddressListener}},[a("text",{staticClass:"add-icon iconfont icon-btn_add1",attrs:{_hid:2}}),a("text",{staticClass:"add-hint",attrs:{_hid:3}},[])]),a("view",{staticClass:"address-list",attrs:{_hid:5}},[t._l(t.list,function(i,e,s){var d=void 0!==s?s:e;return a("view",{key:e,staticClass:"item-address",attrs:{_hid:6,_fid:d,_fk:"i"}},[a("view",{staticClass:"lt-addr",attrs:{_hid:7,_fid:d}},[a("view",{staticClass:"u-info",attrs:{_hid:8,_fid:d}},[a("text",{attrs:{_hid:9,_fid:d}},[t._v(t._s(i.name)+" "+t._s(i.mobile),10,d)]),t._ri(!!i.is_default,11,void 0!==s?s:e)?a("text",{staticClass:"state",attrs:{_hid:11,_fid:d}},[]):t._e()]),a("view",{staticClass:"u-addr",attrs:{_hid:13,_fid:d}},[t._v(t._s(i.address),14,d)])]),a("view",{staticClass:"rt-addr",attrs:{_hid:15,_fid:d}},[a("text",{staticClass:"iconfont icon-btn_edit",attrs:{"data-type":"1","data-index":e,_hid:16,_fid:d,_batrs:"data-index"},on:{click:t.editAddressListener}}),a("text",{staticClass:"iconfont icon-btn_delete",attrs:{"data-index":e,_hid:17,_fid:d,_batrs:"data-index"},on:{click:t.showDeleteListener}})])])},6,t._self),t._ri(!!t.more,18)?a("view",{staticClass:"more",attrs:{bindtap:"loadMore",_hid:18}},[]):t._e(),t._ri(!t.more,20)?a("view",{staticClass:"nodata",attrs:{_hid:20}},[]):t._e(),a("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:22,_batrs:"img",_cid:0}}),a("ToastView",{attrs:{_hid:1024,_cid:1}})],1),t._ri(!!t.edit_addr,2026)?a("view",{staticClass:"edit-address",attrs:{_hid:2026}},[a("form",{attrs:{_hid:2027},on:{submit:t.submitUserAddress}},[a("view",{staticClass:"e-tit",attrs:{_hid:2028}},[a("text",{staticStyle:{flex:"1"},attrs:{_hid:2029}},[t._v(t._s(0==t.type?"新增地址":"修改地址"),2030)]),a("text",{staticClass:"iconfont icon-btn_close_black",attrs:{_hid:2031},on:{click:t.closeEditListener}})]),a("view",{staticClass:"e-cont",attrs:{_hid:2032}},[a("view",{staticClass:"item-edit",attrs:{_hid:2033}},[a("view",{staticClass:"ie-tit",attrs:{_hid:2034}},[]),a("input",{staticClass:"ie-input",attrs:{name:"name",value:t.editAddr?t.editAddr.name:"",placeholder:"请输入身份证真实姓名","placeholder-style":"color:#CCCCCC;font-size:16px;",_hid:2036,_batrs:"value"}})]),a("view",{staticClass:"item-edit",attrs:{_hid:2037}},[a("view",{staticClass:"ie-tit",attrs:{_hid:2038}},[]),a("input",{staticClass:"ie-input",attrs:{name:"mobile",value:t.editAddr?t.editAddr.mobile:"",placeholder:"请输入联系电话","placeholder-style":"color:#CCCCCC;font-size:16px;",_hid:2040,_batrs:"value"}})]),a("view",{staticClass:"item-edit",attrs:{_hid:2041},on:{click:t.showCitySelectDialog}},[a("view",{staticClass:"ie-tit",attrs:{_hid:2042}},[]),a("view",{staticClass:"ie-input",style:"color:"+(t.addressDesc?"#000000;":"#CCCCCC;"),attrs:{_hid:2044}},[t._v(t._s(t.addressDesc?t.addressDesc:"请选择省 城市 区县"),2045)]),a("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:2046}})]),a("view",{staticClass:"item-edit",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:2047}},[a("view",{staticClass:"ie-tit",attrs:{_hid:2048}},[]),a("input",{staticClass:"ie-input",attrs:{name:"street",maxlength:"60",value:t.editAddr?t.editAddr.street:"",placeholder:"请填写详细地址，5-60个字","placeholder-style":"color:#CCCCCC;font-size:16px;",_hid:2050,_batrs:"value"}})])]),a("view",{staticClass:"default-cont",attrs:{_hid:2051}},[a("text",{staticClass:"iconfont icon-radio",class:1==t.isDefault?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==t.isDefault?"#ED3005":"#999999")+";",attrs:{_hid:2052},on:{click:t.onDefaultListener}}),a("text",{staticStyle:{"margin-left":"8px",color:"#797D80","font-size":"14px","margin-top":"2px"},attrs:{_hid:2053}},[])]),a("button",{staticClass:"btn-save",attrs:{"form-type":"submit",_hid:2055}},[])],1)],1):t._e(),a("dialog-view",{attrs:{title:"确定删除该地址？",btnCancel:"确定",btnSure:"再想想",_hid:2057,_cid:2},on:{cancelEvent:t.cancelListener,sureEvent:t.sureListener}}),t._ri(!!t.cityShowFlag,3059)?a("view",{staticClass:"mask",staticStyle:{"z-index":"999"},attrs:{_hid:3059}},[a("view",{staticClass:"time-listBox",attrs:{_hid:3060}},[a("view",{staticClass:"item-time",attrs:{_hid:3061}},[a("view",{staticClass:"date-cancel",attrs:{_hid:3062},on:{click:t.hideCitySelectDialog}},[]),a("view",{staticClass:"date-title",attrs:{_hid:3064}},[]),a("view",{staticClass:"date-sure",attrs:{_hid:3066},on:{click:t.sureSelectListener}},[])]),a("picker-view",{staticStyle:{width:"100%",height:"180px"},attrs:{"indicator-style":"height: 60px;",_hid:3068},on:{change:t.bindChangeListener}},[a("picker-view-column",{attrs:{_hid:3069,_cid:3}},t._l(t.province,function(i,e,s){var d=void 0!==s?s:e;return a("view",{key:e,staticClass:"picker-date",attrs:{_hid:4071,_fid:d,_fk:"i"}},[t._v(t._s(i.label),4072,d)])},4071,t._self)),a("picker-view-column",{attrs:{_hid:4073,_cid:4}},t._l(t.city,function(i,e,s){var d=void 0!==s?s:e;return a("view",{key:e,staticClass:"picker-date",attrs:{_hid:5075,_fid:d,_fk:"j"}},[t._v(t._s(i.label),5076,d)])},5075,t._self)),a("picker-view-column",{attrs:{_hid:5077,_cid:5}},t._l(t.division,function(i,e,s){var d=void 0!==s?s:e;return a("view",{key:e,staticClass:"picker-date",attrs:{_hid:6079,_fid:d,_fk:"z"}},[t._v(t._s(i.label),6080,d)])},6079,t._self))],1)],1)]):t._e()],1)},s=[];a.d(i,"a",function(){return e}),a.d(i,"b",function(){return s})},a9fc:function(t,i,a){},ad01:function(t,i,a){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){return{userid:0,isDefault:0,edit_addr:!1,more:0,list:[],index:"",type:0,editAddr:{},province:[],city:[],division:[],pIndex:0,cIndex:0,dIndex:0,province_id:"",city_id:"",division_id:"",cityShowFlag:!1,parent_id:"",addressDesc:"",deleteIndex:-1,imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(i){var a=this,e=t.getStorageSync("user_id");void 0!=e&&""!=e&&(a.$data.userid=e),void 0!=i.pid&&""!=i.pid&&t.setStorageSync("pid",i.pid),a.wxb.addPage(this),a.wxb.Init(i,function(t){a.getAddressList()})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:""==t.$data.companyName?"O2O电商小程序":t.$data.companyName,path:"/pages/index/index?pid="+t.$data.userid}},methods:{bindChangeListener:function(t){var i=this,a=t.detail.value,e=i.$data.pIndex,s=i.$data.cIndex,d=i.$data.dIndex;for(var n in a)0==n&&e!=a[n]?(e=a[n],console.log("修改省份"),i.$data.parent_id=i.$data.province[a[n]].region_id,i.getRegionList(1)):1==n&&s!=a[n]?(s=a[n],console.log("修改城市"),i.$data.parent_id=i.$data.city[a[n]].region_id,i.initDivisionInfo()):2==n&&d!=a[n]&&(d=a[n]);i.$data.pIndex=e,i.$data.cIndex=s,i.$data.dIndex=d},showCitySelectDialog:function(){this.$data.cityShowFlag=!0,this.$data.parent_id="",this.initProvinceInfo()},hideCitySelectDialog:function(){this.$data.cityShowFlag=!1},sureSelectListener:function(t){var i=this,a=i.$data.pIndex,e=i.$data.cIndex,s=i.$data.dIndex;i.$data.province_id=i.$data.province[a].region_id,i.$data.city_id=i.$data.city[e].region_id,i.$data.division_id=i.$data.division[s].region_id,i.$data.addressDesc=i.$data.province[a].label+i.$data.city[a].label+i.$data.division[a].label,i.hideCitySelectDialog(),console.log(i.$data.province),console.log("province_id=>"+i.$data.province_id),console.log("city_id=>"+i.$data.city_id),console.log("division_id=>"+i.$data.division_id)},submitUserAddress:function(t){console.log(t);var i=this,a=t.detail.value,e=a.name,s=a.mobile,d=a.street;""!=e?""!=s?0==i.$data.type?i.wxb.Post("/shop/api.address/addAddress",{name:e,mobile:s,street:d,is_default:i.$data.isDefault,province_id:i.$data.province_id,city_id:i.$data.city_id,division_id:i.$data.division_id},function(t){i.getAddressList(),i.closeEditListener()}):i.wxb.Post("/shop/api.address/editAddress",{address_id:i.$data.editAddr.address_id,name:e,mobile:s,street:d,is_default:i.$data.isDefault,province_id:i.$data.province_id,city_id:i.$data.city_id,division_id:i.$data.division_id},function(t){i.getAddressList(),i.closeEditListener()}):i.$showToast({show:!0,content:"手机号不能为空"}):i.$showToast({show:!0,content:"姓名不能为空"})},onDefaultListener:function(){0==this.$data.isDefault?this.$data.isDefault=1:this.$data.isDefault=0},editAddressListener:function(t){console.log(t);var i=t.currentTarget.dataset,a=i.type,e=i.index,s=this;console.log("type=>"+a),console.log("index=>"+e);var d=this.$data.list;this.$data.type=a,this.$data.index=e,void 0!=e&&1==a?(this.$data.editAddr=d[e],s.$data.province_id=d[e].province_id,s.$data.city_id=d[e].city_id,s.$data.division_id=d[e].division_id,this.$data.isDefault=this.$data.editAddr.is_default,this.$data.addressDesc=d[e].province+d[e].city+d[e].division):(this.$data.editAddr="",this.$data.addressDesc="",this.$data.isDefault=0);var n=this.$data.edit_addr;this.$data.edit_addr=!n},closeEditListener:function(t){this.$data.edit_addr=!1},showDeleteListener:function(t){this.$data.deleteIndex=t.currentTarget.dataset.index,this.$showDialog()},cancelListener:function(t){console.log("删除弹窗"),this.$showDialog(!1);var i=this,a=i.$data.deleteIndex;a>=0&&i.wxb.Post("/shop/api.address/delAddress",{address_id:i.$data.list[a].address_id},function(t){i.$showToast({show:!0,content:"删除地址成功"}),i.getAddressList()})},sureListener:function(t){console.log("再想想"),this.$showDialog(!1)},getAddressList:function(t){var i=this;i.wxb.Post("/shop/api.address/getIndex",{},function(t){i.$data.list=t.list})},initProvinceInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.province=i.list,t.$data.parent_id=i.list[0].region_id,t.initCityInfo()})},initCityInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.city=i.list,t.$data.parent_id=i.list[0].region_id,t.initDivisionInfo()})},initDivisionInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.division=i.list})},getRegionList:function(t){var i=this;i.wxb.Post("/shop/api.address/queryRegion",{parent_id:i.$data.parent_id},function(a){0==t?i.$data.province=a.list:1==t?(i.$data.city=a.list,i.$data.parent_id=a.list[0].region_id,i.initDivisionInfo()):2==t&&(i.$data.division=a.list)})}}};i.default=a}).call(this,a("f266")["default"])},d848:function(t,i,a){"use strict";a.r(i);var e=a("9bea"),s=a("42ae");for(var d in s)"default"!==d&&function(t){a.d(i,t,function(){return s[t]})}(d);a("3a59");var n=a("2877"),o=Object(n["a"])(s["default"],e["a"],e["b"],!1,null,null,null);i["default"]=o.exports}},[["13ed","common/runtime","common/vendor"]]]);