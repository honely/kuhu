(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/order/comment"],{"25b0":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"comment-box",attrs:{_hid:0}},[e("view",{staticClass:"cb-list",attrs:{_hid:1}},[e("view",{staticClass:"item-comment",attrs:{_hid:2}},[e("view",{staticClass:"goods-info",attrs:{_hid:3}},[e("image",{staticClass:"g-img",attrs:{src:t.model.photo,_hid:4,_batrs:"src"}}),e("view",{staticClass:"g-score",attrs:{_hid:5}},t._l(t.storeNum,function(i,a,s){var n=void 0!==s?s:a;return e("block",{key:a,attrs:{_hid:6,_fid:n,_fk:"i"}},[t._ri(!(1!=i),7,void 0!==s?s:a)?e("text",{staticClass:"icon-score iconfont icon-Star_c",staticStyle:{color:"#FFAE19"},attrs:{_hid:7,_fid:n},on:{click:function(i){t.storeNumListener(a)}}}):t._e(),t._ri(!(0!=i),8,void 0!==s?s:a)?e("text",{staticClass:"icon-score iconfont icon-Star_c",staticStyle:{color:"#eaeaea"},attrs:{_hid:8,_fid:n},on:{click:function(i){t.storeNumListener(a)}}}):t._e()])},6,t._self))]),e("view",{staticClass:"comment-cont",attrs:{_hid:9}},[e("textarea",{attrs:{placeholder:"给个好评，送你10个积分，去说点啥～",_hid:10},on:{input:t.inputChangeListener}})]),e("view",{staticClass:"comment-img",attrs:{_hid:11}},[t._l(t.list,function(i,a,s){var n=void 0!==s?s:a;return e("view",{key:a,staticClass:"model-img",attrs:{_hid:12,_fid:n,_fk:"i"}},[e("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:i,_hid:13,_fid:n,_batrs:"src"}}),e("image",{staticClass:"iv-delete",attrs:{src:t.imgBaseUrl+"/order/btn_deletePhoto@3x.png",_hid:14,_fid:n,_batrs:"src"},on:{click:function(i){t.deletePhotoListener(a)}}})])},12,t._self),t._ri(!!(t.list.length<6),15)?e("view",{staticClass:"model-img",attrs:{_hid:15}},[e("view",{staticClass:"add-img",attrs:{_hid:16},on:{click:t.addPhotoListener}},[e("view",{staticClass:"iconfont icon-btn_photo",staticStyle:{"font-size":"24px"},attrs:{_hid:17}}),e("view",{staticStyle:{"margin-top":"10px"},attrs:{_hid:18}},[])])]):t._e()],1)]),e("view",{staticStyle:{width:"100%",height:"70px"},attrs:{_hid:20}}),e("view",{staticClass:"bottom-box",attrs:{_hid:21}},[e("button",{staticClass:"submit-comment",attrs:{_hid:22},on:{click:t.submitCommentListener}},[])],1)]),e("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:24,_batrs:"img",_cid:0}}),e("ToastView",{attrs:{_hid:1026,_cid:1}})],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},2835:function(t,i,e){},"61f3":function(t,i,e){"use strict";var a=e("2835"),s=e.n(a);s.a},"8e14":function(t,i,e){"use strict";e.r(i);var a=e("25b0"),s=e("9092");for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);e("61f3");var o=e("2877"),r=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,null,null);i["default"]=r.exports},9092:function(t,i,e){"use strict";e.r(i);var a=e("d983"),s=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);i["default"]=s.a},"9cbc":function(t,i,e){"use strict";e("2346");var a=n(e("8e14")),s=n(e("3a53"));function n(t){return t&&t.__esModule?t:{default:t}}a.default.mpType="page";var o=new s.default(a.default);o.$mount()},d983:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{model:"",list:[],storeNum:[0,0,0,0,0],rankNum:0,content:"",imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(t){var i=this;i.wxb.printLog(t),t.tabIndex&&(i.$data.tindex=t.tabIndex-0,i.$data.type=t.tabIndex-0),i.wxb.addPage(this),i.wxb.Init(t,function(e){var a=JSON.parse(t.model);i.$data.model=a})},onUnload:function(){this.wxb.removePage()},methods:{inputChangeListener:function(t){this.$data.content=t.detail.value},submitCommentListener:function(i){var e=this;""!=e.$data.content||0!=e.$data.list.length?e.wxb.Post("/shop/api.order/setOrderComment",{comment_id:e.$data.model.comment_id,content:e.$data.content,photos:JSON.stringify(e.$data.list),rank:e.$data.rankNum},function(i){t.redirectTo({url:"./index"})}):e.$showToast({show:!0,content:"评论内容不能为空"})},storeNumListener:function(t){var i=[];for(var e in this.$data.rankNum=t-0+1,this.$data.storeNum)this.$data.storeNum[e]=e<=t?1:0,i.push(this.$data.storeNum[e]);this.$data.storeNum=i},deletePhotoListener:function(t){var i=this.$data.list;i.splice(t,1),this.$data.list=i},addPhotoListener:function(i){var e=this;e.$data.list.length<6&&t.chooseImage({count:1,sizeType:["compressed"],success:function(i){console.log(i),t.uploadFile({url:e.wxb.shopUrl+"/shop/api.upload/imageUpload",fileType:"image",filePath:i.tempFilePaths[0],name:"file",success:function(i){var a=JSON.parse(i.data);console.log(a),200==i.statusCode&&200==a.code?(e.$data.list.push(a.data.img_url),console.log(e.$data.list)):t.showModal({title:"提示",content:"上传失败",showCancel:!1})},fail:function(i){t.showModal({title:"提示",content:"上传失败",showCancel:!1})},complete:function(){t.hideToast()}})}})}}};i.default=e}).call(this,e("f266")["default"])}},[["9cbc","common/runtime","common/vendor"]]]);