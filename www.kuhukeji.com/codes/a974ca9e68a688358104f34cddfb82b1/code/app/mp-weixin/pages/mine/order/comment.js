(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/order/comment"],{"25b0":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"comment-box"},[a("view",{staticClass:"cb-list"},[a("view",{staticClass:"item-comment"},[a("view",{staticClass:"goods-info"},[a("image",{staticClass:"g-img",attrs:{src:t.model.photo}}),a("view",{staticClass:"g-score"},t._l(t.storeNum,function(e,i){return a("block",{key:i},[1==e?a("text",{staticClass:"icon-score iconfont icon-Star_c",staticStyle:{color:"#FFAE19"},attrs:{eventid:"349a51c6-0-"+i},on:{click:function(e){t.storeNumListener(i)}}}):t._e(),0==e?a("text",{staticClass:"icon-score iconfont icon-Star_c",staticStyle:{color:"#eaeaea"},attrs:{eventid:"349a51c6-1-"+i},on:{click:function(e){t.storeNumListener(i)}}}):t._e()])}))]),a("view",{staticClass:"comment-cont"},[a("textarea",{attrs:{placeholder:"给个好评，送你10个积分，去说点啥～",eventid:"349a51c6-2"},on:{input:t.inputChangeListener}})]),a("view",{staticClass:"comment-img"},[t._l(t.list,function(e,i){return a("view",{key:i,staticClass:"model-img"},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e}}),a("image",{staticClass:"iv-delete",attrs:{src:t.imgBaseUrl+"/order/btn_deletePhoto@3x.png",eventid:"349a51c6-3-"+i},on:{click:function(e){t.deletePhotoListener(i)}}})])}),t.list.length<6?a("view",{staticClass:"model-img"},[a("view",{staticClass:"add-img",attrs:{eventid:"349a51c6-4"},on:{click:t.addPhotoListener}},[a("view",{staticClass:"iconfont icon-btn_photo",staticStyle:{"font-size":"24px"}}),a("view",{staticStyle:{"margin-top":"10px"}},[t._v("添加图片")])])]):t._e()],2)]),a("view",{staticStyle:{width:"100%",height:"70px"}}),a("view",{staticClass:"bottom-box"},[a("button",{staticClass:"submit-comment",attrs:{eventid:"349a51c6-5"},on:{click:t.submitCommentListener}},[t._v("提交评价")])],1)]),a("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",mpcomid:"349a51c6-0"}}),a("ToastView",{attrs:{mpcomid:"349a51c6-1"}})],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},2835:function(t,e,a){},"61f3":function(t,e,a){"use strict";var i=a("2835"),n=a.n(i);n.a},"8e14":function(t,e,a){"use strict";a.r(e);var i=a("25b0"),n=a("9092");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("61f3");var s=a("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},9092:function(t,e,a){"use strict";a.r(e);var i=a("d983"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"9cbc":function(t,e,a){"use strict";a("2346");var i=o(a("b0ce")),n=o(a("8e14"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},d983:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{model:"",list:[],storeNum:[0,0,0,0,0],rankNum:0,content:"",imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(t){var e=this;e.wxb.printLog(t),t.tabIndex&&(e.$data.tindex=t.tabIndex-0,e.$data.type=t.tabIndex-0),e.wxb.addPage(this),e.wxb.Init(t,function(a){var i=JSON.parse(t.model);e.$data.model=i})},onUnload:function(){this.wxb.removePage()},methods:{inputChangeListener:function(t){this.$data.content=t.detail.value},submitCommentListener:function(e){var a=this;""!=a.$data.content||0!=a.$data.list.length?a.wxb.Post("/shop/api.order/setOrderComment",{comment_id:a.$data.model.comment_id,content:a.$data.content,photos:JSON.stringify(a.$data.list),rank:a.$data.rankNum},function(e){t.redirectTo({url:"./index"})}):a.$showToast({show:!0,content:"评论内容不能为空"})},storeNumListener:function(t){var e=[];for(var a in this.$data.rankNum=t-0+1,this.$data.storeNum)this.$data.storeNum[a]=a<=t?1:0,e.push(this.$data.storeNum[a]);this.$data.storeNum=e},deletePhotoListener:function(t){var e=this.$data.list;e.splice(t,1),this.$data.list=e},addPhotoListener:function(e){var a=this;a.$data.list.length<6&&t.chooseImage({count:1,sizeType:["compressed"],success:function(e){console.log(e),t.uploadFile({url:a.wxb.shopUrl+"/shop/api.upload/imageUpload",fileType:"image",filePath:e.tempFilePaths[0],name:"file",success:function(e){var i=JSON.parse(e.data);console.log(i),200==e.statusCode&&200==i.code?(a.$data.list.push(i.data.img_url),console.log(a.$data.list)):t.showModal({title:"提示",content:"上传失败",showCancel:!1})},fail:function(e){t.showModal({title:"提示",content:"上传失败",showCancel:!1})},complete:function(){t.hideToast()}})}})}}};e.default=a}).call(this,a("543d")["default"])}},[["9cbc","common/runtime","common/vendor"]]]);