(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/goods/detail"],{"2dc2":function(t,e,a){},"3a1f":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(a("540a")),s=o(a("8972"));function o(t){return t&&t.__esModule?t:{default:t}}var n={data:function(){return{userid:0,index:0,tabBars:[{name:"商品",id:"0"},{name:"评价",id:"1"},{name:"推荐",id:"2"}],tData:{type:1,pbottom:0,ptop:22,mtop:0,data:{icon:"icon_quan",title:"领取优惠券",more:"更多",link:"/pages/index/goods/coupon?goods_id="}},skuFlag:!1,specs:[],comment:[],more:0,page:1,detail:{},goods_id:"",comment_type:1,currIndex:1,likes:[],likePage:1,likeMore:0,buyType:0,imgBaseUrl:"",customerNum:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},components:{goodsDescribe:s.default,skuDialog:i.default},onLoad:function(e){var a=this,i=t.getStorageSync("user_id");void 0!=i&&""!=i&&(a.$data.userid=i),void 0!=e.pid&&""!=e.pid&&t.setStorageSync("pid",e.pid),a.wxb.addPage(this),a.wxb.Init(e,function(t){a.$data.customerNum=t.info.tel,void 0!=e.goods_id&&(a.$data.goods_id=e.goods_id,a.getGoodsDetail())})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:t.$data.detail&&""!=t.$data.detail.goods_name?t.$data.detail.goods_name:"商品详情",path:"/pages/index/goods/detail?goods_id="+t.$data.goods_id+"&pid="+t.$data.userid}},methods:{toCallPhone:function(e){var a=this,i=a.$data.customerNum;""!=i?t.makePhoneCall({phoneNumber:i}):t.showToast({title:"请先配置"})},toHomeListener:function(e){t.reLaunch({url:"/pages/index/index"})},showSkuDialogListener:function(t){this.$data.skuFlag=!0},hideSkuDialogListener:function(t){this.$data.skuFlag=!1},sureAddGoodsListener:function(e){var a=this,i=e.detail;if(0==this.$data.buyType)void 0!=i.goodsNum&&void 0!=i.sku&&a.wxb.Post("/shop/api.Cart/addCart",{goods_id:a.$data.goods_id,num:i.goodsNum,spec_key:i.sku},function(t){a.$showToast({show:!0,content:"添加购物车成功"}),a.hideSkuDialogListener()});else if(1==this.$data.buyType){console.log("goodsNum=>"+i.goodsNum+";skuStr=>"+i.sku),console.log(i.sku_msg);var s=i.sku_msg,o="";for(var n in s)o+=s[n]+(n<s.length-1?"-":"");t.navigateTo({url:"./buy?goods_id="+a.$data.goods_id+"&num="+i.goodsNum+"&spec_key="+i.sku+"&sku_desc="+o}),a.hideSkuDialogListener()}},getLikeGoodsList:function(){var t=this,e=t.$data.likePage,a=t.$data.likes;1==e&&(a=[]),t.$data.detail&&t.wxb.Post("/shop/api.goods/index",{page:t.$data.likePage,p_cat_id:0},function(e){for(var i in e.list)a.push(e.list[i]);t.$data.likes=a,t.$data.likePage+=1,t.$data.likeMore=e.isMore})},buyGoodsListener:function(t){var e=this;e.showSkuDialogListener(),this.$data.buyType=1},addCartListener:function(t){var e=this;e.showSkuDialogListener(),this.$data.buyType=0},bannerChangeListener:function(t){this.$data.currIndex=t.detail.current+1},commentTypeListener:function(t){var e=t.currentTarget.dataset.type;this.$data.comment_type=e,this.$data.page=1,this.getGoodsDetail()},tapTab:function(t){console.log(t),this.$data.index=t,2==t&&(this.$data.likePage=1,this.getLikeGoodsList())},catchTouchMove:function(t){},getGoodsDetail:function(t){var e=this,a=e.$data.comment,i=e.$data.page;1==i&&(a=[]),e.wxb.Post("/shop/api.goods/detail",{goods_id:e.$data.goods_id,comment_type:e.$data.comment_type,page:e.$data.page},function(t){"baidu"==e.wxb.device&&swan.setPageInfo&&swan.setPageInfo({title:t.seo.title?"":t.seo.title,keywords:t.seo.keywords?"":t.seo.keywords,description:t.seo.description?"":t.seo.description,releaseDate:t.seo.releaseDate?"":t.seo.releaseDate,image:t.seo.image?"":t.seo.image,success:function(){console.log("百度SEO信息设置完成")}});var s=e.$data.tData.data.link;for(var o in e.$data.tData.data.link=s+e.$data.goods_id,t.comment.comment)a.push(t.comment.comment[o]);if(1==i){e.$data.detail=t.detail;var n=JSON.parse(JSON.stringify(t.detail)),c=[];if(1==n.sku_type){for(var d in n.spec){var l=[];for(var o in n.spec[d])n.spec[d][o].select="item-spec-nor",l.push(n.spec[d][o]);c.push({name:d,list:l})}e.$data.specs=c,e.wxb.printLog(c)}else 0==t.detail.goods_num?e.$data.btnMsg="库存不足":e.$data.btnMsg="确定"}e.$data.isMore=t.comment.isMore,e.$data.comment=a,e.$data.page+=1})}}};e.default=n}).call(this,a("543d")["default"])},"5c5c":function(t,e,a){"use strict";a.r(e);var i=a("3a1f"),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=s.a},"6e24":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"goods-detail-box"},[a("tab-view",{attrs:{type:2,tabBars:t.tabBars,eventid:"18cd95aa-0",mpcomid:"18cd95aa-0"},on:{tapTab:t.tapTab}}),0==t.index?a("block",[a("view",{staticClass:"goods-video-box"},[t._e(),a("swiper",{staticStyle:{height:"100%"},attrs:{circular:"true",interval:"3000",duration:"500",autoplay:"true",eventid:"18cd95aa-1"},on:{change:t.bannerChangeListener}},t._l(t.detail.photos,function(t,e){return a("swiper-item",{key:e,attrs:{mpcomid:"18cd95aa-3-"+e}},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t}})])})),a("view",{staticClass:"share-box"},[a("button",{staticClass:"btn-share",attrs:{"open-type":"share"}}),a("text",{staticClass:"iconfont icon-btn_share",staticStyle:{color:"#fff"}})],1),t.detail&&t.detail.photos&&t.detail.photos.length>0?a("view",{staticClass:"dot-bg"},[t._v(t._s(t.currIndex)+"/"+t._s(t.detail.photos?t.detail.photos.length:0))]):t._e()],1),a("view",{staticClass:"goods-info"},[a("view",{staticClass:"goods-name"},[t._v(t._s(t.detail.goods_name?t.detail.goods_name:""))]),a("view",{staticClass:"goods-price"},[a("text",{staticStyle:{color:"#ED3005","font-size":"16px"}},[t._v("¥")]),a("text",{staticStyle:{color:"#ED3005","font-size":"32px"}},[t._v(t._s(t.detail.shop_price?t.detail.shop_price:"0.00"))]),a("text",{staticStyle:{color:"#999999","font-size":"14px","margin-left":"8px"}},[t._v("门市价")]),a("text",{staticStyle:{color:"#999999","font-size":"14px","margin-left":"4px","text-decoration":"line-through"}},[t._v("¥"+t._s(t.detail.market_price?t.detail.market_price:"0.00"))])]),a("view",{staticClass:"goods-desc"},[a("view",{staticClass:"item-desc"},[a("text",{staticStyle:{color:"#666666"}},[t._v("快递：")]),a("text",[t._v(t._s(t.detail&&0==t.detail.is_free_shipping?t.detail.shipping_price+"元":"免费"))])]),a("view",{staticClass:"item-desc"},[a("text",{staticStyle:{color:"#666666"}},[t._v("还剩：")]),a("text",[t._v(t._s(t.detail.goods_num?t.detail.goods_num:"0"))])]),a("view",{staticClass:"item-desc"},[a("text",{staticStyle:{color:"#666666"}},[t._v("已购买：")]),a("text",[t._v(t._s(t.detail.sales_sum?t.detail.sales_sum:"0"))])])])]),1==t.detail.prom_type?a("view",{staticClass:"actity-box"},[a("view",{staticClass:"act-lt"},[a("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png"}}),a("text",[t._v("砍价活动")])]),a("view",{staticClass:"act-rt",attrs:{eventid:"18cd95aa-2"},on:{click:function(e){t.$linkListener("../bargain/list")}}},[a("text",[t._v("立即前往")])])]):t._e(),2==t.detail.prom_type?a("view",{staticClass:"actity-box"},[a("view",{staticClass:"act-lt"},[a("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png"}}),a("text",[t._v("拼团速购")])]),a("view",{staticClass:"act-rt",attrs:{eventid:"18cd95aa-3"},on:{click:function(e){t.$linkListener("../pintuan/list")}}},[a("text",[t._v("立即前往")])])]):t._e(),3==t.detail.prom_type?a("view",{staticClass:"actity-box"},[a("view",{staticClass:"act-lt"},[a("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png"}}),a("text",[t._v("限时秒杀")])]),a("view",{staticClass:"act-rt",attrs:{eventid:"18cd95aa-4"},on:{click:function(e){t.$linkListener("../rush/list")}}},[a("text",[t._v("立即前往")])])]):t._e(),4==t.detail.prom_type?a("view",{staticClass:"actity-box"},[a("view",{staticClass:"act-lt"},[a("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png"}}),a("text",[t._v("打折活动")])]),a("view",{staticClass:"act-rt",attrs:{eventid:"18cd95aa-5"},on:{click:function(e){t.$linkListener("../discount/list")}}},[a("text",[t._v("立即前往")])])]):t._e(),5==t.detail.prom_type?a("view",{staticClass:"actity-box"},[a("view",{staticClass:"act-lt"},[a("image",{staticClass:"rb-arrow",attrs:{src:t.imgBaseUrl+"/box_m@2x.png"}}),a("text",[t._v("满减活动")])]),a("view",{staticClass:"act-rt",attrs:{eventid:"18cd95aa-6"},on:{click:function(e){t.$linkListener("../manjian/list")}}},[a("text",[t._v("立即前往")])])]):t._e(),t.detail&&t.detail.coupon&&t.detail.coupon.length>0?a("titleView",{attrs:{tData:t.tData,mpcomid:"18cd95aa-4"}}):t._e(),t.detail&&t.detail.coupon&&t.detail.coupon.length>0?a("coupon-view",{staticStyle:{background:"#fff"},attrs:{iData:t.detail.coupon,type:3,show:1,mpcomid:"18cd95aa-5"}}):t._e(),a("view",{staticClass:"goods-server-info"},[a("view",{staticClass:"item-server"},[a("text",{staticStyle:{width:"50px"}},[t._v("积分")]),a("text",[t._v("购买最高得"+t._s(t.detail.integral?t.detail.integral:0)+"积分")])]),a("view",{staticClass:"item-server",staticStyle:{"border-bottom-width":"0"}},[a("text",{staticStyle:{width:"50px"}},[t._v("配送")]),a("text",[t._v("快递")])])]),a("goodsDescribe",{attrs:{attr:t.detail.goods_attr,content:t.detail.goods_content,mpcomid:"18cd95aa-6"}}),a("view",{staticStyle:{width:"100%",height:"60px"}}),a("view",{staticClass:"bottom-info"},[a("view",{staticClass:"item-bottom-menu"},[a("view",{staticClass:"ib-menu",attrs:{eventid:"18cd95aa-7"},on:{click:t.toHomeListener}},[a("text",{staticClass:"iconfont icon-tabbar",staticStyle:{"font-size":"22px"}}),a("view",{staticStyle:{"font-size":"12px","margin-top":"5px"}},[t._v("首页")])]),a("view",{staticClass:"ib-menu",attrs:{eventid:"18cd95aa-8"},on:{click:t.toCallPhone}},[a("text",{staticClass:"iconfont icon-btn_call",staticStyle:{"font-size":"22px"}}),a("view",{staticStyle:{"font-size":"12px","margin-top":"5px"}},[t._v("客服")])])]),a("view",{staticClass:"item-bottom-menu",staticStyle:{color:"#fff","font-size":"18px",background:"#FFAE19"},attrs:{eventid:"18cd95aa-9"},on:{click:t.addCartListener}},[t._v("加入购物车")]),a("view",{staticClass:"item-bottom-menu",staticStyle:{color:"#fff","font-size":"18px",background:"#ED3005"},attrs:{eventid:"18cd95aa-10"},on:{click:t.buyGoodsListener}},[t._v("立即购买")])])],1):t._e(),1==t.index?a("block",[a("view",{staticClass:"common-info"},[t._e(),a("view",{staticClass:"comm-type"},[a("view",{staticClass:"item-type",class:1==t.comment_type?"active":"",attrs:{"data-type":"1",eventid:"18cd95aa-11"},on:{click:t.commentTypeListener}},[t._v("全部")]),a("view",{staticClass:"item-type",class:2==t.comment_type?"active":"",attrs:{"data-type":"2",eventid:"18cd95aa-12"},on:{click:t.commentTypeListener}},[t._v("好评")]),a("view",{staticClass:"item-type",class:3==t.comment_type?"active":"",attrs:{"data-type":"3",eventid:"18cd95aa-13"},on:{click:t.commentTypeListener}},[t._v("中评")]),a("view",{staticClass:"item-type",class:4==t.comment_type?"active":"",attrs:{"data-type":"4",eventid:"18cd95aa-14"},on:{click:t.commentTypeListener}},[t._v("差评")])])]),t.comment.length>0?a("view",{staticClass:"common-list"},t._l(t.comment,function(e,i){return a("view",{key:i,staticClass:"item-common"},[a("view",{staticClass:"icom-lt"},[a("image",{staticClass:"user-face",attrs:{src:e.face?e.face:t.imgBaseUrl+"/mine/img_my_head@3x.png"}})]),a("view",{staticClass:"icom-rt"},[a("view",{staticClass:"user-info"},[a("view",{staticClass:"uinfo-lt"},[a("view",{staticClass:"u-name"},[t._v(t._s(e.username))]),a("view",{staticClass:"u-date"},[t._v(t._s(e.add_time))])]),a("view",{staticClass:"uinfo-rt"},[t._l(e.goods_rank,function(t,e){return a("block",{key:t},[a("text",{staticClass:"iconfont icon-Star_c xingxing",staticStyle:{color:"#FFAE19"}})])}),5-e.goods_rank>0?a("block",t._l(5-e.goods_rank,function(t,e){return a("text",{key:t,staticClass:"iconfont icon-Star_c xingxing",staticStyle:{color:"#DFE6EB"}})})):t._e()],2)]),a("view",{staticClass:"common-cont"},[t._v(t._s(e.content))]),a("view",{staticClass:"common-img"},t._l(e.img,function(t,e){return a("image",{key:e,staticClass:"c-img",attrs:{src:t}})}))])])})):t._e(),t.more?a("view",{staticClass:"more",attrs:{bindtap:"getGoodsDetail"}},[t._v("点击查看更多")]):t._e(),t.more?t._e():a("view",{staticClass:"nodata"},[t._v("已经全部为你呈现了")])]):t._e(),2==t.index?a("view",{staticClass:"rcm-list"},t._l(t.likes,function(e,i){return a("navigator",{key:i,attrs:{url:"/pages/index/goods/detail?goods_id="+e.goods_id,"open-type":"redirect"}},[a("view",{staticClass:"rcm-goods"},[a("image",{staticClass:"g-img",attrs:{src:e.photosales_sum}}),a("view",{staticClass:"g-info"},[a("view",{staticClass:"ellipsis-02 gname"},[t._v(t._s(e.goods_name))]),a("view",{staticClass:"g-desc"},[a("view",{staticClass:"price-num"},[a("text",[t._v("¥")]),a("text",{staticStyle:{"font-size":"18px"}},[t._v(t._s(e.shop_price))])]),a("view",{staticClass:"sell-num"},[a("text",[t._v(t._s(e.sales_sum))]),a("text",{staticStyle:{color:"#666666"}},[t._v("人已买")])])])])])])})):t._e(),t.likeMore&&2==t.index?a("view",{staticClass:"more",attrs:{eventid:"18cd95aa-15"},on:{click:t.getLikeGoodsList}},[t._v("点击查看更多")]):t._e(),t.likeMore||2!=t.index?t._e():a("view",{staticClass:"nodata"},[t._v("已经全部为你呈现了")]),t.skuFlag?a("skuDialog",{attrs:{specs:t.specs,detail:t.detail,eventid:"18cd95aa-16",mpcomid:"18cd95aa-7"},on:{addEvent:t.sureAddGoodsListener,closeEvent:t.hideSkuDialogListener}}):t._e(),a("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",mpcomid:"18cd95aa-8"}}),a("ToastView",{attrs:{mpcomid:"18cd95aa-9"}})],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},"9f4d":function(t,e,a){"use strict";var i=a("2dc2"),s=a.n(i);s.a},b99f:function(t,e,a){"use strict";a.r(e);var i=a("6e24"),s=a("5c5c");for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);a("9f4d");var n=a("2877"),c=Object(n["a"])(s["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},e286:function(t,e,a){"use strict";a("2346");var i=o(a("b0ce")),s=o(a("b99f"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))}},[["e286","common/runtime","common/vendor"]]]);