(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/login"],{"2a5e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{pid:0,loadInit:!1,theme:{mainColor:"red"},iv:"",encrypted_data:""}},onLoad:function(e){var n=this,o=t.getStorageSync("pid");void 0!=o&&""!=o&&(n.$data.pid=o),n.wxb.addPage(this),n.wxb.Init(e,function(t){n.$data.theme=t.skin.theme,n.$data.loadInit=!0})},onUnload:function(){this.wxb.removePage()},methods:{userLogin:function(){var e=this;t.checkSession({success:function(n){e.toLogin("",t.getStorageSync("open_id"))},fail:function(){t.login({success:function(t){console.log(t),e.toLogin(t.code,"")}})}})},getPhoneNumber:function(t){console.log(t),this.$data.iv=t.detail.iv,this.$data.encrypted_data=t.detail.encryptedData,this.userLogin()},toLogin:function(e,n){console.log(this.$data.pid);var o=this;o.wxb.Post("/shop/api.passport/authMobile",{iv:this.$data.iv,encrypted_data:this.$data.encrypted_data,open_id:n,code:e,pid:this.$data.pid},function(e){e&&e.user_token&&(t.setStorageSync("user_token",e.user_token),t.setStorageSync("user_id",e.user_id)),o.$redirectTo("/pages/mine/index")})}}};e.default=n}).call(this,n("543d")["default"])},"7efa":function(t,e,n){},9823:function(t,e,n){"use strict";n.r(e);var o=n("98c4"),a=n("fc3c");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("b6b3");var r=n("2877"),s=Object(r["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=s.exports},"98c4":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"app"},[t.loadInit?n("view",{staticClass:"login-view"},[n("button",{staticClass:"btn-login",style:"background-color:"+t.theme.mainColor,attrs:{"open-type":"getPhoneNumber",eventid:"713e9bee-0"},on:{getphonenumber:t.getPhoneNumber}},[t._v("微信授权登录")])],1):t._e(),t.loadInit?n("navigator",{staticClass:"login-view",style:"border: 1px"+t.theme.mainColor+" solid;background: #fff;margin: 0 4%;color:"+t.theme.mainColor,attrs:{url:"phoneLogin","open-type":"redirect"}},[n("button",{staticClass:"btn-login",style:"color:"+t.theme.mainColor},[t._v("手机号码登录")])],1):t._e()],1)},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},a7d3:function(t,e,n){"use strict";n("2346");var o=i(n("b0ce")),a=i(n("9823"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,o.default)(a.default))},b6b3:function(t,e,n){"use strict";var o=n("7efa"),a=n.n(o);a.a},fc3c:function(t,e,n){"use strict";n.r(e);var o=n("2a5e"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a}},[["a7d3","common/runtime","common/vendor"]]]);