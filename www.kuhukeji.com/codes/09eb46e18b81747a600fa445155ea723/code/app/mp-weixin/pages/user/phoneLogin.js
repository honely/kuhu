(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/phoneLogin"],{"09f9":function(t,e,a){"use strict";a.r(e);var i=a("f450"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"395c":function(t,e,a){"use strict";a("2346");var i=o(a("b0ce")),n=o(a("7410"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},7410:function(t,e,a){"use strict";a.r(e);var i=a("d5da"),n=a("09f9");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("ec51");var s=a("2877"),d=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=d.exports},8617:function(t,e,a){},d5da:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"app"},[a("form",{attrs:{eventid:"bb1e500a-4"},on:{submit:t.smsLogin}},[1==t.tabIndex?a("view",[a("view",{staticClass:"login-cont"},[a("view",{staticClass:"item-input"},[a("view",{staticClass:"ii-tit"},[t._v("手机号")]),a("input",{staticClass:"ii-input",attrs:{name:"phone","data-type":"1",placeholder:"请输入手机号码","placeholder-style":"color:#CCCCCC;",eventid:"bb1e500a-0"},on:{input:t.inputChangeListener}})]),a("view",{staticClass:"item-input",staticStyle:{"border-bottom-width":"0"}},[a("view",{staticClass:"ii-tit"},[t._v("验证码")]),a("input",{staticClass:"ii-input",attrs:{name:"code","data-type":"2",placeholder:"请输入短信验证码","placeholder-style":"color:#CCCCCC;",eventid:"bb1e500a-1"},on:{input:t.inputChangeListener}}),a("view",{staticClass:"get-code",attrs:{eventid:"bb1e500a-3"},on:{click:t.getSmsCode}},[t.showTime?t._e():a("text",[t._v("获取验证码")]),t.showTime?a("view",[a("uni-countdown",{attrs:{color:"#ffffff",splitorColor:"#ffffff","background-color":"#ED3005","border-color":"rgba(0,0,0,0)",second:t.second,"show-day":!1,styleNum:3,eventid:"bb1e500a-2",mpcomid:"bb1e500a-0"},on:{timeup:t.timeupListener}})],1):t._e()])])]),a("button",{staticClass:"btn-login",style:"background: "+(t.is_phone?t.theme.mainColor:"#CCCCCC"),attrs:{"form-type":"submit"}},[t._v("登录")])],1):t._e()]),a("form",{attrs:{eventid:"bb1e500a-7"},on:{submit:t.phoneLogin}},[2==t.tabIndex?a("view",[a("view",{staticClass:"login-cont"},[a("view",{staticClass:"item-input"},[a("view",{staticClass:"ii-tit"},[t._v("手机号")]),a("input",{staticClass:"ii-input",attrs:{name:"account","data-type":"3",placeholder:"请输入手机号码","placeholder-style":"color:#CCCCCC;",eventid:"bb1e500a-5"},on:{input:t.inputChangeListener}})]),a("view",{staticClass:"item-input",staticStyle:{"border-bottom-width":"0"}},[a("view",{staticClass:"ii-tit"},[t._v("密   码")]),a("input",{staticClass:"ii-input",attrs:{name:"password","data-type":"4",placeholder:"请输入登录密码","placeholder-style":"color:#CCCCCC;",eventid:"bb1e500a-6"},on:{input:t.inputChangeListener}})])]),a("button",{staticClass:"btn-login",style:"background:"+(t.is_account?"#ED3005":"#CCCCCC"),attrs:{"form-type":"submit"}},[t._v("登录")])],1):t._e()]),a("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",mpcomid:"bb1e500a-1"}}),a("ToastView",{attrs:{mpcomid:"bb1e500a-2"}})],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},ec51:function(t,e,a){"use strict";var i=a("8617"),n=a.n(i);n.a},f450:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("9219"));function n(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{theme:{mianColor:"red"},tabIndex:1,phone:"",code:"",is_phone:!1,account:"",password:"",is_account:!1,second:0,showTime:!1,imgBaseUrl:""}},components:{uniCountdown:i.default},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(e){var a=this,i=t.getStorageSync("pid");void 0!=i&&""!=i&&(a.$data.pid=i),a.wxb.printLog("=============onLoad================"),a.wxb.addPage(this),a.wxb.Init(e,function(t){a.$data.theme=t.skin.theme})},onUnload:function(){this.wxb.printLog("=============onUnload================"),this.wxb.removePage()},methods:{timeupListener:function(t){this.$data.second=0,this.$data.showTime=!1},onTabListener:function(t){this.$data.tabIndex=t},getSmsCode:function(e){var a=this,i=a.$data.second;i>0||(t.showLoading({title:"加载中..."}),a.wxb.Post("/shop/api.passport/getSmsCode",{mobile:a.$data.phone},function(e){t.hideLoading(),a.$data.second=60,a.$data.showTime=!0}))},smsLogin:function(e){var a=this,i=e.detail.value;""!=i.phone&&""!=i.code&&a.wxb.Post("/shop/api.passport/mobile",{sms_code:i.code,mobile:i.phone,open_id:""==a.wxb.open_id?t.getStorageSync("open_id"):a.wxb.open_id,pid:a.$data.pid},function(e){console.log(e),e&&e.user_token&&(t.setStorageSync("user_token",e.user_token),t.setStorageSync("user_id",e.user_id)),a.$redirectTo("/pages/mine/index")})},phoneLogin:function(e){var a=this,i=e.detail.value;""!=i.phone&&""!=i.code&&a.wxb.Post("/shop/api.passport/login",{mobile:i.account,password:i.password,open_id:a.wxb.open_id,pid:a.$data.pid},function(e){e&&e.user_token&&(t.setStorageSync("user_token",e.user_token),t.setStorageSync("user_id",e.user_id)),a.$redirectTo("/pages/mine/index")})},inputChangeListener:function(t){console.log(t);var e=t.currentTarget.dataset.type,a=t.detail.value,i=this;switch(e-0){case 1:i.$data.phone=a;break;case 2:i.$data.code=a;break;case 3:i.$data.account=a;break;case 4:i.$data.password=a;break}""!=i.$data.phone&&""!=i.$data.code?i.$data.is_phone=!0:i.$data.is_phone=!1,""!=i.$data.account&&""!=i.$data.password?i.$data.is_account=!0:i.$data.is_account=!1}}};e.default=o}).call(this,a("543d")["default"])}},[["395c","common/runtime","common/vendor"]]]);