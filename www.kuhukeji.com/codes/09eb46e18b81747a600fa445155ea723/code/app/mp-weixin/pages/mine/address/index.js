(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/address/index"],{"13ed":function(t,i,e){"use strict";e("2346");var a=d(e("b0ce")),s=d(e("d848"));function d(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))},"3a59":function(t,i,e){"use strict";var a=e("a9fc"),s=e.n(a);s.a},"42ae":function(t,i,e){"use strict";e.r(i);var a=e("ad01"),s=e.n(a);for(var d in a)"default"!==d&&function(t){e.d(i,t,function(){return a[t]})}(d);i["default"]=s.a},"9bea":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("scroll-view",{staticStyle:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0"},attrs:{"scroll-y":"true"}},[e("view",{staticClass:"btn-add-address",attrs:{"data-type":"0",eventid:"16bf901f-0"},on:{click:t.editAddressListener}},[e("text",{staticClass:"add-icon iconfont icon-btn_add1"}),e("text",{staticClass:"add-hint"},[t._v("新增地址")])]),e("view",{staticClass:"address-list"},[t._l(t.list,function(i,a){return e("view",{key:a,staticClass:"item-address"},[e("view",{staticClass:"lt-addr"},[e("view",{staticClass:"u-info"},[e("text",[t._v(t._s(i.name)+" "+t._s(i.mobile))]),i.is_default?e("text",{staticClass:"state"},[t._v("默认")]):t._e()]),e("view",{staticClass:"u-addr"},[t._v(t._s(i.address))])]),e("view",{staticClass:"rt-addr"},[e("text",{staticClass:"iconfont icon-btn_edit",attrs:{"data-type":"1","data-index":a,eventid:"16bf901f-1-"+a},on:{click:t.editAddressListener}}),e("text",{staticClass:"iconfont icon-btn_delete",attrs:{"data-index":a,eventid:"16bf901f-2-"+a},on:{click:t.showDeleteListener}})])])}),t.more?e("view",{staticClass:"more",attrs:{bindtap:"loadMore"}},[t._v("点击查看更多")]):t._e(),t.more?t._e():e("view",{staticClass:"nodata"},[t._v("已经全部为你呈现了")]),e("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",mpcomid:"16bf901f-0"}}),e("ToastView",{attrs:{mpcomid:"16bf901f-1"}})],2),t.edit_addr?e("view",{staticClass:"edit-address"},[e("form",{attrs:{eventid:"16bf901f-6"},on:{submit:t.submitUserAddress}},[e("view",{staticClass:"e-tit"},[e("text",{staticStyle:{flex:"1"}},[t._v(t._s(0==t.type?"新增地址":"修改地址"))]),e("text",{staticClass:"iconfont icon-btn_close_black",attrs:{eventid:"16bf901f-3"},on:{click:t.closeEditListener}})]),e("view",{staticClass:"e-cont"},[e("view",{staticClass:"item-edit"},[e("view",{staticClass:"ie-tit"},[t._v("姓名")]),e("input",{staticClass:"ie-input",attrs:{name:"name",value:t.editAddr?t.editAddr.name:"",placeholder:"请输入身份证真实姓名","placeholder-style":"color:#CCCCCC;font-size:16px;"}})]),e("view",{staticClass:"item-edit"},[e("view",{staticClass:"ie-tit"},[t._v("手机")]),e("input",{staticClass:"ie-input",attrs:{name:"mobile",value:t.editAddr?t.editAddr.mobile:"",placeholder:"请输入联系电话","placeholder-style":"color:#CCCCCC;font-size:16px;"}})]),e("view",{staticClass:"item-edit",attrs:{eventid:"16bf901f-4"},on:{click:t.showCitySelectDialog}},[e("view",{staticClass:"ie-tit"},[t._v("地区")]),e("view",{staticClass:"ie-input",style:"color:"+(t.addressDesc?"#000000;":"#CCCCCC;")},[t._v(t._s(t.addressDesc?t.addressDesc:"请选择省 城市 区县"))]),e("text",{staticClass:"iconfont icon-btn_arrowr"})]),e("view",{staticClass:"item-edit",staticStyle:{"border-bottom-width":"0"}},[e("view",{staticClass:"ie-tit"},[t._v("详细地址")]),e("input",{staticClass:"ie-input",attrs:{name:"street",maxlength:"60",value:t.editAddr?t.editAddr.street:"",placeholder:"请填写详细地址，5-60个字","placeholder-style":"color:#CCCCCC;font-size:16px;"}})])]),e("view",{staticClass:"default-cont"},[e("text",{staticClass:"iconfont icon-radio",class:1==t.isDefault?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==t.isDefault?"#ED3005":"#999999")+";",attrs:{eventid:"16bf901f-5"},on:{click:t.onDefaultListener}}),e("text",{staticStyle:{"margin-left":"8px",color:"#797D80","font-size":"14px","margin-top":"2px"}},[t._v("设置为默认地址")])]),e("button",{staticClass:"btn-save",attrs:{"form-type":"submit"}},[t._v("保存")])],1)],1):t._e(),e("dialog-view",{attrs:{title:"确定删除该地址？",btnCancel:"确定",btnSure:"再想想",eventid:"16bf901f-7",mpcomid:"16bf901f-2"},on:{cancelEvent:t.cancelListener,sureEvent:t.sureListener}}),t.cityShowFlag?e("view",{staticClass:"mask",staticStyle:{"z-index":"999"}},[e("view",{staticClass:"time-listBox"},[e("view",{staticClass:"item-time"},[e("view",{staticClass:"date-cancel",attrs:{eventid:"16bf901f-8"},on:{click:t.hideCitySelectDialog}},[t._v("取消")]),e("view",{staticClass:"date-title"},[t._v("选择省市区")]),e("view",{staticClass:"date-sure",attrs:{eventid:"16bf901f-9"},on:{click:t.sureSelectListener}},[t._v("完成")])]),e("picker-view",{staticStyle:{width:"100%",height:"180px"},attrs:{"indicator-style":"height: 60px;",eventid:"16bf901f-10"},on:{change:t.bindChangeListener}},[e("picker-view-column",{attrs:{mpcomid:"16bf901f-3"}},t._l(t.province,function(i,a){return e("view",{key:a,staticClass:"picker-date"},[t._v(t._s(i.label))])})),e("picker-view-column",{attrs:{mpcomid:"16bf901f-4"}},t._l(t.city,function(i,a){return e("view",{key:a,staticClass:"picker-date"},[t._v(t._s(i.label))])})),e("picker-view-column",{attrs:{mpcomid:"16bf901f-5"}},t._l(t.division,function(i,a){return e("view",{key:a,staticClass:"picker-date"},[t._v(t._s(i.label))])}))],1)],1)]):t._e()],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},a9fc:function(t,i,e){},ad01:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{userid:0,isDefault:0,edit_addr:!1,more:0,list:[],index:"",type:0,editAddr:{},province:[],city:[],division:[],pIndex:0,cIndex:0,dIndex:0,province_id:"",city_id:"",division_id:"",cityShowFlag:!1,parent_id:"",addressDesc:"",deleteIndex:-1,imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(i){var e=this,a=t.getStorageSync("user_id");void 0!=a&&""!=a&&(e.$data.userid=a),void 0!=i.pid&&""!=i.pid&&t.setStorageSync("pid",i.pid),e.wxb.addPage(this),e.wxb.Init(i,function(t){e.getAddressList()})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:""==t.$data.companyName?"O2O电商小程序":t.$data.companyName,path:"/pages/index/index?pid="+t.$data.userid}},methods:{bindChangeListener:function(t){var i=this,e=t.detail.value,a=i.$data.pIndex,s=i.$data.cIndex,d=i.$data.dIndex;for(var n in e)0==n&&a!=e[n]?(a=e[n],console.log("修改省份"),i.$data.parent_id=i.$data.province[e[n]].region_id,i.getRegionList(1)):1==n&&s!=e[n]?(s=e[n],console.log("修改城市"),i.$data.parent_id=i.$data.city[e[n]].region_id,i.initDivisionInfo()):2==n&&d!=e[n]&&(d=e[n]);i.$data.pIndex=a,i.$data.cIndex=s,i.$data.dIndex=d},showCitySelectDialog:function(){this.$data.cityShowFlag=!0,this.$data.parent_id="",this.initProvinceInfo()},hideCitySelectDialog:function(){this.$data.cityShowFlag=!1},sureSelectListener:function(t){var i=this,e=i.$data.pIndex,a=i.$data.cIndex,s=i.$data.dIndex;i.$data.province_id=i.$data.province[e].region_id,i.$data.city_id=i.$data.city[a].region_id,i.$data.division_id=i.$data.division[s].region_id,i.$data.addressDesc=i.$data.province[e].label+i.$data.city[e].label+i.$data.division[e].label,i.hideCitySelectDialog(),console.log(i.$data.province),console.log("province_id=>"+i.$data.province_id),console.log("city_id=>"+i.$data.city_id),console.log("division_id=>"+i.$data.division_id)},submitUserAddress:function(t){console.log(t);var i=this,e=t.detail.value,a=e.name,s=e.mobile,d=e.street;""!=a?""!=s?0==i.$data.type?i.wxb.Post("/shop/api.address/addAddress",{name:a,mobile:s,street:d,is_default:i.$data.isDefault,province_id:i.$data.province_id,city_id:i.$data.city_id,division_id:i.$data.division_id},function(t){i.getAddressList(),i.closeEditListener()}):i.wxb.Post("/shop/api.address/editAddress",{address_id:i.$data.editAddr.address_id,name:a,mobile:s,street:d,is_default:i.$data.isDefault,province_id:i.$data.province_id,city_id:i.$data.city_id,division_id:i.$data.division_id},function(t){i.getAddressList(),i.closeEditListener()}):i.$showToast({show:!0,content:"手机号不能为空"}):i.$showToast({show:!0,content:"姓名不能为空"})},onDefaultListener:function(){0==this.$data.isDefault?this.$data.isDefault=1:this.$data.isDefault=0},editAddressListener:function(t){console.log(t);var i=t.currentTarget.dataset,e=i.type,a=i.index,s=this;console.log("type=>"+e),console.log("index=>"+a);var d=this.$data.list;this.$data.type=e,this.$data.index=a,void 0!=a&&1==e?(this.$data.editAddr=d[a],s.$data.province_id=d[a].province_id,s.$data.city_id=d[a].city_id,s.$data.division_id=d[a].division_id,this.$data.isDefault=this.$data.editAddr.is_default,this.$data.addressDesc=d[a].province+d[a].city+d[a].division):(this.$data.editAddr="",this.$data.addressDesc="",this.$data.isDefault=0);var n=this.$data.edit_addr;this.$data.edit_addr=!n},closeEditListener:function(t){this.$data.edit_addr=!1},showDeleteListener:function(t){this.$data.deleteIndex=t.currentTarget.dataset.index,this.$showDialog()},cancelListener:function(t){console.log("删除弹窗"),this.$showDialog(!1);var i=this,e=i.$data.deleteIndex;e>=0&&i.wxb.Post("/shop/api.address/delAddress",{address_id:i.$data.list[e].address_id},function(t){i.$showToast({show:!0,content:"删除地址成功"}),i.getAddressList()})},sureListener:function(t){console.log("再想想"),this.$showDialog(!1)},getAddressList:function(t){var i=this;i.wxb.Post("/shop/api.address/getIndex",{},function(t){i.$data.list=t.list})},initProvinceInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.province=i.list,t.$data.parent_id=i.list[0].region_id,t.initCityInfo()})},initCityInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.city=i.list,t.$data.parent_id=i.list[0].region_id,t.initDivisionInfo()})},initDivisionInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.division=i.list})},getRegionList:function(t){var i=this;i.wxb.Post("/shop/api.address/queryRegion",{parent_id:i.$data.parent_id},function(e){0==t?i.$data.province=e.list:1==t?(i.$data.city=e.list,i.$data.parent_id=e.list[0].region_id,i.initDivisionInfo()):2==t&&(i.$data.division=e.list)})}}};i.default=e}).call(this,e("543d")["default"])},d848:function(t,i,e){"use strict";e.r(i);var a=e("9bea"),s=e("42ae");for(var d in s)"default"!==d&&function(t){e.d(i,t,function(){return s[t]})}(d);e("3a59");var n=e("2877"),o=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,null,null);i["default"]=o.exports}},[["13ed","common/runtime","common/vendor"]]]);