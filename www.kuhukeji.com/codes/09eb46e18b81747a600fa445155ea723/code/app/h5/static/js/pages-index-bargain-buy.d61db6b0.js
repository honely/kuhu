(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-bargain-buy"],{2239:function(i,t,e){var a=e("6e01");"string"===typeof a&&(a=[[i.i,a,""]]),a.locals&&(i.exports=a.locals);var d=e("4f06").default;d("d5dd86b6",a,!0,{sourceMap:!1,shadowMode:!1})},"2bc6":function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{userid:0,bargain_item_id:"",detail:"",use_money:0,pay_type:"",paymentFlag:!1,payOrderId:"",imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(i){var t=this,e=uni.getStorageSync("user_id");void 0!=e&&""!=e&&(t.$data.userid=e),void 0!=i.pid&&""!=i.pid&&uni.setStorageSync("pid",i.pid),t.wxb.addPage(this),t.wxb.Init(i,function(e){i.bargain_item_id&&(t.$data.bargain_item_id=i.bargain_item_id,t.checkOrderPayPrice())})},onUnload:function(){this.wxb.removePage()},onShow:function(){setTimeout(function(){var i=this.$data.payOrderId;i&&uni.redirectTo({url:"../../mine/order/detail?order_id="+i})},1e3)},methods:{checkOrderPayPrice:function(){var i=this;i.wxb.Post("/shop/api.bargain/getPrice",{bargain_item_id:i.$data.bargain_item_id},function(t){i.$data.detail=t})},showPaymentDialog:function(i){"h5"==this.wxb.device?this.$data.paymentFlag=!0:this.sureBuyListener()},hidePaymentDialog:function(i){this.$data.paymentFlag=!1},paymentListener:function(i){var t=i.currentTarget.dataset.type;void 0!=t&&(this.$data.pay_type=t,this.sureBuyListener()),this.hidePaymentDialog()},onUseMoneyListener:function(){0==this.$data.use_money?this.$data.use_money=1:this.$data.use_money=0},sureBuyListener:function(i){var t=this;t.wxb.Post("/shop/api.bargain/createOrder",{use_money:t.$data.use_money,bargain_item_id:t.$data.bargain_item_id,pay_type:"h5"==t.wxb.device?t.$data.pay_type:""},function(i){if(0==i.is_pay)uni.redirectTo();else if("h5"==t.wxb.device)if(t.$data.payOrderId=i.order_id,"weixin"==t.$data.pay_type)console.log("h5端支付跳转超链接"),window.location.href=i.order_info;else{var e=window.document.createElement("div");e.innerHTML=i.order_info,window.document.body.appendChild(e),window.document.forms.alipaysubmit.submit()}else t.wxb.paymentOrder(i,function(t){console.log(i);var e=i.order_id;uni.redirectTo({url:"../../mine/order/detail?order_id="+e})})})}}};t.default=a},"357a":function(i,t,e){"use strict";var a=e("2239"),d=e.n(a);d.a},"5bcb":function(i,t,e){"use strict";e.r(t);var a=e("9b40"),d=e("96a3");for(var o in d)"default"!==o&&function(i){e.d(t,i,function(){return d[i]})}(o);e("357a");var n=e("2877"),s=Object(n["a"])(d["default"],a["a"],a["b"],!1,null,"7dd63cc0",null);t["default"]=s.exports},"6e01":function(i,t,e){t=i.exports=e("2350")(!1),t.push([i.i,".dialog-detailed[data-v-7dd63cc0]{width:100%;display:block;position:fixed;bottom:0;left:0;right:0;background:#fff;border-radius:8px 8px 0 0;animation:bounceInUp 1s ease 0s 1 both;-webkit-animation:bounceInUp 1s ease 0s 1 both;color:#000}.dialog-detailed .dd-header[data-v-7dd63cc0]{width:100%;height:54px;line-height:54px;padding:0 15px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom:1px solid #dfe6eb}.dialog-detailed .dd-header .h-tit[data-v-7dd63cc0]{color:#333;font-size:18px;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.dialog-detailed .dd-header .h-close[data-v-7dd63cc0]{color:#333}\n\n/* 支付对话框 */.dd-payment[data-v-7dd63cc0]{width:100%;height:400px;background:#f2f4f7;padding:15px}.dd-payment .item-payment[data-v-7dd63cc0]{width:100%;height:60px;border-radius:8px;background:#fff;margin:6px 0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0 15px}.item-payment .p-lt[data-v-7dd63cc0]{width:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.item-payment .p-radio[data-v-7dd63cc0]{font-size:30px;color:#ededed}.bottom-box[data-v-7dd63cc0]{width:100%;height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:absolute;bottom:0;background:#fff}.bottom-box .bb-lt[data-v-7dd63cc0]{width:100%;height:60px;-webkit-box-flex:1.8;-webkit-flex:1.8;-ms-flex:1.8;flex:1.8;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0 15px}.bottom-box .bb-lt .bb-price[data-v-7dd63cc0]{width:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;color:#ed3005;font-size:22px}.bottom-box .bb-lt .bb-detailed[data-v-7dd63cc0]{height:60px;line-height:60px;padding:0 4px;font-size:14px;color:#333;margin-left:8px}.bottom-box .bb-rt[data-v-7dd63cc0]{width:100%;height:60px;line-height:60px;-webkit-box-flex:1.2;-webkit-flex:1.2;-ms-flex:1.2;flex:1.2;background:#ed3005;color:#fff;text-align:center;font-size:18px}.order-info[data-v-7dd63cc0]{width:100%;display:block;background:#fff;padding:0 15px;margin:12px 0}.order-info .item-order[data-v-7dd63cc0]{width:100%;height:50px;border-bottom:1px solid #dfe6eb;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.order-info .item-order .o-lt[data-v-7dd63cc0]{width:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;color:#666;font-size:16px}.order-info .item-order .o-rt[data-v-7dd63cc0]{font-size:16px;color:#000}.order-info .item-order .o-rt .or-desc[data-v-7dd63cc0]{color:#ccc;font-size:16px;margin-right:10px}.order-info .item-order .o-rt uni-text[data-v-7dd63cc0]{font-size:16px;color:#000}.buy-box[data-v-7dd63cc0]{width:100%;height:100%;display:block;overflow:hidden}.buy-box .addr-box[data-v-7dd63cc0]{width:100%;height:94px;background:#fff;margin-top:12px}.addr-box .show-addr[data-v-7dd63cc0]{width:100%;height:94px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0 15px}.addr-box .show-addr .lt-addr[data-v-7dd63cc0]{width:100%;display:block;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.lt-addr .t-info[data-v-7dd63cc0]{width:100%;color:#333;font-size:20px}.lt-addr .b-info[data-v-7dd63cc0]{width:100%;margin-top:8px;color:#333;font-size:14px}\n\n/* 商品展示 */.item-goods[data-v-7dd63cc0]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:16px 15px;background:#fff;border-bottom:1px solid #f8f8f8}.item-goods .g-img[data-v-7dd63cc0]{width:100px;height:100px;background:#fcfcfc}.item-goods .g-cont[data-v-7dd63cc0]{width:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;margin-left:10px;display:block}.item-goods .g-cont .gc-name[data-v-7dd63cc0]{width:100%;color:#2d3133;font-size:16px}.item-goods .g-cont .gc-sku[data-v-7dd63cc0]{width:100%;margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;color:#666;font-size:14px}.item-goods .g-cont .gc-sku .sku-cont[data-v-7dd63cc0]{width:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;padding-right:10px;color:#666;font-size:14px}.item-goods .g-cont .gc-price[data-v-7dd63cc0]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:10px}.gc-price .g-price[data-v-7dd63cc0]{font-size:20px;color:#ed3005}.gc-price .g-markup[data-v-7dd63cc0]{height:18px;line-height:18px;margin-left:8px;padding:0 4px;border:1px solid #ed3005;font-size:14px;color:#ed3005}",""])},"96a3":function(i,t,e){"use strict";e.r(t);var a=e("2bc6"),d=e.n(a);for(var o in a)"default"!==o&&function(i){e.d(t,i,function(){return a[i]})}(o);t["default"]=d.a},"9b40":function(i,t,e){"use strict";var a=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("v-uni-view",{staticClass:"buy-box"},[i.detail?e("v-uni-view",[e("v-uni-view",{staticStyle:{position:"absolute",top:"0",bottom:"60px",left:"0",right:"0",overflow:"scroll"}},[e("v-uni-view",{staticClass:"addr-box"},[e("v-uni-view",{staticClass:"show-addr"},[e("v-uni-view",{staticClass:"lt-addr"},[e("v-uni-view",{staticClass:"t-info"},[e("v-uni-text",[i._v(i._s(i.detail.name))]),e("v-uni-text",[i._v(i._s(i.detail.mobile))])],1),e("v-uni-view",{staticClass:"b-info"},[i._v(i._s(i.detail.address))])],1)],1)],1),e("v-uni-view",{staticClass:"item-goods",staticStyle:{"'margin-top":"12px"}},[e("v-uni-image",{staticClass:"g-img",attrs:{src:i.detail.photo}}),e("v-uni-view",{staticClass:"g-cont"},[e("v-uni-view",{staticClass:"gc-name ellipsis-1"},[i._v(i._s(i.detail.goods_name))]),e("v-uni-view",{staticClass:"gc-sku"},[e("v-uni-view",{staticClass:"sku-cont ellipsis-02"},[i._v(i._s(i.detail.key_name))]),e("v-uni-text",[i._v("x1")])],1),e("v-uni-view",{staticClass:"gc-price"},[e("v-uni-text",{staticClass:"g-price"},[i._v("¥"+i._s(i.detail.shop_price))])],1)],1)],1),e("v-uni-view",{staticClass:"order-info"},[e("v-uni-view",{staticClass:"item-order"},[e("v-uni-view",{staticClass:"o-lt"},[i._v("商品总额")]),e("v-uni-view",{staticClass:"o-rt"},[i._v(i._s(i.detail.bargain_price))])],1),e("v-uni-view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"}},[e("v-uni-view",{staticClass:"o-lt"},[i._v("运费")]),e("v-uni-view",{staticClass:"o-rt"},[e("v-uni-text",[i._v("¥"+i._s(i.detail.shipping_price))])],1)],1)],1),e("v-uni-view",{staticClass:"order-info"},[e("v-uni-view",{staticClass:"item-order",staticStyle:{"border-bottom-width":"0"}},[e("v-uni-view",{staticClass:"o-lt"},[i._v("是否使用余额支付")]),e("v-uni-view",{staticClass:"o-rt"},[e("v-uni-text",{staticClass:"iconfont icon-radio",class:1==i.use_money?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==i.use_money?"#ED3005":"#999999")+";",on:{click:function(t){t=i.$handleEvent(t),i.onUseMoneyListener(t)}}})],1)],1)],1)],1),e("v-uni-view",{staticClass:"bottom-box"},[e("v-uni-view",{staticClass:"bb-lt"},[e("v-uni-text",{staticClass:"bb-price"},[i._v("¥"+i._s(i.detail.shipping_price+i.detail.bargain_price))])],1),e("v-uni-view",{staticClass:"bb-rt",on:{click:function(t){t=i.$handleEvent(t),i.showPaymentDialog(t)}}},[i._v("结算(1)")])],1)],1):i._e(),e("LoadingView",{attrs:{img:i.imgBaseUrl+"/loading.gif"}}),e("ToastView"),i.paymentFlag?e("v-uni-view",{staticClass:"mask"},[e("v-uni-view",{staticClass:"dialog-detailed"},[e("v-uni-view",{staticClass:"dd-header"},[e("v-uni-text",{staticClass:"h-tit"},[i._v("选择支付方式")]),e("v-uni-text",{staticClass:"h-close iconfont icon-btn_close_black",on:{click:function(t){t=i.$handleEvent(t),i.hidePaymentDialog(t)}}})],1),e("v-uni-view",{staticClass:"dd-payment"},[e("v-uni-view",{staticClass:"item-payment",attrs:{"data-type":"weixin"},on:{click:function(t){t=i.$handleEvent(t),i.paymentListener(t)}}},[e("v-uni-view",{staticClass:"p-lt"},[e("v-uni-text",{staticClass:"iconfont icon-icon_pay_wepay",staticStyle:{"font-size":"30px",color:"#41B035"}}),e("v-uni-text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"}},[i._v("微信支付")])],1),e("v-uni-text",{staticClass:"p-radio iconfont",class:"weixin"==i.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("weixin"==i.pay_type?"#3A96E6":"#EDEDED")})],1),e("v-uni-view",{staticClass:"item-payment",attrs:{"data-type":"ali"},on:{click:function(t){t=i.$handleEvent(t),i.paymentListener(t)}}},[e("v-uni-view",{staticClass:"p-lt"},[e("v-uni-text",{staticClass:"iconfont icon-icon_pay_alipay",staticStyle:{"font-size":"30px",color:"#00AAEE"}}),e("v-uni-text",{staticStyle:{color:"#333333","font-size":"16px","margin-left":"15px"}},[i._v("支付宝支付")])],1),e("v-uni-text",{staticClass:"p-radio iconfont",class:"ali"==i.pay_type?" icon-selector_enable":"icon-selector_disable",style:"color:"+("ali"==i.pay_type?"#3A96E6":"#EDEDED")})],1)],1)],1)],1):i._e()],1)},d=[];e.d(t,"a",function(){return a}),e.d(t,"b",function(){return d})}}]);