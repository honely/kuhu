(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cart-index"],{1857:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".buy-info[data-v-e99c86ce]{width:100%;height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:#fff;position:fixed;bottom:49px;-webkit-box-shadow:0 0 4px 0 rgba(0,0,0,.04);box-shadow:0 0 4px 0 rgba(0,0,0,.04)}.buy-info .buy-desc[data-v-e99c86ce]{width:100%;height:60px;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0 15px}.buy-info .buy-desc .btn-sel[data-v-e99c86ce]{font-size:20px;color:#ccc;margin-right:8px}.buy-info .buy-desc .sel-all[data-v-e99c86ce]{font-size:14px;color:#333;margin-right:20px}.buy-info .buy-desc .price[data-v-e99c86ce]{color:#ed3005;font-size:16px}.buy-info .btn-buy[data-v-e99c86ce]{height:60px;padding:0 37px;background:#ed3005;color:#fff;font-size:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.like-header[data-v-e99c86ce]{width:100%;height:50px;line-height:50px;padding:0 15px;background:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-top:12px}.like-header uni-text[data-v-e99c86ce]{font-size:20px;margin-right:5px}.cart-list[data-v-e99c86ce]{width:100%;display:block;background:#f2f4f7}.cart-list .list-box[data-v-e99c86ce]{width:100%;display:block}.list-box .item-ware[data-v-e99c86ce]{width:100%;height:150px;margin-top:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:#fff;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;overflow:hidden}.item-ware .ware-cont[data-v-e99c86ce]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-right:0;-webkit-transition:all .4s;-o-transition:all .4s;transition:all .4s;-webkit-transform:translateX(90px);-ms-transform:translateX(90px);transform:translateX(90px);margin-left:-90px;padding:15px 0}.ware-cont .w-sel[data-v-e99c86ce]{width:20px;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:0 8px 0 12px}.ware-cont .w-img[data-v-e99c86ce]{width:100px;height:100px;margin:10px 10px 10px 0}.ware-cont .w-cont[data-v-e99c86ce]{width:100%;height:100%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:block;margin-right:12px;position:relative}.ware-cont .w-cont .g-name[data-v-e99c86ce]{width:100%;font-size:16px;color:#2d3133}.ware-cont .w-cont .g-sku[data-v-e99c86ce]{font-size:12px;color:#666;margin:5px 0}.ware-cont .w-cont .g-desc[data-v-e99c86ce]{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:absolute;bottom:0}.ware-cont .w-cont .g-desc .d-price[data-v-e99c86ce]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;font-size:14px;color:#ed3005}.ware-cont .w-cont .g-desc .d-num[data-v-e99c86ce]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.ware-cont .w-cont .g-desc .d-num .num[data-v-e99c86ce]{min-width:36px;padding:0 10px;text-align:center;line-height:36px;height:36px;background:#f5f6f7;color:#43494d;font-size:16px;margin:0 10px}.item-ware .btn-delete[data-v-e99c86ce]{width:90px;height:100%;background:#ff3200;font-size:18px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#fff;-webkit-transform:translateX(90px);-ms-transform:translateX(90px);transform:translateX(90px);-webkit-transition:all .4s;-o-transition:all .4s;transition:all .4s}.ware-move-active .btn-delete[data-v-e99c86ce],.ware-move-active .ware-cont[data-v-e99c86ce]{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.cart-list .empty-cart[data-v-e99c86ce]{width:100%;height:100%;min-height:312px;text-align:center}.cart-list .empty-cart .icon-empty[data-v-e99c86ce]{width:120px;height:120px;margin-top:80px}.empty-cart .empty-tit-01[data-v-e99c86ce]{color:#666;font-size:18px;margin-top:16px}.empty-cart .empty-tit-02[data-v-e99c86ce]{color:#999;font-size:14px;margin-top:16px}\n\n/* 推荐列表 */.goods-list[data-v-e99c86ce]{width:100%;\n\t/* height: 100%; */\n\t/* background: #F2F4F7; */display:inline-block;padding:2px 0}.goods-list .item-goods[data-v-e99c86ce]{width:50%;display:block;float:left;margin:2px 0}.goods-list .item-goods .img-box[data-v-e99c86ce]{width:100%;height:186px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.goods-list .item-goods .img-box .goods-img[data-v-e99c86ce]{width:100%;height:186px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.goods-list .item-goods .goods-name[data-v-e99c86ce]{font-size:16px;color:#333;padding:15px;background:#fff}.goods-list .item-goods .goods-desc[data-v-e99c86ce]{width:100%;background:#fff;padding:0 15px 15px 15px;font-size:14px;position:relative}.goods-list .item-goods .goods-desc .price[data-v-e99c86ce]{font-size:14px;color:#ed3005}.goods-list .item-goods .goods-desc .cost-price[data-v-e99c86ce]{font-size:12px;color:#999;margin-top:2px}.goods-list .item-goods .goods-desc .cost-price .cost[data-v-e99c86ce]{text-decoration:line-through;margin-left:4px}.goods-list .item-goods .goods-desc .icon-cart[data-v-e99c86ce]{position:absolute;right:15px;bottom:16px;font-size:24px;color:#ed3005}",""])},4755:function(t,e,i){"use strict";i.r(e);var a=i("6380"),s=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=s.a},6380:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{userid:0,startX:0,startY:0,tabIndex:2,selectColor:"#ED3005",footers:[],page:1,more:0,list:[],goods:[],goodsNum:0,totalPrice:0,all_select:0,imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(t){var e=this,i=uni.getStorageSync("user_id");void 0!=i&&""!=i&&(e.$data.userid=i),void 0!=t.pid&&""!=t.pid&&uni.setStorageSync("pid",t.pid),e.wxb.addPage(this),e.wxb.Init(t,function(i){console.log(t),e.$data.footers=e.wxb.skin.footer.list,e.$data.tabIndex=e.wxb.getCurrPageIndex("/pages/cart/index",e.$data.footers)-0,e.$data.selectColor=e.wxb.skin.footer.selectColor,console.log("tabIndex=>"+e.$data.tabIndex),void 0!=t.p_cat_id&&void 0!=t.cat_id&&(e.$data.p_cat_id=t.p_cat_id,e.$data.cat_id=t.cat_id),e.getCartList()})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:t.$data.shareTitle?t.$data.shareTitle:"营销电商",path:"/pages/index/index?pid="+t.$data.userid}},methods:{settlement:function(t){this.$data.goodsNum<=0?this.$showToast({show:!0,content:"请勾选购买的产品"}):uni.navigateTo({url:"/pages/cart/buy"})},onSelectGoodsListener:function(t){var e=this,i=t.currentTarget.dataset.index;e.wxb.Post("/shop/api.cart/selectCart",{cart_id:e.$data.list[i].cart_id},function(t){e.$data.list[i].selected=1==e.$data.list[i].selected?0:1,e.countGoodsTotalPrice()})},selectAllGoodsListener:function(t){var e=this.$data.all_select,i=this.$data.list;for(var a in this.$data.all_select=1==e?0:1,i)1==this.$data.all_select?i[a].selected=1:i[a].selected=0;this.$data.list=i,this.countGoodsTotalPrice();var s=this;s.wxb.Post("/shop/api.cart/selectCartAll",{is_select:1==e?0:1},function(t){})},countGoodsTotalPrice:function(t){var e=this.$data.list,i=0,a=0,s=1;for(var o in e)1==e[o].selected?(this.wxb.printLog("单价："+e[o].price),this.wxb.printLog("数量："+e[o].goods_num),this.wxb.printLog("计算价格=>"+(e[o].price-0)*(e[o].goods_num-0)),i+=(e[o].price-0)*(e[o].goods_num-0),a+=e[o].goods_num-0):0==e[o].selected&&(s=0);this.$data.all_select=s,this.$data.totalPrice=i,this.$data.goodsNum=a},minusGoodsNumListener:function(t){var e=t.currentTarget.dataset.num,i=t.currentTarget.dataset.id;e<=1?this.$showToast({show:!0,content:"至少购买一件商品"}):(e-=1,this.changeGoodsNumListener(i,e))},addGoodsNumListener:function(t){var e=t.currentTarget.dataset.num,i=t.currentTarget.dataset.id;e=e-0+1,this.changeGoodsNumListener(i,e)},changeGoodsNumListener:function(t,e){var i=this;i.wxb.Post("/shop/api.Cart/editCart",{cart_id:t,num:e},function(t){i.$data.page=1,i.getCartList()})},deleteGoodsListener:function(t){var e=this,i=t.currentTarget.dataset.id,a=t.currentTarget.dataset.index,s=e.$data.list;e.wxb.Post("/shop/api.Cart/delCart",{cart_id:i},function(t){s.splice(a,1),e.$showToast({show:!0,content:"该商品已成功删除"})}),e.$data.list=s},touchstart:function(t){console.log(t),console.log("我要开始划动拉"),console.log(this.wxb.device);var e=this.$data.list;for(var i in e)e[i].isTouchMove&&(e[i].isTouchMove=!1);"h5"==this.wxb.device?(this.$data.startX=t.changedTouches[0].clientX,this.$data.startY=t.changedTouches[0].clientY):(this.$data.startX=t.cclientX,this.$data.startY=t.clientY),this.$data.list=e},touchmove:function(t){var e=this,i=t.currentTarget.dataset.index,a=e.$data.startX,s=e.$data.startY;if("h5"==this.wxb.device)var o=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY;else o=t.cclientX,n=t.clientY;var c=e.$data.list,l=e.angle({X:a,Y:s},{X:o,Y:n});for(var d in c){if(c[d].isTouchMove=!1,Math.abs(l)>30)return;d==i&&(c[d].isTouchMove=!(o>a))}e.$data.list=c},angle:function(t,e){var i=e.X-t.X,a=e.Y-t.Y;return 360*Math.atan(a/i)/(2*Math.PI)},loadMore:function(t){this.wxb.printLog("分页加载更多"),this.getCartList()},getCartList:function(){var t=this,e=t.$data.page,i=t.$data.goods;1==e&&(i=[]),t.wxb.Post("/shop/api.Cart/index",{page:t.$data.page},function(a){if(1==e){var s=a.list;for(var o in s)s[o].isTouchMove=!1;t.$data.list=s}var n=a.tuijian;for(var o in n)i.push(n[o]),t.countGoodsTotalPrice();t.$data.goods=i,t.$data.more=a.isMore,t.$data.page+=1})}}};e.default=a},b098:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"main"},[t.goods.length>0?i("v-uni-scroll-view",{attrs:{"scroll-y":""}},[t.list&&t.page>1?[i("v-uni-view",{staticClass:"cart-list"},[t.list?i("v-uni-view",{staticClass:"list-box"},t._l(t.list,function(e,a){return i("v-uni-view",{key:a,staticClass:"item-ware",class:e.isTouchMove?"ware-move-active":"",attrs:{"data-index":a},on:{touchstart:function(e){e=t.$handleEvent(e),t.touchstart(e)},touchmove:function(e){e=t.$handleEvent(e),t.touchmove(e)}}},[i("v-uni-view",{staticClass:"ware-cont"},[i("v-uni-view",{staticClass:"w-sel",attrs:{"data-index":a},on:{click:function(e){e=t.$handleEvent(e),t.onSelectGoodsListener(e)}}},[i("v-uni-text",{staticClass:"iconfont",class:1==e.selected?"icon-selector_enable":"icon-selector_disable",style:"font-size:20px; color:"+(1==e.selected?"#ED3005":"#888888")})],1),i("v-uni-image",{staticClass:"w-img",attrs:{src:e.photo}}),i("v-uni-view",{staticClass:"w-cont"},[i("v-uni-view",{staticClass:"g-name ellipsis-02"},[t._v(t._s(e.goods_name))]),i("v-uni-view",{staticClass:"g-sku"},[t._v(t._s(e.spec_key_name))]),i("v-uni-view",{staticClass:"g-desc"},[i("v-uni-view",{staticClass:"d-price"},[i("v-uni-text",[t._v("¥")]),i("v-uni-text",{staticStyle:{"font-size":"22px","margin-right":"2px"}},[t._v(t._s(e.price))])],1),i("v-uni-view",{staticClass:"d-num"},[i("v-uni-text",{staticClass:"iconfont icon-btn_minus_enabel",attrs:{"data-num":e.goods_num,"data-id":e.cart_id},on:{click:function(e){e=t.$handleEvent(e),t.minusGoodsNumListener(e)}}}),i("v-uni-text",{staticClass:"num"},[t._v(t._s(e.goods_num))]),i("v-uni-text",{staticClass:"iconfont icon-btn_add",attrs:{"data-num":e.goods_num,"data-id":e.cart_id},on:{click:function(e){e=t.$handleEvent(e),t.addGoodsNumListener(e)}}})],1)],1)],1)],1),i("v-uni-view",{staticClass:"btn-delete",attrs:{"data-id":e.cart_id},on:{click:function(e){e=t.$handleEvent(e),t.deleteGoodsListener(e)}}},[t._v("删除")])],1)}),1):t._e(),0==t.list.length?i("v-uni-view",{staticClass:"empty-cart"},[i("v-uni-image",{staticClass:"icon-empty",attrs:{src:t.imgBaseUrl+"/error/icon_none_shoppingcart@2x.png"}}),i("v-uni-view",{staticClass:"empty-tit-01"},[t._v("购物车空空如也")]),i("v-uni-view",{staticClass:"empty-tit-02"},[t._v("去添加点什么吧～")])],1):t._e()],1),i("v-uni-view",{staticClass:"like-header"},[i("v-uni-text",{staticClass:"iconfont icon-icon_label_love",staticStyle:{"margin-top":"2px",color:"#f00"}}),i("v-uni-text",[t._v("猜你喜欢")])],1),t.goods.length?i("v-uni-view",{staticClass:"goods-list"},t._l(t.goods,function(e,a){return i("v-uni-view",{key:a,staticClass:"item-goods",style:"padding-right:"+(a%2==1?0:2)+"px;padding-left:"+(a%2==0?0:2)+"px;"},[i("v-uni-navigator",{attrs:{url:"../index/goods/detail?goods_id="+e.goods_id}},[i("v-uni-view",{staticClass:"img-box"},[i("v-uni-image",{staticClass:"goods-img",attrs:{src:e.photo}})],1),i("v-uni-view",{staticClass:"goods-name"},[i("v-uni-text",{staticClass:"ellipsis-02"},[t._v(t._s(e.goods_name))])],1),i("v-uni-view",{staticClass:"goods-desc"},[i("v-uni-view",{staticClass:"price"},[i("v-uni-text",{staticStyle:{"font-size":"14px"}},[t._v("¥")]),i("v-uni-text",{staticStyle:{"font-size":"18px","margin-left":"3px"}},[t._v(t._s(e.shop_price))])],1),i("v-uni-view",{staticClass:"cost-price"},[i("v-uni-text",[t._v("原价：")]),i("v-uni-text",{staticClass:"cost"},[t._v(t._s(e.market_price))])],1),i("v-uni-text",{staticClass:"iconfont icon-btn_cart icon-cart"})],1)],1)],1)}),1):t._e(),t.more?i("v-uni-view",{staticClass:"more",on:{click:function(e){e=t.$handleEvent(e),t.loadMore(e)}}},[t._v("点击查看更多")]):t._e(),t.more?t._e():i("v-uni-view",{staticClass:"nodata"},[t._v("已经全部为你呈现了")])]:t._e()],2):t._e(),t.goods.length>0?i("v-uni-view",{staticClass:"buy-info"},[i("v-uni-view",{staticClass:"buy-desc"},[i("v-uni-view",{on:{click:function(e){e=t.$handleEvent(e),t.selectAllGoodsListener(e)}}},[i("v-uni-text",{staticClass:"iconfont btn-sel",class:1==t.all_select?"icon-selector_enable":"icon-selector_disable",style:"color:"+(1==t.all_select?"#ED3005":"#888888")}),i("v-uni-text",{staticClass:"sel-all"},[t._v("全选")])],1),i("v-uni-view",{staticStyle:{display:"flex","align-items":"flex-end"}},[i("v-uni-text",{staticClass:"price",staticStyle:{padding:"0 2px 3px 0"}},[t._v("¥")]),i("v-uni-text",{staticClass:"price",staticStyle:{"font-size":"24px"}},[t._v(t._s(t.totalPrice))])],1)],1),i("v-uni-view",{staticClass:"btn-buy",on:{click:function(e){e=t.$handleEvent(e),t.settlement(e)}}},[t._v("结算("+t._s(t.goodsNum)+")")])],1):t._e(),t.goods.length>0?i("v-uni-view",{staticStyle:{width:"100%",height:"110px",background:"#F2F4F5"}}):t._e(),i("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif"}}),i("ToastView"),i("page-footer",{attrs:{footer:t.footers,length:t.footers.length,tabIndex:t.tabIndex,color:t.selectColor}})],1)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},d172:function(t,e,i){"use strict";var a=i("f033"),s=i.n(a);s.a},ee5e:function(t,e,i){"use strict";i.r(e);var a=i("b098"),s=i("4755");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("d172");var n=i("2877"),c=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"e99c86ce",null);e["default"]=c.exports},f033:function(t,e,i){var a=i("1857");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("4f757434",a,!0,{sourceMap:!1,shadowMode:!1})}}]);