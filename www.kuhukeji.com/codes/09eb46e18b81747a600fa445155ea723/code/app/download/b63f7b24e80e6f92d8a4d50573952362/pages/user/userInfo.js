(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/userInfo"],{"0193":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){var t=this.getDate({format:!0});return{userInfo:{birthday:"2008-08-08"},face:"",nickname:"",birthday:"",sex:0,sexArray:["保密","男","女"],end_date:t}},onLoad:function(t){console.log(this.$data.end_date);var e=this;e.wxb.addPage(this),e.wxb.Init(t,function(t){e.getUserInfo()})},onUnload:function(){this.wxb.removePage()},methods:{getUserInfo:function(t){var e=this;e.wxb.Post("/shop/api.user/info",{},function(t){e.$data.userInfo=t,e.$data.face=t.face,e.$data.nickname=t.nickname})},chooseImageListener:function(){var e=this;t.chooseImage({count:1,sizeType:["compressed"],success:function(a){t.uploadFile({url:e.wxb.shopUrl+"/shop/api.upload/imageUpload",fileType:"image",filePath:a.tempFilePaths[0],name:"file",success:function(a){var n=JSON.parse(a.data);console.log(n),200==a.statusCode&&200==n.code?(e.$data.face=n.data.img_url,console.log(e.$data.face)):t.showModal({title:"提示",content:"上传失败",showCancel:!1})},fail:function(e){t.showModal({title:"提示",content:"上传失败",showCancel:!1})},complete:function(){t.hideToast()}})}})},getDate:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return n=n>9?n:"0"+n,s=s>9?s:"0"+s,"".concat(a,"-").concat(n,"-").concat(s)},dateChangeListener:function(t){var e=this.$data.userInfo,a=t.detail.value;e.birthday=a,this.$data.userInfo=e,this.$data.birthday=a},sexChangeListener:function(t){console.log(t);var e=this.$data.userInfo,a=t.detail.value;e.sex=a+"",this.$data.userInfo=e,this.$data.sex=a},submitUserInfo:function(e){var a=this;a.wxb.Post("/shop/api.user/syncUserInfo",{nickname:a.$data.nickname,face:a.$data.face,sex:a.$data.sex,birthday:a.$data.birthday},function(e){a.$showToast({show:!0,content:"修改信息成功"}),t.navigateBack({})})}}};e.default=a}).call(this,a("543d")["default"])},1917:function(t,e,a){"use strict";var n=a("6738"),s=a.n(n);s.a},2727:function(t,e,a){"use strict";a("2346");var n=i(a("b0ce")),s=i(a("5a2c"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(s.default))},"3ee5":function(t,e,a){"use strict";a.r(e);var n=a("0193"),s=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);e["default"]=s.a},"5a2c":function(t,e,a){"use strict";a.r(e);var n=a("e085"),s=a("3ee5");for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);a("1917");var o=a("2877"),r=Object(o["a"])(s["default"],n["a"],n["b"],!1,null,null,null);e["default"]=r.exports},6738:function(t,e,a){},e085:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"userInfo-box"},[a("form",{attrs:{eventid:"4517a079-3"},on:{submit:t.submitUserInfo}},[a("view",{staticClass:"user-menu-item",staticStyle:{height:"90px"},attrs:{eventid:"4517a079-0"},on:{click:t.chooseImageListener}},[a("view",{staticClass:"lt"},[t._v("头像")]),a("view",{staticClass:"rt"},[a("image",{staticClass:"face",attrs:{src:t.face}}),a("text",{staticClass:"arrow iconfont icon-btn_arrowr"})])]),a("view",{staticClass:"user-menu-item"},[a("view",{staticClass:"lt",staticStyle:{flex:"none"}},[t._v("昵称")]),a("view",{staticClass:"rt",staticStyle:{flex:"1",display:"flex"}},[a("input",{staticClass:"input",attrs:{bindinput:"nameChangeListener",name:"name",value:t.nickname,maxlength:"7"}}),a("text",{staticClass:"arrow iconfont icon-btn_arrowr"})])]),a("view",{staticClass:"user-menu-item"},[a("view",{staticClass:"lt"},[t._v("生日")]),a("view",{staticClass:"rt"},[a("picker",{staticStyle:{width:"150px","text-align":"right"},attrs:{mode:"date",end:t.end_date,value:t.userInfo.birthday,eventid:"4517a079-1"},on:{change:t.dateChangeListener}},[a("text",{},[t._v(t._s(t.userInfo.birthday))])]),a("text",{staticClass:"arrow iconfont icon-btn_arrowr"})],1)]),a("view",{staticClass:"user-menu-item"},[a("view",{staticClass:"lt"},[t._v("性别")]),a("view",{staticClass:"rt"},[a("picker",{staticStyle:{width:"150px","text-align":"right"},attrs:{value:t.sex,range:t.sexArray,eventid:"4517a079-2"},on:{change:t.sexChangeListener}},[a("text",[t._v(t._s(0==t.userInfo.sex?"保密":1==t.userInfo.sex?"男":"女"))])]),a("text",{staticClass:"arrow iconfont icon-btn_arrowr"})],1)]),a("button",{staticClass:"btn-save",staticStyle:{background:"#00b5de"},attrs:{"form-type":"submit"}},[t._v("保存")])],1)],1)},s=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s})}},[["2727","common/runtime","common/vendor"]]]);