(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/bargain/join"],{"4ea3":function(t,a,i){},"7d99":function(t,a,i){"use strict";i.r(a);var e=i("e2b6"),s=i.n(e);for(var n in e)"default"!==n&&function(t){i.d(a,t,function(){return e[t]})}(n);a["default"]=s.a},"8e32":function(t,a,i){"use strict";i.r(a);var e=i("9a44"),s=i("7d99");for(var n in s)"default"!==n&&function(t){i.d(a,t,function(){return s[t]})}(n);i("be78");var c=i("2877"),l=Object(c["a"])(s["default"],e["a"],e["b"],!1,null,null,null);a["default"]=l.exports},"9a44":function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("view",{staticClass:"bargain-box"},[t.detail?i("view",[i("view",{staticClass:"bargain-cont"},[i("view",{staticClass:"b-cont"},[i("view",{staticClass:"bc-user"},[i("image",{staticClass:"u-face",attrs:{src:t.detail.face}}),i("view",{staticClass:"u-info"},[i("view",{staticClass:"uname"},[t._v(t._s(t.detail.nickname))]),i("view",{staticClass:"uhint"},[t._v("我发现一件好货，来一起砍价"+t._s(t.detail.bargain_price)+"元拿")])])]),i("view",{staticClass:"bc-goods"},[i("image",{staticClass:"g-img",attrs:{src:t.detail.photo}}),i("view",{staticClass:"g-cont"},[i("view",{staticClass:"cname ellipsis-03"},[t._v(t._s(t.detail.goods_name))]),i("view",{staticClass:"cnum"}),i("view",{staticClass:"cprice"},[i("text",{staticStyle:{color:"#ED3005"}},[t._v("¥")]),i("text",{staticStyle:{color:"#ED3005","font-size":"18px"}},[t._v(t._s(t.detail.bargain_price))]),i("text",{staticStyle:{"margin-left":"8px","text-decoration":"line-through"}},[t._v("原价 ¥"+t._s(t.detail.init_price))])])])]),i("view",{staticClass:"countDown-cont"},[i("text",{staticClass:"hint"},[t._v("剩余")]),i("uni-countdown",{attrs:{color:"#ffffff",splitorColor:"#ED3005","background-color":"#ED3005","border-color":"rgba(0,0,0,0)",hour:t.hour,minute:t.minute,second:t.second,"show-day":!1,mpcomid:"029f79f0-0"}}),i("text",{staticClass:"hint",staticStyle:{color:"#333333"}},[t._v("结束")])],1),i("view",{staticClass:"b-progress"},[i("view",{staticClass:"p-data"},[i("view",{staticClass:"pd-lt"},[i("text",[t._v("已砍")]),i("text",{staticStyle:{"font-size":"16px",color:"#ED3005",margin:"0 4px"}},[t._v("¥")]),i("text",{staticStyle:{"font-size":"20px",color:"#ED3005"}},[t._v(t._s(t.detail.kan_price))])]),i("view",{staticClass:"pd-rt"},[i("text",[t._v("还剩")]),i("text",{staticStyle:{"font-size":"16px",color:"#ED3005",margin:"0 4px"}},[t._v("¥")]),i("text",{staticStyle:{"font-size":"20px",color:"#ED3005"}},[t._v(t._s(t.detail.now_price))])])]),i("view",{staticClass:"p-progress"},[i("progress",{attrs:{percent:t.percentNum,active:"","stroke-width":"8",backgroundColor:"#E6E6E6",activeColor:"#FFC900"}})],1)]),i("view",{staticClass:"b-button"},[1==t.detail.type?i("button",{staticClass:"btn-kan"},[t._v("分享给好友，多砍一刀")]):t._e(),2==t.detail.type?i("button",{staticClass:"btn-kan",attrs:{eventid:"029f79f0-0"},on:{click:t.helpBargainListener}},[t._v("帮好友砍一刀")]):t._e(),3==t.detail.type?i("button",{staticClass:"btn-kan"},[t._v("我也要免费拿")]):t._e(),4==t.detail.type?i("button",{staticClass:"btn-kan",attrs:{eventid:"029f79f0-1"},on:{click:t.helpBargainListener}},[t._v("尊贵VIP再砍一刀")]):t._e(),5==t.detail.type?i("button",{staticClass:"btn-kan",attrs:{eventid:"029f79f0-2"},on:{click:t.buyGoods}},[t._v("立即下单")]):t._e(),6==t.detail.type?i("button",{staticClass:"btn-kan"},[t._v("砍价失败")]):t._e()],1),1==t.detail.type?i("view",{staticClass:"b-record"},[i("view",{staticClass:"record-cont"},[i("view",{staticClass:"rc-tit"},[t._v("砍价记录")]),i("view",{staticClass:"rc-list"},t._l(t.detail.bargain_log,function(a,e){return i("view",{key:e,staticClass:"item-record"},[i("image",{staticClass:"r-img",attrs:{src:a.face}}),i("view",{staticClass:"r-cont"},[i("view",{staticClass:"rc-name"},[t._v(t._s(a.nickname))]),i("view",{staticClass:"rc-hint"},[t._v("来一起砍价"+t._s(t.detail.bargain_price)+"元拿")])]),i("view",{staticClass:"r-time",staticStyle:{display:"flex","align-items":"center"}},[i("image",{staticStyle:{width:"26px",height:"26px"},attrs:{src:t.imgBaseUrl+"/business/icon_kan@3x.png"}}),i("text",{staticStyle:{"margin-left":"5px",color:"#333333","font-size":"14px"}},[t._v("砍掉"+t._s(a.price)+"元")])])])}))])]):t._e(),1!=t.detail.type?i("view",{staticClass:"b-record"},[i("view",{staticClass:"record-cont"},[i("view",{staticClass:"rc-tit"},[t._v("砍价记录")]),i("view",{staticClass:"rc-list"},t._l(t.detail.bargain_log,function(a,e){return i("view",{key:e,staticClass:"item-record"},[i("image",{staticClass:"r-img",attrs:{src:a.face}}),i("view",{staticClass:"r-cont"},[i("view",{staticClass:"rc-name"},[t._v(t._s(a.nickname))]),i("view",{staticClass:"rc-hint"},[t._v("帮助砍了"+t._s(a.price)+"元")])])])}))])]):t._e()])]),i("view",{staticClass:"recommend-list"},[t._m(0),i("view",{staticClass:"r-list"},[t._l(t.list,function(a,e){return i("view",{key:e,staticClass:"item-bargain",attrs:{eventid:"029f79f0-3-"+e},on:{click:function(i){t.$linkListener("detail?id="+a.bargain_id)}}},[i("view",{staticClass:"lt-bargain"},[i("image",{attrs:{src:a.photo}}),a.is_vip_more_bargain?i("view",{staticClass:"hint"},[t._v("PLUS多砍一刀")]):t._e()]),i("view",{staticClass:"rt-bargain"},[i("view",{staticClass:"b-name ellipsis-02"},[t._v(t._s(a.goods_name))]),i("view",{staticClass:"b-sellNum"},[t._v("已送出"+t._s(a.sold_num)+"件")]),i("view",{staticClass:"b-desc"},[i("view",{staticClass:"lt-desc"},[i("view",{staticClass:"price"},[i("text",{staticStyle:{"font-size":"14px"}},[t._v("¥")]),i("text",{staticStyle:{"font-size":"18px","margin-left":"2px"}},[t._v(t._s(a.bargain_price))])]),i("view",{staticClass:"cost-price"},[i("text",[t._v("原价")]),i("text",{staticStyle:{"margin-left":"4px","text-decoration":"line-through"}},[t._v("¥"+t._s(a.init_price))])])]),i("view",{staticClass:"rt-desc"},[t._v(t._s(a.bargain_price)+"元砍")])])])])}),1==t.more?i("view",{staticClass:"more",attrs:{eventid:"029f79f0-4"},on:{click:t.getBargainDetail}},[t._v("点击查看更多")]):t._e(),0==t.more?i("view",{staticClass:"nodata"},[t._v("已经全部为你呈现了")]):t._e()],2)])]):t._e(),t.kanFlag?i("view",{staticClass:"mask"},[i("view",{staticClass:"dialog-kan-box"},[i("view",{staticClass:"dkan-cont"},[i("view",{staticClass:"dc-img"},[i("image",{staticClass:"img",attrs:{src:t.imgBaseUrl+"/business/img_pop_kan@3x.png"}}),i("view",{staticClass:"info"},[i("view",{staticClass:"tit"},[t._v("恭喜您")]),i("view",{staticClass:"desc"},[i("text",[t._v("您已经砍了")]),i("text",{staticStyle:{color:"#FFE600","font-size":"24px","margin-left":"4px"}},[t._v(t._s(t.kan_price)+"元")])])])]),i("view",{staticClass:"dkan-bottom"})]),i("image",{staticClass:"img-close",attrs:{src:t.imgBaseUrl+"/business/btn_close@3x.png",eventid:"029f79f0-5"},on:{click:t.hideKanDialog}}),i("button",{staticClass:"btn-share"},[t._v("分享给好友，多砍一刀")])],1)]):t._e(),t.helpFlag?i("view",{staticClass:"mask"},[i("view",{staticClass:"dialog-help-box"},[i("view",{staticClass:"hkan-cont"},[t._m(1),i("view",{staticClass:"cont"},[i("view",{staticClass:"c-tit"},[t._v("谢谢您")]),t._m(2),i("button",{staticClass:"btn-take"},[t._v("我也要免费拿")])],1)]),i("image",{staticClass:"img-close",attrs:{src:t.imgBaseUrl+"/business/btn_close@3x.png",eventid:"029f79f0-6"},on:{click:t.hideHelpDialog}})])]):t._e(),i("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",mpcomid:"029f79f0-1"}}),i("ToastView",{attrs:{mpcomid:"029f79f0-2"}})],1)},s=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("view",{staticClass:"r-header"},[i("text",{staticClass:"iconfont icon-icon_kanjia",staticStyle:{"font-size":"22px",color:"#ED3005","margin-right":"8px"}}),i("text",[t._v("推荐商品")])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("view",{staticClass:"face-box"},[i("image",{staticClass:"f-img"})])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("view",{staticClass:"c-desc"},[i("text",[t._v("帮我砍了")]),i("text",{staticStyle:{color:"#ED3005","margin-left":"8px","font-size":"24px"}},[t._v("26.56元")])])}];i.d(a,"a",function(){return e}),i.d(a,"b",function(){return s})},be78:function(t,a,i){"use strict";var e=i("4ea3"),s=i.n(e);s.a},e269:function(t,a,i){"use strict";i("2346");var e=n(i("b0ce")),s=n(i("8e32"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,e.default)(s.default))},e2b6:function(t,a,i){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=s(i("9219"));function s(t){return t&&t.__esModule?t:{default:t}}var n={components:{uniCountdown:e.default},data:function(){return{userid:0,hour:0,minute:0,second:0,expire_time:0,list:[],page:1,more:0,kanFlag:!1,helpFlag:!1,bargain_item_id:"",kan_price:"",detail:"",percentNum:0,imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(a){var i=this,e=t.getStorageSync("user_id");void 0!=e&&""!=e&&(i.$data.userid=e),void 0!=a.pid&&""!=a.pid&&t.setStorageSync("pid",a.pid),i.wxb.printLog("=============onLoad================"),i.wxb.addPage(this),i.wxb.Init(a,function(t){if(a.bargain_item_id){var e=a.bargain_item_id,s=a.kan_price;i.$data.bargain_item_id=e,i.$data.kan_price=s,i.getBargainDetail()}})},onUnload:function(){this.wxb.printLog("=============onUnload================"),this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:t.$data.detail&&""!=t.$data.detail.goods_name?t.$data.detail.goods_name:"商品详情",path:"/pages/index/bargain/join?id="+t.$data.bargain_item_id+"&pid="+t.$data.userid}},methods:{helpBargainListener:function(t){var a=this;a.wxb.Post("/shop/api.bargain/helpBargain",{bargain_item_id:a.$data.bargain_item_id},function(t){a.$data.kan_price=t.kan_price,a.$data.page=1,a.getBargainDetail()})},getBargainDetail:function(t){var a=this,i=a.$data.list,e=a.$data.page;1==e&&(i=[]),a.wxb.Post("/shop/api.bargain/helpBargainDetail",{bargain_item_id:a.$data.bargain_item_id,page:a.$data.page},function(t){a.$data.percentNum=t.detail.kan_price/t.detail.init_price*100|0,console.log("percentNum=>"+a.$data.percentNum);var e=t.tuijian;for(var s in e)i.push(e[s]);a.$data.list=e,a.$data.more=t.isMore,a.$data.page+=1,a.$data.detail=t.detail,a.$data.expire_time=t.detail.expire_time,console.log("倒计时->"+t.detail.expire_time);var n=a.$data.expire_time,c=n/3600|0,l=(Math.round(n)-3600*c)/60|0;n=n%60|0;console.log("hour->"+c),console.log("minute->"+l),console.log("second->"+n),a.$data.hour=c,a.$data.minute=l,a.$data.second=n,a.$data.kan_price>0&&a.showKanDialog()})},buyGoods:function(a){t.redirectTo({url:"buy?bargain_item_id="+this.$data.bargain_item_id})},showKanDialog:function(){this.$data.kanFlag=!0},hideKanDialog:function(){this.$data.kanFlag=!1},showHelpDialog:function(){this.$data.helpFlag=!0},hideHelpDialog:function(){this.$data.helpFlag=!1}}};a.default=n}).call(this,i("543d")["default"])}},[["e269","common/runtime","common/vendor"]]]);