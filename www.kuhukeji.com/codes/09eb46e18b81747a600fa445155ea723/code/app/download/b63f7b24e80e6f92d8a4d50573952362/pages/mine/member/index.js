(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/member/index"],{"086b":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{userid:0,current:0,member:"",paymentFlag:!1,stateIndex:0,imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(e){var i=this,s=t.getStorageSync("user_id");void 0!=s&&""!=s&&(i.$data.userid=s),void 0!=e.pid&&""!=e.pid&&t.setStorageSync("pid",e.pid),i.wxb.printLog(e),e.tabIndex&&(i.$data.tindex=e.tabIndex-0,i.$data.type=e.tabIndex-0),i.wxb.addPage(this),i.wxb.Init(e,function(t){i.getMemberInfo()})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:""==t.$data.companyName?"会员中心":t.$data.companyName,path:"/pages/mine/member/index?pid="+t.$data.userid}},methods:{showPaymentWay:function(e){if(this.member.vip_price<.01)return t.showToast({title:"最低0.01元哦"}),!1;"h5"==this.wxb.device?this.$data.paymentFlag=!0:this.openMemberListener(0)},hidePaymentWay:function(t){this.$data.paymentFlag=!1},openMemberListener:function(t){var e=this,i="";2==t?i="ali":3==t&&(i="weixin"),e.$data.stateIndex=t,e.hidePaymentWay(),e.wxb.Post("/shop/api.vip/payForVip",{is_usermoney:1==t?1:0,pay_type:"h5"==e.wxb.device?i:""},function(t){if(0==t.is_pay)e.getMemberInfo();else if("h5"==e.wxb.device)if("weixin"==i)console.log("h5端支付跳转超链接"),window.location.href=t.order_info;else{var s=window.document.createElement("div");s.innerHTML=t.order_info,window.document.body.appendChild(s),window.document.forms.alipaysubmit.submit()}else e.wxb.paymentOrder(t,function(t){e.getMemberInfo()})})},onSwiperChangeListener:function(t){console.log(t),this.$data.current=t.detail.current},getMemberInfo:function(){var t=this;t.wxb.Post("/shop/api.vip/index",{},function(e){t.$data.member=e,"baidu"==t.wxb.device&&swan.setPageInfo&&swan.setPageInfo({title:e.seo.title?"":e.seo.title,keywords:e.seo.keywords?"":e.seo.keywords,description:e.seo.description?"":e.seo.description,releaseDate:e.seo.releaseDate?"":e.seo.releaseDate,image:e.seo.image?"":e.seo.image,success:function(){console.log("百度SEO信息设置完成")}})})},selectCoupon:function(e){console.log(e),t.reLaunch({url:"../../classify/index"})}}};e.default=i}).call(this,i("543d")["default"])},"3e9b":function(t,e,i){"use strict";i("2346");var s=n(i("b0ce")),a=n(i("50e9"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))},"50e9":function(t,e,i){"use strict";i.r(e);var s=i("ece6"),a=i("ea08");for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);i("84bd");var c=i("2877"),o=Object(c["a"])(a["default"],s["a"],s["b"],!1,null,null,null);e["default"]=o.exports},"84bd":function(t,e,i){"use strict";var s=i("d5f7"),a=i.n(s);a.a},d5f7:function(t,e,i){},ea08:function(t,e,i){"use strict";i.r(e);var s=i("086b"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);e["default"]=a.a},ece6:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"member-box"},[t.member?i("block",[i("view",{staticClass:"member-base"},[i("image",{staticClass:"img-bg",attrs:{src:t.imgBaseUrl+"/mine/bg_vip01@3x.png"}}),i("view",{staticClass:"m-grade-desc"},[i("text",{staticClass:"mg-text"},[t._v("当前等级")]),i("text",{staticClass:"mg-line"}),i("text",{staticClass:"mg-text"},[t._v("普通会员")])]),i("view",{staticClass:"m-grade-name"},[t._v("PLUS超级会员")])]),i("view",{staticClass:"member-menu"},[i("swiper",{staticClass:"swiper-box",attrs:{circular:"true",eventid:"3ed2ea16-0"},on:{change:t.onSwiperChangeListener}},[i("swiper-item",{attrs:{mpcomid:"3ed2ea16-0"}},[i("view",{staticClass:"item-menu"},[i("image",{staticClass:"m-icon",attrs:{src:t.imgBaseUrl+"/mine/icon_rights01@3x.png"}}),i("view",{staticClass:"m-name"},[t._v("满减专区")])]),i("view",{staticClass:"item-menu"},[i("image",{staticClass:"m-icon",attrs:{src:t.imgBaseUrl+"/mine/icon_rights02@3x.png"}}),i("view",{staticClass:"m-name"},[t._v("专享折扣")])]),i("view",{staticClass:"item-menu"},[i("image",{staticClass:"m-icon",attrs:{src:t.imgBaseUrl+"/mine/icon_rights03@3x.png"}}),i("view",{staticClass:"m-name"},[t._v("专属优惠券")])]),i("view",{staticClass:"item-menu"},[i("image",{staticClass:"m-icon",attrs:{src:t.imgBaseUrl+"/mine/icon_rights04@3x.png"}}),i("view",{staticClass:"m-name"},[t._v("积分翻倍")])])]),i("swiper-item",{attrs:{mpcomid:"3ed2ea16-1"}},[i("view",{staticClass:"item-menu"},[i("image",{staticClass:"m-icon",attrs:{src:t.imgBaseUrl+"/mine/icon_rights05@3x.png"}}),i("view",{staticClass:"m-name"},[t._v("会员特价")])]),i("view",{staticClass:"item-menu"},[i("image",{staticClass:"m-icon",attrs:{src:t.imgBaseUrl+"/mine/icon_rights06@3x.png"}}),i("view",{staticClass:"m-name"},[t._v("拼团专拼")])]),i("view",{staticClass:"item-menu"},[i("image",{staticClass:"m-icon",attrs:{src:t.imgBaseUrl+"/mine/icon_rights07@3x.png"}}),i("view",{staticClass:"m-name"},[t._v("多砍一刀")])])])],1),i("view",{staticClass:"dot-box"},[i("text",{staticClass:"item-dot",class:0==t.current?"active":""}),i("text",{staticClass:"item-dot",class:1==t.current?"active":""})])],1),i("view",{staticClass:"manjian-box"},[i("view",{staticClass:"mj-tit"},[i("view",{staticClass:"t-lt"},[i("text",[t._v("满减专区")])]),i("navigator",{staticClass:"t-rt",attrs:{url:"../../index/manjian/list"}},[i("text",{staticStyle:{"margin-right":"10px"}},[t._v("更多满减")]),i("text",{staticClass:"iconfont icon-btn_arrowr"})])],1),i("view",{staticClass:"mj-cont scroll-box",attrs:{"scroll-x":"true"}},[i("scroll-view",{staticClass:"scroll-module",attrs:{"scroll-x":""}},t._l(t.member.manjian,function(e,s){return i("navigator",{key:s,staticClass:"item-goods",attrs:{url:"../../index/goods/detail?goods_id="+e.goods_id}},[i("view",{staticClass:"g-img"},[i("image",{staticClass:"img",attrs:{src:e.photo}}),i("text",{staticClass:"tag"},[t._v("满"+t._s(e.vip_man_price)+"减"+t._s(e.vip_jian_price))])]),i("view",{staticClass:"g-name"},[t._v(t._s(e.goods_name))]),i("view",{staticClass:"g-price"},[i("view",{staticClass:"shop-price"},[i("text",{staticClass:"mark"},[t._v("¥")]),i("text",{staticClass:"value"},[t._v(t._s(e.plus_vip_price))])]),i("view",{staticClass:"market-price"},[i("text",{staticClass:"mark"},[t._v("原价：")]),i("text",{staticClass:"value"},[t._v("¥"+t._s(e.shop_price))])])])])}))],1)]),i("view",{staticClass:"discount-box"},[i("view",{staticClass:"db-tit"},[i("view",{staticClass:"t-lt"},[i("text",[t._v("专享折扣")])]),i("navigator",{staticClass:"t-rt",attrs:{url:"../../index/discount/list"}},[i("text",{staticStyle:{"margin-right":"10px"}},[t._v("更多折扣")]),i("text",{staticClass:"iconfont icon-btn_arrowr"})])],1),i("view",{staticClass:"db-cont scroll-box",attrs:{"scroll-x":"true"}},[i("scroll-view",{staticClass:"scroll-module",attrs:{"scroll-x":""}},t._l(t.member.manjian,function(e,s){return i("navigator",{key:s,staticClass:"item-discount",attrs:{url:"../../index/goods/detail?goods_id="+e.goods_id}},[i("view",{staticClass:"d-img"},[i("image",{staticClass:"img",attrs:{src:e.photo}}),i("text",{staticClass:"tag"},[t._v(t._s(e.vip_discount)+"折")])]),i("view",{staticClass:"d-name"},[t._v(t._s(e.goods_name))]),i("view",{staticClass:"m-price"},[i("text",[t._v("会员价：")]),i("text",[t._v("¥")]),i("text",{staticStyle:{"font-size":"18px"}},[t._v(t._s(e.plus_vip_price))])]),i("view",{staticClass:"d-price"},[i("text",[t._v("非会员价：")]),i("text",{staticStyle:{"text-decoration":"line-through"}},[t._v("¥"+t._s(e.shop_price))])])])}))],1)]),i("view",{staticClass:"coupon-box"},[i("view",{staticClass:"cb-tit"},[i("view",{staticClass:"t-lt"},[i("text",[t._v("专属优惠券")])]),i("view",{staticClass:"t-rt"})]),i("view",{staticClass:"cb-cont"},[i("uni-couponView",{attrs:{type:4,iData:t.member.coupon,eventid:"3ed2ea16-1",mpcomid:"3ed2ea16-2"},on:{selectCoupon:t.selectCoupon}})],1)]),i("view",{staticClass:"coupon-box"},[i("view",{staticClass:"cb-tit"},[i("view",{staticClass:"t-lt"},[i("text",[t._v("积分翻倍")])])]),i("view",{staticClass:"cb-cont",staticStyle:{width:"92%",margin:"16px 4% 20px 4%",border:"1px solid #F2F4F7",padding:"0 15px",display:"inline-block"}},[i("view",{staticClass:"header"},[i("text",[t._v("可获得双倍积分，最高")]),i("text",[t._v("x10")]),i("text",[t._v("倍积分暴击")])]),i("view",{staticClass:"detail-cont"},[i("view",{staticClass:"item-upgrade"},[i("view",{staticClass:"ig-tit"},[t._v("普通用户")]),i("view",{staticClass:"ig-cont"},[i("image",{staticClass:"icon-coin",attrs:{src:t.imgBaseUrl+"/mine/icon_coin@2x.png"}}),i("text",{staticClass:"num"},[t._v("10")])])]),i("image",{staticClass:"upgrade-arrow",attrs:{src:t.imgBaseUrl+"/mine/icon_arrowr_gray@2x.png"}}),i("view",{staticClass:"item-upgrade"},[i("view",{staticClass:"ig-tit"},[t._v("PLUS会员")]),i("view",{staticClass:"ig-cont"},[i("image",{staticClass:"icon-coin",attrs:{src:t.imgBaseUrl+"/mine/icon_coin@2x.png"}}),i("text",{staticClass:"num"},[t._v("20+")])])])]),i("view",{staticClass:"notice-box"},[i("image",{staticClass:"icon-notice",attrs:{src:t.imgBaseUrl+"/mine/icon_notice@2x.png"}}),i("view",{staticClass:"notice-list"},[i("swiper",{staticStyle:{height:"50rpx"},attrs:{circular:"true",vertical:"true",interval:"3000",duration:"500",autoplay:"true"}},t._l(t.member.vip_order,function(e,s){return i("swiper-item",{key:s,attrs:{catchtouchmove:"catchTouchMove",mpcomid:"3ed2ea16-3-"+s}},[i("view",{staticClass:"item-notice"},[i("text",[t._v("恭喜")]),i("text",{staticClass:"phone"},[t._v(t._s(e))]),i("text",[t._v("获得"+t._s(t.member.vip_combo)+"倍游币暴击！")])])])}))],1)])])]),i("view",{staticStyle:{width:"100%",height:"60px"}}),i("view",{staticClass:"bottom-box"},[t.member.is_vip?i("view",{staticClass:"item-bottom",staticStyle:{background:"#fff"}},[i("view",{staticStyle:{"margin-top":"10px",color:"#333333","font-size":"14px"}},[t._v("已开通")]),i("view",{staticStyle:{"margin-top":"4px"}},[i("text",{staticStyle:{color:"#ED3005","margin-right":"4px"}},[t._v(t._s(t.member.plus_expire_time))]),i("text",{staticStyle:{color:"#999999"}},[t._v("到期")])])]):t._e(),t.member.is_vip?i("view",{staticClass:"item-bottom",staticStyle:{"text-align":"center",color:"#fff"},attrs:{eventid:"3ed2ea16-2"},on:{click:t.showPaymentWay}},[i("view",{staticStyle:{"font-size":"18px","margin-top":"8px"}},[t._v("续费")]),i("view",{staticStyle:{"font-size":"12px","margin-top":"2px"}},[t._v("¥"+t._s(t.member.vip_price)+"/年")])]):t._e(),t.member.is_vip?t._e():i("view",{staticClass:"item-bottom",staticStyle:{background:"#fff","align-items":"center",display:"flex"}},[i("text",{staticStyle:{"font-size":"14px",color:"#ED3005"}},[t._v("¥")]),i("text",{staticStyle:{"font-size":"18px",color:"#ED3005"}},[t._v(t._s(t.member.vip_price)+"/年")]),i("text",{staticStyle:{"text-decoration":"line-through",color:"#999999","font-size":"14px","margin-left":"8px"}},[t._v("¥"+t._s(t.member.vip_huaxian_price))])]),t.member.is_vip?t._e():i("view",{staticClass:"item-bottom",staticStyle:{"text-align":"center",color:"#fff","align-items":"center",display:"flex","justify-content":"center"},attrs:{eventid:"3ed2ea16-3"},on:{click:t.showPaymentWay}},[i("view",{staticStyle:{"font-size":"18px"}},[t._v("立即开通")])])])]):t._e(),i("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",mpcomid:"3ed2ea16-4"}}),i("ToastView",{attrs:{mpcomid:"3ed2ea16-5"}}),t.paymentFlag?i("view",{staticClass:"mask"},[i("view",{staticClass:"dialog-payment-box"},[i("view",{staticClass:"db-header"},[i("view",{staticClass:"h-lt"},[t._v("选择支付方式")]),i("view",{staticClass:"h-rt iconfont icon-btn_close_black",attrs:{eventid:"3ed2ea16-4"},on:{click:t.hidePaymentWay}})]),i("view",{staticClass:"db-cont"},[i("view",{staticClass:"item-options"},[i("view",{staticClass:"io-lt"},[t._v("余额支付")]),i("view",{staticClass:"io-rt iconfont",class:1==t.stateIndex?"icon-selector_enable":"icon-selector_disable",style:"color:"+(1==t.stateIndex?"#ED3005;":"#CCCCCC;"),attrs:{eventid:"3ed2ea16-5"},on:{click:function(e){t.openMemberListener(1)}}})]),i("view",{staticClass:"item-options"},[i("view",{staticClass:"io-lt"},[t._v("支付宝支付")]),i("view",{staticClass:"io-rt iconfont",class:2==t.stateIndex?"icon-selector_enable":"icon-selector_disable",style:"color:"+(2==t.stateIndex?"#ED3005;":"#CCCCCC;"),attrs:{eventid:"3ed2ea16-6"},on:{click:function(e){t.openMemberListener(2)}}})]),i("view",{staticClass:"item-options"},[i("view",{staticClass:"io-lt"},[t._v("微信支付")]),i("view",{staticClass:"io-rt iconfont",class:3==t.stateIndex?"icon-selector_enable":"icon-selector_disable",style:"color:"+(3==t.stateIndex?"#ED3005;":"#CCCCCC;"),attrs:{eventid:"3ed2ea16-7"},on:{click:function(e){t.openMemberListener(3)}}})])])])]):t._e()],1)},a=[];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})}},[["3e9b","common/runtime","common/vendor"]]]);