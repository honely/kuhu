(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/order/refund/index"],{"0c6f":function(t,s,a){},"1aca":function(t,s,a){"use strict";var i=a("0c6f"),e=a.n(i);e.a},"487c":function(t,s,a){"use strict";a.r(s);var i=a("4bfc"),e=a("5efb");for(var o in e)"default"!==o&&function(t){a.d(s,t,function(){return e[t]})}(o);a("1aca");var r=a("2877"),n=Object(r["a"])(e["default"],i["a"],i["b"],!1,null,null,null);s["default"]=n.exports},"4bfc":function(t,s,a){"use strict";var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("view",{staticClass:"refund-box",attrs:{_hid:0}},[a("view",{staticClass:"refund-cont",attrs:{_hid:1}},[t._l(t.detail.order_goods,function(s,i,e){var o=void 0!==e?e:i;return a("view",{key:i,staticClass:"goods-base",attrs:{_hid:2,_fid:o,_fk:"i"}},[a("image",{staticClass:"g-img",attrs:{src:s.goods_photo,_hid:3,_fid:o,_batrs:"src"}}),a("view",{staticClass:"g-info",attrs:{_hid:4,_fid:o}},[a("view",{staticClass:"gi-name ellipsis-02",attrs:{_hid:5,_fid:o}},[t._v(t._s(s.goods_name),6,o)]),a("view",{staticClass:"gi-sku",attrs:{_hid:7,_fid:o}},[a("view",{staticClass:"sku-desc",attrs:{_hid:8,_fid:o}},[t._v(t._s(s.spec_key_name),9,o)]),a("view",{staticClass:"goods-num",attrs:{_hid:10,_fid:o}},[t._v("x"+t._s(s.goods_num),11,o)])])])])},2,t._self),a("view",{staticClass:"refund-desc",attrs:{_hid:12}},[a("view",{staticClass:"item-refund",attrs:{_hid:13},on:{click:t.showOrderStateDialog}},[a("view",{staticClass:"ir-lt",attrs:{_hid:14}},[]),a("view",{staticClass:"ir-rt",attrs:{_hid:16}},[a("text",{staticStyle:{color:"#000"},attrs:{_hid:17}},[t._v(t._s(0==t.stateIndex?"未收到货":"已收到货"),18)]),a("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:19}})])]),a("view",{staticClass:"item-refund",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:20},on:{click:t.showOrderReasonDialog}},[a("view",{staticClass:"ir-lt",attrs:{_hid:21}},[]),a("view",{staticClass:"ir-rt",attrs:{_hid:23}},[a("text",{style:"color:"+(""==t.resonDesc?"":"#000;"),attrs:{_hid:24}},[t._v(t._s(""==t.resonDesc?"请选择":t.resonDesc),25)]),a("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:26}})])])]),t._m(0),a("view",{staticClass:"shopping-num",attrs:{_hid:32}},[]),a("view",{staticClass:"reason-cont",attrs:{_hid:34}},[a("textarea",{staticClass:"rc-area",attrs:{placeholder:"退款说明（选填）",_hid:35},on:{input:t.reasonChangeListener}})]),a("view",{staticClass:"reason-img",attrs:{_hid:36}},[a("view",{staticClass:"ri-tit",attrs:{_hid:37}},[]),a("view",{staticClass:"ri-cont",attrs:{_hid:39}},[t._l(t.list,function(s,i,e){var o=void 0!==e?e:i;return a("view",{key:i,staticClass:"model-img",attrs:{_hid:40,_fid:o,_fk:"i"}},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:s,_hid:41,_fid:o,_batrs:"src"}}),a("image",{staticClass:"iv-delete",attrs:{src:t.imgBaseUrl+"/order/btn_deletePhoto@3x.png",_hid:42,_fid:o,_batrs:"src"},on:{click:function(s){t.deletePhotoListener(i)}}})])},40,t._self),t._ri(!!(t.list.length<6),43)?a("view",{staticClass:"model-img",attrs:{_hid:43}},[a("view",{staticClass:"add-img",attrs:{_hid:44},on:{click:t.addPhotoListener}},[a("view",{staticClass:"iconfont icon-btn_photo",staticStyle:{"font-size":"24px"},attrs:{_hid:45}}),a("view",{staticStyle:{"margin-top":"10px"},attrs:{_hid:46}},[])])]):t._e()],1)]),a("view",{staticStyle:{width:"100%",height:"70px"},attrs:{_hid:48}}),a("view",{staticClass:"bottom-box",attrs:{_hid:49}},[a("button",{staticClass:"btn-submit",attrs:{_hid:50},on:{click:t.submitApplyListener}},[])],1)],1),t._ri(!!t.stateFlag,52)?a("view",{staticClass:"mask",attrs:{_hid:52}},[a("view",{staticClass:"dialog-box",attrs:{_hid:53}},[a("view",{staticClass:"db-header",attrs:{_hid:54}},[a("view",{staticClass:"h-lt",attrs:{_hid:55}},[]),a("view",{staticClass:"h-rt iconfont icon-btn_close_black",attrs:{_hid:57},on:{click:t.hideOrderStateDialog}})]),a("view",{staticClass:"db-cont",attrs:{_hid:58}},[a("view",{staticClass:"item-options",attrs:{_hid:59}},[a("view",{staticClass:"io-lt",attrs:{_hid:60}},[]),a("view",{staticClass:"io-rt iconfont",class:0==t.stateIndex?"icon-selector_enable":"icon-selector_disable",style:"color:"+(0==t.stateIndex?"#ED3005;":"#CCCCCC;"),attrs:{_hid:62},on:{click:function(s){t.radioStateListener(0)}}})]),a("view",{staticClass:"item-options",attrs:{_hid:63}},[a("view",{staticClass:"io-lt",attrs:{_hid:64}},[]),a("view",{staticClass:"io-rt iconfont",class:1==t.stateIndex?"icon-selector_enable":"icon-selector_disable",style:"color:"+(1==t.stateIndex?"#ED3005;":"#CCCCCC;"),attrs:{_hid:66},on:{click:function(s){t.radioStateListener(1)}}})])])])]):t._e(),t._ri(!!t.reasonFlag,67)?a("view",{staticClass:"mask",attrs:{_hid:67}},[a("view",{staticClass:"dialog-box",attrs:{_hid:68}},[a("view",{staticClass:"db-header",attrs:{_hid:69}},[a("view",{staticClass:"h-lt",attrs:{_hid:70}},[]),a("view",{staticClass:"h-rt iconfont icon-btn_close_black",attrs:{_hid:72},on:{click:t.hideOrderReasonDialog}})]),a("view",{staticClass:"db-cont",attrs:{_hid:73}},t._l(t.reasonList,function(s,i,e){var o=void 0!==e?e:i;return a("view",{key:i,staticClass:"item-options",attrs:{_hid:74,_fid:o,_fk:"i"}},[a("view",{staticClass:"io-lt",attrs:{_hid:75,_fid:o}},[t._v(t._s(s.value),76,o)]),a("view",{staticClass:"io-rt iconfont",class:t.reasonIndex==s.key?"icon-selector_enable":"icon-selector_disable",style:"color:"+(t.reasonIndex==s.key?"#ED3005;":"#CCCCCC;"),attrs:{_hid:77,_fid:o},on:{click:function(a){t.radioReasonListener(s)}}})])},74,t._self))])]):t._e()])},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("view",{staticClass:"refund-money",attrs:{_hid:27}},[a("view",{staticClass:"rm-lt",attrs:{_hid:28}},[]),a("view",{staticClass:"rm-rt",attrs:{_hid:30}},[])])}];a.d(s,"a",function(){return i}),a.d(s,"b",function(){return e})},"5efb":function(t,s,a){"use strict";a.r(s);var i=a("cd8c"),e=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(s,t,function(){return i[t]})}(o);s["default"]=e.a},"61e2":function(t,s,a){"use strict";a("2346");var i=o(a("487c")),e=o(a("3a53"));function o(t){return t&&t.__esModule?t:{default:t}}i.default.mpType="page";var r=new e.default(i.default);r.$mount()},cd8c:function(t,s,a){"use strict";(function(t){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var a={data:function(){return{stateFlag:!1,stateIndex:0,reasonFlag:!1,reasonIndex:0,resonDesc:"",order_id:"",detail:"",list:[],reasonData:"",reasonList:[],resonCont:"",imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(t){var s=this;s.wxb.printLog(t),s.wxb.addPage(this),s.wxb.Init(t,function(a){t.order_id&&(s.$data.order_id=t.order_id,s.getOrderDetail(),s.getApplyRefund())})},onUnload:function(){this.wxb.removePage()},methods:{getApplyRefund:function(t){var s=this;s.wxb.Post("/shop/api.order/rejectCancelOrder",{order_id:s.$data.order_id},function(t){console.log(t),s.$data.reasonData=t,0==s.$data.stateIndex?s.$data.reasonList=t.no_goods_reject_reason:s.$data.reasonList=t.has_goods_reject_reason})},reasonChangeListener:function(t){var s=t.detail.value;this.$data.resonCont=s},addPhotoListener:function(s){var a=this;a.$data.list.length<6&&t.chooseImage({count:1,sizeType:["compressed"],success:function(s){console.log(s),t.uploadFile({url:a.wxb.shopUrl+"/shop/api.upload/imageUpload",fileType:"image",filePath:s.tempFilePaths[0],name:"file",success:function(s){var i=JSON.parse(s.data);console.log(i),200==s.statusCode&&200==i.code?(a.$data.list.push(i.data.img_url),console.log(a.$data.list)):t.showModal({title:"提示",content:"上传失败",showCancel:!1})},fail:function(s){t.showModal({title:"提示",content:"上传失败",showCancel:!1})},complete:function(){t.hideToast()}})}})},submitApplyListener:function(s){var a=this;a.wxb.Post("/shop/api.order/applyRefundSub",{order_id:a.$data.order_id,reject_goods_status:a.$data.stateIndex,reject_reason:a.$data.reasonIndex,reject_content:a.$data.resonCont,reject_photos:JSON.stringify(a.$data.list)},function(s){console.log(s),t.redirectTo({url:""})})},deletePhotoListener:function(t){var s=this.$data.list;s.splice(t,1),this.$data.list=s},radioStateListener:function(t){this.$data.stateIndex=t,this.$data.reasonList=0==t?this.reasonData.no_goods_reject_reason:this.reasonData.has_goods_reject_reason},showOrderStateDialog:function(t){this.$data.stateFlag=!0},hideOrderStateDialog:function(t){this.$data.stateFlag=!1},radioReasonListener:function(t){this.$data.reasonIndex=t.key,this.$data.resonDesc=t.value,this.hideOrderReasonDialog()},showOrderReasonDialog:function(t){this.$data.reasonFlag=!0},hideOrderReasonDialog:function(t){this.$data.reasonFlag=!1},getOrderDetail:function(t){var s=this;s.wxb.Post("/shop/api.order/getDetail",{order_id:s.$data.order_id},function(t){s.$data.detail=t})}}};s.default=a}).call(this,a("f266")["default"])}},[["61e2","common/runtime","common/vendor"]]]);