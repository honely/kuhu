(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/phoneLogin"],{"09f9":function(t,e,i){"use strict";i.r(e);var a=i("f450"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=n.a},"395c":function(t,e,i){"use strict";i("2346");var a=o(i("7410")),n=o(i("3a53"));function o(t){return t&&t.__esModule?t:{default:t}}a.default.mpType="page";var s=new n.default(a.default);s.$mount()},7410:function(t,e,i){"use strict";i.r(e);var a=i("d5da"),n=i("09f9");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("ec51");var s=i("2877"),d=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,null,null);e["default"]=d.exports},8617:function(t,e,i){},d5da:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"app",attrs:{_hid:0}},[i("form",{attrs:{_hid:1},on:{submit:t.smsLogin}},[t._ri(!(1!=t.tabIndex),2)?i("view",{attrs:{_hid:2}},[i("view",{staticClass:"login-cont",attrs:{_hid:3}},[i("view",{staticClass:"item-input",attrs:{_hid:4}},[i("view",{staticClass:"ii-tit",attrs:{_hid:5}},[]),i("input",{staticClass:"ii-input",attrs:{name:"phone","data-type":"1",placeholder:"请输入手机号码","placeholder-style":"color:#CCCCCC;",_hid:7},on:{input:t.inputChangeListener}})]),i("view",{staticClass:"item-input",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:8}},[i("view",{staticClass:"ii-tit",attrs:{_hid:9}},[]),i("input",{staticClass:"ii-input",attrs:{name:"code","data-type":"2",placeholder:"请输入短信验证码","placeholder-style":"color:#CCCCCC;",_hid:11},on:{input:t.inputChangeListener}}),i("view",{staticClass:"get-code",attrs:{_hid:12},on:{click:t.getSmsCode}},[t._ri(!t.showTime,13)?i("text",{attrs:{_hid:13}},[]):t._e(),t._ri(!!t.showTime,15)?i("view",{attrs:{_hid:15}},[i("uni-countdown",{attrs:{color:"#ffffff",splitorColor:"#ffffff","background-color":"#ED3005","border-color":"rgba(0,0,0,0)",second:t.second,"show-day":!1,styleNum:3,_hid:16,_batrs:"second,show-day,styleNum",_cid:0},on:{timeup:t.timeupListener}})],1):t._e()])])]),i("button",{staticClass:"btn-login",style:"background: "+(t.is_phone?t.theme.mainColor:"#CCCCCC"),attrs:{"form-type":"submit",_hid:1018}},[])],1):t._e()]),i("form",{attrs:{_hid:1020},on:{submit:t.phoneLogin}},[t._ri(!(2!=t.tabIndex),1021)?i("view",{attrs:{_hid:1021}},[i("view",{staticClass:"login-cont",attrs:{_hid:1022}},[i("view",{staticClass:"item-input",attrs:{_hid:1023}},[i("view",{staticClass:"ii-tit",attrs:{_hid:1024}},[]),i("input",{staticClass:"ii-input",attrs:{name:"account","data-type":"3",placeholder:"请输入手机号码","placeholder-style":"color:#CCCCCC;",_hid:1026},on:{input:t.inputChangeListener}})]),i("view",{staticClass:"item-input",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:1027}},[i("view",{staticClass:"ii-tit",attrs:{_hid:1028}},[]),i("input",{staticClass:"ii-input",attrs:{name:"password","data-type":"4",placeholder:"请输入登录密码","placeholder-style":"color:#CCCCCC;",_hid:1030},on:{input:t.inputChangeListener}})])]),i("button",{staticClass:"btn-login",style:"background:"+(t.is_account?"#ED3005":"#CCCCCC"),attrs:{"form-type":"submit",_hid:1031}},[])],1):t._e()]),i("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:1033,_batrs:"img",_cid:1}}),i("ToastView",{attrs:{_hid:2035,_cid:2}})],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},ec51:function(t,e,i){"use strict";var a=i("8617"),n=i.n(a);n.a},f450:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("9219"));function n(t){return t&&t.__esModule?t:{default:t}}var o={data:function(){return{theme:{mianColor:"red"},tabIndex:1,phone:"",code:"",is_phone:!1,account:"",password:"",is_account:!1,second:0,showTime:!1,imgBaseUrl:""}},components:{uniCountdown:a.default},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(e){var i=this,a=t.getStorageSync("pid");void 0!=a&&""!=a&&(i.$data.pid=a),i.wxb.printLog("=============onLoad================"),i.wxb.addPage(this),i.wxb.Init(e,function(t){i.$data.theme=t.skin.theme})},onUnload:function(){this.wxb.printLog("=============onUnload================"),this.wxb.removePage()},methods:{timeupListener:function(t){this.$data.second=0,this.$data.showTime=!1},onTabListener:function(t){this.$data.tabIndex=t},getSmsCode:function(e){var i=this,a=i.$data.second;a>0||(t.showLoading({title:"加载中..."}),i.wxb.Post("/shop/api.passport/getSmsCode",{mobile:i.$data.phone},function(e){t.hideLoading(),i.$data.second=60,i.$data.showTime=!0}))},smsLogin:function(e){var i=this,a=e.detail.value;""!=a.phone&&""!=a.code&&i.wxb.Post("/shop/api.passport/mobile",{sms_code:a.code,mobile:a.phone,open_id:""==i.wxb.open_id?t.getStorageSync("open_id"):i.wxb.open_id,pid:i.$data.pid},function(e){console.log(e),e&&e.user_token&&(t.setStorageSync("user_token",e.user_token),t.setStorageSync("user_id",e.user_id)),i.$redirectTo("/pages/mine/index")})},phoneLogin:function(e){var i=this,a=e.detail.value;""!=a.phone&&""!=a.code&&i.wxb.Post("/shop/api.passport/login",{mobile:a.account,password:a.password,open_id:i.wxb.open_id,pid:i.$data.pid},function(e){e&&e.user_token&&(t.setStorageSync("user_token",e.user_token),t.setStorageSync("user_id",e.user_id)),i.$redirectTo("/pages/mine/index")})},inputChangeListener:function(t){console.log(t);var e=t.currentTarget.dataset.type,i=t.detail.value,a=this;switch(e-0){case 1:a.$data.phone=i;break;case 2:a.$data.code=i;break;case 3:a.$data.account=i;break;case 4:a.$data.password=i;break}""!=a.$data.phone&&""!=a.$data.code?a.$data.is_phone=!0:a.$data.is_phone=!1,""!=a.$data.account&&""!=a.$data.password?a.$data.is_account=!0:a.$data.is_account=!1}}};e.default=o}).call(this,i("f266")["default"])}},[["395c","common/runtime","common/vendor"]]]);