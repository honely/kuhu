(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/mine/address/index"],{"13ed":function(t,i,e){"use strict";e("2346");var a=d(e("d848")),s=d(e("3a53"));function d(t){return t&&t.__esModule?t:{default:t}}a.default.mpType="page";var n=new s.default(a.default);n.$mount()},"3a59":function(t,i,e){"use strict";var a=e("a9fc"),s=e.n(a);s.a},"42ae":function(t,i,e){"use strict";e.r(i);var a=e("ad01"),s=e.n(a);for(var d in a)"default"!==d&&function(t){e.d(i,t,function(){return a[t]})}(d);i["default"]=s.a},"9bea":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("scroll-view",{staticStyle:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0"},attrs:{"scroll-y":"true",_hid:0}},[e("view",{staticClass:"btn-add-address",attrs:{"data-type":"0",_hid:1},on:{click:t.editAddressListener}},[e("text",{staticClass:"add-icon iconfont icon-btn_add1",attrs:{_hid:2}}),e("text",{staticClass:"add-hint",attrs:{_hid:3}},[])]),e("view",{staticClass:"address-list",attrs:{_hid:5}},[t._l(t.list,function(i,a,s){var d=void 0!==s?s:a;return e("view",{key:a,staticClass:"item-address",attrs:{_hid:6,_fid:d,_fk:"i"}},[e("view",{staticClass:"lt-addr",attrs:{_hid:7,_fid:d}},[e("view",{staticClass:"u-info",attrs:{_hid:8,_fid:d}},[e("text",{attrs:{_hid:9,_fid:d}},[t._v(t._s(i.name)+" "+t._s(i.mobile),10,d)]),t._ri(!!i.is_default,11,void 0!==s?s:a)?e("text",{staticClass:"state",attrs:{_hid:11,_fid:d}},[]):t._e()]),e("view",{staticClass:"u-addr",attrs:{_hid:13,_fid:d}},[t._v(t._s(i.address),14,d)])]),e("view",{staticClass:"rt-addr",attrs:{_hid:15,_fid:d}},[e("text",{staticClass:"iconfont icon-btn_edit",attrs:{"data-type":"1","data-index":a,_hid:16,_fid:d,_batrs:"data-index"},on:{click:t.editAddressListener}}),e("text",{staticClass:"iconfont icon-btn_delete",attrs:{"data-index":a,_hid:17,_fid:d,_batrs:"data-index"},on:{click:t.showDeleteListener}})])])},6,t._self),t._ri(!!t.more,18)?e("view",{staticClass:"more",attrs:{bindtap:"loadMore",_hid:18}},[]):t._e(),t._ri(!t.more,20)?e("view",{staticClass:"nodata",attrs:{_hid:20}},[]):t._e(),e("LoadingView",{attrs:{img:t.imgBaseUrl+"/loading.gif",_hid:22,_batrs:"img",_cid:0}}),e("ToastView",{attrs:{_hid:1024,_cid:1}})],1),t._ri(!!t.edit_addr,2026)?e("view",{staticClass:"edit-address",attrs:{_hid:2026}},[e("form",{attrs:{_hid:2027},on:{submit:t.submitUserAddress}},[e("view",{staticClass:"e-tit",attrs:{_hid:2028}},[e("text",{staticStyle:{flex:"1"},attrs:{_hid:2029}},[t._v(t._s(0==t.type?"新增地址":"修改地址"),2030)]),e("text",{staticClass:"iconfont icon-btn_close_black",attrs:{_hid:2031},on:{click:t.closeEditListener}})]),e("view",{staticClass:"e-cont",attrs:{_hid:2032}},[e("view",{staticClass:"item-edit",attrs:{_hid:2033}},[e("view",{staticClass:"ie-tit",attrs:{_hid:2034}},[]),e("input",{staticClass:"ie-input",attrs:{name:"name",value:t.editAddr?t.editAddr.name:"",placeholder:"请输入身份证真实姓名","placeholder-style":"color:#CCCCCC;font-size:16px;",_hid:2036,_batrs:"value"}})]),e("view",{staticClass:"item-edit",attrs:{_hid:2037}},[e("view",{staticClass:"ie-tit",attrs:{_hid:2038}},[]),e("input",{staticClass:"ie-input",attrs:{name:"mobile",value:t.editAddr?t.editAddr.mobile:"",placeholder:"请输入联系电话","placeholder-style":"color:#CCCCCC;font-size:16px;",_hid:2040,_batrs:"value"}})]),e("view",{staticClass:"item-edit",attrs:{_hid:2041},on:{click:t.showCitySelectDialog}},[e("view",{staticClass:"ie-tit",attrs:{_hid:2042}},[]),e("view",{staticClass:"ie-input",style:"color:"+(t.addressDesc?"#000000;":"#CCCCCC;"),attrs:{_hid:2044}},[t._v(t._s(t.addressDesc?t.addressDesc:"请选择省 城市 区县"),2045)]),e("text",{staticClass:"iconfont icon-btn_arrowr",attrs:{_hid:2046}})]),e("view",{staticClass:"item-edit",staticStyle:{"border-bottom-width":"0"},attrs:{_hid:2047}},[e("view",{staticClass:"ie-tit",attrs:{_hid:2048}},[]),e("input",{staticClass:"ie-input",attrs:{name:"street",maxlength:"60",value:t.editAddr?t.editAddr.street:"",placeholder:"请填写详细地址，5-60个字","placeholder-style":"color:#CCCCCC;font-size:16px;",_hid:2050,_batrs:"value"}})])]),e("view",{staticClass:"default-cont",attrs:{_hid:2051}},[e("text",{staticClass:"iconfont icon-radio",class:1==t.isDefault?"icon-selector_enable1 ":"icon-selector_disable1 ",style:"color:"+(1==t.isDefault?"#ED3005":"#999999")+";",attrs:{_hid:2052},on:{click:t.onDefaultListener}}),e("text",{staticStyle:{"margin-left":"8px",color:"#797D80","font-size":"14px","margin-top":"2px"},attrs:{_hid:2053}},[])]),e("button",{staticClass:"btn-save",attrs:{"form-type":"submit",_hid:2055}},[])],1)],1):t._e(),e("dialog-view",{attrs:{title:"确定删除该地址？",btnCancel:"确定",btnSure:"再想想",_hid:2057,_cid:2},on:{cancelEvent:t.cancelListener,sureEvent:t.sureListener}}),t._ri(!!t.cityShowFlag,3059)?e("view",{staticClass:"mask",staticStyle:{"z-index":"999"},attrs:{_hid:3059}},[e("view",{staticClass:"time-listBox",attrs:{_hid:3060}},[e("view",{staticClass:"item-time",attrs:{_hid:3061}},[e("view",{staticClass:"date-cancel",attrs:{_hid:3062},on:{click:t.hideCitySelectDialog}},[]),e("view",{staticClass:"date-title",attrs:{_hid:3064}},[]),e("view",{staticClass:"date-sure",attrs:{_hid:3066},on:{click:t.sureSelectListener}},[])]),e("picker-view",{staticStyle:{width:"100%",height:"180px"},attrs:{"indicator-style":"height: 60px;",_hid:3068},on:{change:t.bindChangeListener}},[e("picker-view-column",{attrs:{_hid:3069,_cid:3}},t._l(t.province,function(i,a,s){var d=void 0!==s?s:a;return e("view",{key:a,staticClass:"picker-date",attrs:{_hid:4071,_fid:d,_fk:"i"}},[t._v(t._s(i.label),4072,d)])},4071,t._self)),e("picker-view-column",{attrs:{_hid:4073,_cid:4}},t._l(t.city,function(i,a,s){var d=void 0!==s?s:a;return e("view",{key:a,staticClass:"picker-date",attrs:{_hid:5075,_fid:d,_fk:"j"}},[t._v(t._s(i.label),5076,d)])},5075,t._self)),e("picker-view-column",{attrs:{_hid:5077,_cid:5}},t._l(t.division,function(i,a,s){var d=void 0!==s?s:a;return e("view",{key:a,staticClass:"picker-date",attrs:{_hid:6079,_fid:d,_fk:"z"}},[t._v(t._s(i.label),6080,d)])},6079,t._self))],1)],1)]):t._e()],1)},s=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return s})},a9fc:function(t,i,e){},ad01:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{userid:0,isDefault:0,edit_addr:!1,more:0,list:[],index:"",type:0,editAddr:{},province:[],city:[],division:[],pIndex:0,cIndex:0,dIndex:0,province_id:"",city_id:"",division_id:"",cityShowFlag:!1,parent_id:"",addressDesc:"",deleteIndex:-1,imgBaseUrl:""}},created:function(){this.$data.imgBaseUrl=this.wxb.imgBaseUrl},onLoad:function(i){var e=this,a=t.getStorageSync("user_id");void 0!=a&&""!=a&&(e.$data.userid=a),void 0!=i.pid&&""!=i.pid&&t.setStorageSync("pid",i.pid),e.wxb.addPage(this),e.wxb.Init(i,function(t){e.getAddressList()})},onUnload:function(){this.wxb.removePage()},onShareAppMessage:function(){var t=this;return{title:""==t.$data.companyName?"O2O电商小程序":t.$data.companyName,path:"/pages/index/index?pid="+t.$data.userid}},methods:{bindChangeListener:function(t){var i=this,e=t.detail.value,a=i.$data.pIndex,s=i.$data.cIndex,d=i.$data.dIndex;for(var n in e)0==n&&a!=e[n]?(a=e[n],console.log("修改省份"),i.$data.parent_id=i.$data.province[e[n]].region_id,i.getRegionList(1)):1==n&&s!=e[n]?(s=e[n],console.log("修改城市"),i.$data.parent_id=i.$data.city[e[n]].region_id,i.initDivisionInfo()):2==n&&d!=e[n]&&(d=e[n]);i.$data.pIndex=a,i.$data.cIndex=s,i.$data.dIndex=d},showCitySelectDialog:function(){this.$data.cityShowFlag=!0,this.$data.parent_id="",this.initProvinceInfo()},hideCitySelectDialog:function(){this.$data.cityShowFlag=!1},sureSelectListener:function(t){var i=this,e=i.$data.pIndex,a=i.$data.cIndex,s=i.$data.dIndex;i.$data.province_id=i.$data.province[e].region_id,i.$data.city_id=i.$data.city[a].region_id,i.$data.division_id=i.$data.division[s].region_id,i.$data.addressDesc=i.$data.province[e].label+i.$data.city[e].label+i.$data.division[e].label,i.hideCitySelectDialog(),console.log(i.$data.province),console.log("province_id=>"+i.$data.province_id),console.log("city_id=>"+i.$data.city_id),console.log("division_id=>"+i.$data.division_id)},submitUserAddress:function(t){console.log(t);var i=this,e=t.detail.value,a=e.name,s=e.mobile,d=e.street;""!=a?""!=s?0==i.$data.type?i.wxb.Post("/shop/api.address/addAddress",{name:a,mobile:s,street:d,is_default:i.$data.isDefault,province_id:i.$data.province_id,city_id:i.$data.city_id,division_id:i.$data.division_id},function(t){i.getAddressList(),i.closeEditListener()}):i.wxb.Post("/shop/api.address/editAddress",{address_id:i.$data.editAddr.address_id,name:a,mobile:s,street:d,is_default:i.$data.isDefault,province_id:i.$data.province_id,city_id:i.$data.city_id,division_id:i.$data.division_id},function(t){i.getAddressList(),i.closeEditListener()}):i.$showToast({show:!0,content:"手机号不能为空"}):i.$showToast({show:!0,content:"姓名不能为空"})},onDefaultListener:function(){0==this.$data.isDefault?this.$data.isDefault=1:this.$data.isDefault=0},editAddressListener:function(t){console.log(t);var i=t.currentTarget.dataset,e=i.type,a=i.index,s=this;console.log("type=>"+e),console.log("index=>"+a);var d=this.$data.list;this.$data.type=e,this.$data.index=a,void 0!=a&&1==e?(this.$data.editAddr=d[a],s.$data.province_id=d[a].province_id,s.$data.city_id=d[a].city_id,s.$data.division_id=d[a].division_id,this.$data.isDefault=this.$data.editAddr.is_default,this.$data.addressDesc=d[a].province+d[a].city+d[a].division):(this.$data.editAddr="",this.$data.addressDesc="",this.$data.isDefault=0);var n=this.$data.edit_addr;this.$data.edit_addr=!n},closeEditListener:function(t){this.$data.edit_addr=!1},showDeleteListener:function(t){this.$data.deleteIndex=t.currentTarget.dataset.index,this.$showDialog()},cancelListener:function(t){console.log("删除弹窗"),this.$showDialog(!1);var i=this,e=i.$data.deleteIndex;e>=0&&i.wxb.Post("/shop/api.address/delAddress",{address_id:i.$data.list[e].address_id},function(t){i.$showToast({show:!0,content:"删除地址成功"}),i.getAddressList()})},sureListener:function(t){console.log("再想想"),this.$showDialog(!1)},getAddressList:function(t){var i=this;i.wxb.Post("/shop/api.address/getIndex",{},function(t){i.$data.list=t.list})},initProvinceInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.province=i.list,t.$data.parent_id=i.list[0].region_id,t.initCityInfo()})},initCityInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.city=i.list,t.$data.parent_id=i.list[0].region_id,t.initDivisionInfo()})},initDivisionInfo:function(){var t=this;t.wxb.Post("/shop/api.address/queryRegion",{parent_id:t.$data.parent_id},function(i){t.$data.division=i.list})},getRegionList:function(t){var i=this;i.wxb.Post("/shop/api.address/queryRegion",{parent_id:i.$data.parent_id},function(e){0==t?i.$data.province=e.list:1==t?(i.$data.city=e.list,i.$data.parent_id=e.list[0].region_id,i.initDivisionInfo()):2==t&&(i.$data.division=e.list)})}}};i.default=e}).call(this,e("c11b")["default"])},d848:function(t,i,e){"use strict";e.r(i);var a=e("9bea"),s=e("42ae");for(var d in s)"default"!==d&&function(t){e.d(i,t,function(){return s[t]})}(d);e("3a59");var n=e("2877"),o=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,null,null);i["default"]=o.exports}},[["13ed","common/runtime","common/vendor"]]]);