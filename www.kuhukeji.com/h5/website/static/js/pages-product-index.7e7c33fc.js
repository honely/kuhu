(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-product-index","common-base"],{"2e97":function(t,e,o){"use strict";o.r(e);var n=o("caee"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=a.a},3356:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(o("9751"));function a(t){return t&&t.__esModule?t:{default:t}}var i={extends:n.default,data:function(){return{tabIndex:1,categoryList:[],page:1,list:[],more:0,selectColor:"#00B5DE",footers:[{icon:"",sel_icon:"",name:"首页",link:"/pages/index/index",action:"link"},{icon:"",sel_icon:"",name:"产品",link:"/pages/product/index",action:"link"},{icon:"",sel_icon:"",name:"关于",link:"/pages/about/index",action:"link"},{icon:"",sel_icon:"",name:"联系",link:"",action:"phone"}]}},methods:{_Init:function(t){var e=this;e.$data.footers=e.$data.skin.footer.list,e.$data.selectColor=e.$data.skin.footer.selectColor,e.$data.tabIndex=e.config.getCurrPageIndex("/pages/product/index",e.$data.footers)-0,e.getCats()},getCats:function(){var t=this;t.$request.post("/website/api.product/getCats",{token:uni.getStorageSync("token")}).then(function(e){var o=e.data;console.log(o.list),t.categoryList=o.list,t.getProductList(o.list[0].category_id)})},getProductList:function(t){var e=this,o=this,n=o.$data.list;o.$data.page<=1&&(n=[]),o.$request.post("/website/api.product/index",{token:uni.getStorageSync("token"),category_id:t,page:o.$data.page}).then(function(t){o.hideLoading();var a=t.data;for(var i in e.setBaiduPageInfo(t.data.seo),a.list)n.push(a.list[i]);o.$data.list=n,o.$data.more=a.isMore,o.$data.page=o.$data.page+1})},tabListener:function(t){this.$data.page=1,this.getProductList(t)}}};e.default=i},"541d":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"pageContainer",style:"background:"+t.bgColor+";top:"+t.topHeight+"px;"},[t.loading.show?t._e():o("v-uni-view",{staticClass:"main-box"},[o("tab-view",{attrs:{cDatas:t.categoryList,color:t.mainColor},on:{onTabListener:function(e){e=t.$handleEvent(e),t.tabListener(e)}}}),o("business-view",{attrs:{isMore:0,more:t.more,list:t.list,link:"../../pages/product/detail?id="}})],1),o("ui-loading",{attrs:{loading:t.loading}}),o("page-footer",{attrs:{footer:t.footers,length:t.footers.length,tabIndex:t.tabIndex,color:t.selectColor}})],1)},a=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return a})},"67fe":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div")},a=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return a})},"8fd8":function(t,e,o){"use strict";o.r(e);var n=o("541d"),a=o("9446");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);var r=o("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"482d5ac1",null);e["default"]=s.exports},9446:function(t,e,o){"use strict";o.r(e);var n=o("3356"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=a.a},9751:function(t,e,o){"use strict";o.r(e);var n=o("67fe"),a=o("2e97");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);var r=o("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"723c30c7",null);e["default"]=s.exports},caee:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=!1,a={data:function(){return{loading:{show:!1,loading:{show:!1},error:{show:!1,icon:"http://kuhukeji.com/static/uimage/mall/error/icon_none_network@2x.png",title:"网络异常, 请稍后重试"}},token:"",skin:"",bgColor:"",mainColor:"",topHeight:0,footers:[{title:"首页",link:"/pages/index/index",icon:"icontabbar",sel_icon:"icontabbar_pre3"},{title:"分类",link:"/pages/classify/index",icon:"icontabbar2",sel_icon:"icontabbar_pre2"},{title:"发布",link:"/pages/publish/index",icon:"icontabbar1",sel_icon:"icontabbar_pre1"},{title:"好店",link:"/pages/shop/index",icon:"icontabbar3",sel_icon:"icontabbar_pre4"},{title:"我的",link:"/pages/mine/index",icon:"icontabbar4",sel_icon:"icontabbar_pre"}],baseUrl:""}},onLoad:function(t){console.log(n?"Debug模式":"发布模式");var e=this;void 0!=t.app_id&&(e.config.app_id=t.app_id),e.$data.topHeight="h5"==e.config.device?44:0,e.$data.baseUrl=e.config.baseUrl+"/wanneng",console.log("topHeight:"+e.$data.topHeight),e.showLoading(),e.$request.post("/website/api.initialization/Init",{app_id:e.config.app_id,device:e.config.device,scene_id:e.config.scene_id}).then(function(o){e.hideLoading(),e.printf(o.data.token),uni.setStorageSync("token",o.data.token),e.$data.token=o.data.token,console.log(o.data.skin.theme.navigationBarFrontColor),"toutiao"!=e.config.device&&uni.setNavigationBarColor({backgroundColor:o.data.skin.theme.navigationBarBackgroundColor,frontColor:o.data.skin.theme.navigationBarFrontColor}),e.$data.skin=o.data.skin,e.$data.bgColor=o.data.skin.theme.bgColor,e.$data.mainColor=o.data.skin.theme.mainColor,e._Init(t)}).catch(function(t){e.printf(t),e.showErrorView(e.config.errorNodata,t.msg)})},methods:{setBaiduPageInfo:function(t){console.log("百度SEO配置"),console.log(t),"baidu"==this.config.device&&swan.setPageInfo&&swan.setPageInfo({title:t.title?"":t.title,keywords:t.keywords?"":t.keywords,description:t.description?"":t.description,releaseDate:t.releaseDate?"":t.releaseDate,image:t.image?"":t.image,success:function(){console.log("页面基础信息设置完成")}})},_Init:function(t){},printf:function(t){n&&console.log(t)},showLoading:function(){var t=this.$data.loading;t.show=!0,t.loading.show=!0,t.error.show=!1},hideLoading:function(){var t=this.$data.loading;t.show=!1,this.$data.loading=t},showErrorView:function(t,e){var o=this.$data.loading;o.show=!0,o.loading.show=!1,o.loading.show=!1,o.error.show=!0,o.error.icon=t,o.error.title=e,this.$data.loading=o}}};e.default=a}}]);