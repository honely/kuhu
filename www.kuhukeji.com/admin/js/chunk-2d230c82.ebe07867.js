(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230c82"],{ee6b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-nav",{attrs:{title:t.appTypeInfo.app_name?t.appTypeInfo.app_name+"模版分类管理":""}}),a("div",{staticClass:"wyu-main"},[a("div",{staticClass:"wyu-tabbar"},[a("ul",[a("li",[a("router-link",{attrs:{to:"/miniapp/detail/"+t.apptype}},[t._v("程序首页")])],1),a("li",[a("router-link",{attrs:{to:"/miniapp/index/"+t.apptype}},[t._v("客户管理")])],1),a("li",[a("router-link",{attrs:{to:"/miniapp/template/"+t.apptype}},[t._v("模版管理")])],1),a("li",{staticClass:"on"},[a("router-link",{attrs:{to:"/miniapp/templatecat/"+t.apptype}},[t._v("模版分类")])],1),a("li",[a("router-link",{attrs:{to:"/miniapp/sms/"+t.apptype}},[t._v("短信模板")])],1)])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wyu-block"},[a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"mini",type:"danger"},on:{click:t.addCat}},[t._v("新增分类")]),a("el-table",{ref:"multipleTable",attrs:{data:t.cats}},[a("el-table-column",{attrs:{prop:"cat_id",label:"ID"}}),a("el-table-column",{attrs:{prop:"cat_name",label:"分类"}}),a("el-table-column",{attrs:{prop:"orderby",label:"排序"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.editCat(e)}}},[t._v("编辑")]),t._v("\n               \n\n              "),a("el-popover",{staticStyle:{margin:"0 10px"},attrs:{placement:"top",width:"160"},model:{value:e.row.is_delete,callback:function(a){t.$set(e.row,"is_delete",a)},expression:"scope.row.is_delete"}},[a("p",{staticStyle:{"margin-bottom":"4px"}},[t._v("确定删除吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{loading:t.loading,size:"mini",type:"text"},on:{click:function(t){e.row.is_delete=!1}}},[t._v("取消\n                  ")]),a("el-button",{attrs:{loading:t.loading,type:"primary",size:"mini"},on:{click:function(a){return t.deleteCat(e)}}},[t._v("确定\n                  ")])],1),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),a("el-dialog",{attrs:{title:"添加分类",visible:t.addDialog,"modal-append-to-body":!1,width:"600px"},on:{"update:visible":function(e){t.addDialog=e}}},[a("el-form",{attrs:{size:"mini","label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{attrs:{placeholder:"输入分类名称"},model:{value:t.formdata.cat_name,callback:function(e){t.$set(t.formdata,"cat_name",e)},expression:"formdata.cat_name"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{attrs:{placeholder:"数值越大排序越高"},model:{value:t.formdata.orderby,callback:function(e){t.$set(t.formdata,"orderby",e)},expression:"formdata.orderby"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.addLoading},on:{click:t.onSave}},[t._v("立刻保存")])],1)],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:t.EditDialog,"modal-append-to-body":!1,width:"600px"},on:{"update:visible":function(e){t.EditDialog=e}}},[a("el-form",{attrs:{size:"mini","label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名称"}},[a("el-input",{attrs:{placeholder:"输入分类名称"},model:{value:t.detail.cat_name,callback:function(e){t.$set(t.detail,"cat_name",e)},expression:"detail.cat_name"}})],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{attrs:{placeholder:"数值越大排序越高"},model:{value:t.detail.orderby,callback:function(e){t.$set(t.detail,"orderby",e)},expression:"detail.orderby"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.EditLoading},on:{click:t.onEdit}},[t._v("立刻保存")])],1)],1)],1)],1)])],1)},n=[],o=(a("a481"),a("5200")),l=a("d722"),s=a("5fed"),r=a("d7b0"),d="https://www.woyaou.com/api/",c={name:"adminRole",components:{TopNav:o["a"],WyuUpload:s["a"],QrcodeVue:r["a"]},data:function(){return{addDialog:!1,addLoading:!1,EditDialog:!1,EditLoading:!1,formdata:{cat_name:"",orderby:0},detail:[],cats:[],appTypeInfo:[],loading:!1}},created:function(){this.apptype=this.$route.params.apptype,this.apptype?this.initWyu():this.$router.replace("/404")},methods:{initWyu:function(){var t=this;l["a"](d+"account/checkApp",{account_id:this.$store.getters.adminInfo.account.account_id,account_t:this.$store.getters.adminInfo.account.account_t,account_sign:this.$store.getters.adminInfo.account.account_sign,app_id:this.apptype}).then(function(e){t.getList()}).catch(function(e){t.$router.replace("/buyauth")})},getList:function(){var t=this;this.loading=!0,l["a"]("/admin/resource.template/allCats",{token:this.$store.getters.adminToken,app_type:this.apptype}).then(function(e){t.cats=e.cats,t.appTypeInfo=e.appTypeInfo,t.loading=!1}).catch(function(e){t.loading=!1})},addCat:function(){this.addDialog=!0},onSave:function(){var t=this;this.addLoading=!0,l["a"]("/admin/resource.template/createCat",{token:this.$store.getters.adminToken,app_type:this.apptype,cat_name:this.formdata.cat_name,orderby:this.formdata.orderby}).then(function(e){t.addDialog=!1,t.$message({message:"恭喜你，操作成功",type:"success"}),t.getList(),t.addLoading=!1}).catch(function(e){t.addLoading=!1})},editCat:function(t){this.detail=t.row,this.EditDialog=!0},onEdit:function(){var t=this;this.EditLoading=!0,l["a"]("/admin/resource.template/editCat",{token:this.$store.getters.adminToken,cat_id:this.detail.cat_id,cat_name:this.detail.cat_name,orderby:this.detail.orderby}).then(function(e){t.EditDialog=!1,t.$message({message:"恭喜你，操作成功",type:"success"}),t.getList(),t.EditLoading=!1}).catch(function(e){t.EditLoading=!1})},deleteCat:function(t){var e=this;t.row.is_delete=!1,this.loading=!0,l["a"]("/admin/resource.template/delCat",{token:this.$store.getters.adminToken,cat_id:t.row.cat_id}).then(function(t){e.loading=!1,e.$message({message:"恭喜你，操作成功",type:"success"}),e.getList()}).catch(function(t){e.loading=!1})}}},p=c,u=a("2877"),m=Object(u["a"])(p,i,n,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d230c82.ebe07867.js.map